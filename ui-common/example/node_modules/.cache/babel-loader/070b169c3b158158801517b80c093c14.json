{"ast":null,"code":"import React__default, { useRef, useLayoutEffect, useCallback, useEffect, useState, useMemo } from 'react';\nimport { Grid, Button, Modal, Backdrop, Fade, Box, Typography, Divider, makeStyles, Tooltip as Tooltip$1, Snackbar } from '@material-ui/core';\nimport CodeEditor from '@uiw/react-textarea-code-editor';\nimport MenuBookIcon from '@material-ui/icons/MenuBook';\nimport Lowlight from 'react-lowlight';\nimport 'highlight.js/styles/atom-one-light.css';\nimport xml from 'highlight.js/lib/languages/xml';\nimport json from 'highlight.js/lib/languages/json';\nimport protobuf from 'highlight.js/lib/languages/protobuf';\nimport javascript from 'highlight.js/lib/languages/javascript';\nimport actionscript from 'highlight.js/lib/languages/actionscript';\nimport wasm from 'highlight.js/lib/languages/wasm';\nimport handlebars from 'highlight.js/lib/languages/handlebars';\nimport yaml from 'highlight.js/lib/languages/yaml';\nimport python from 'highlight.js/lib/languages/python';\nimport { atom, useRecoilState, useRecoilValue, selector, RecoilRoot, useSetRecoilState } from 'recoil';\nimport ScrollableFeedVirtualized from 'react-scrollable-feed-virtualized';\nimport Moment from 'moment';\nimport SwapHorizIcon from '@material-ui/icons/SwapHoriz';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport { makeStyles as makeStyles$1, createStyles } from '@material-ui/core/styles';\nimport ProtobufDecoder from 'protobuf-decoder';\nimport jsonBeautify from 'json-beautify';\nimport xmlBeautify from 'xml-formatter';\nimport { toast } from 'react-toastify';\nimport MuiAlert from '@material-ui/lab/Alert';\nvar styles = {\n  \"mainBackgroundColor\": \"white\",\n  \"headerBackgroundColor\": \"#F7F9FC\",\n  \"fontColor\": \"#0C0B1A\",\n  \"secondaryFontColor\": \"rgba(0, 0, 0, 0.5)\",\n  \"blueColor\": \"#205CF5\",\n  \"lightBlueColor\": \"#BCCEFD\",\n  \"successColor\": \"#27AE60\",\n  \"failureColor\": \"#EB5757\",\n  \"blueGray\": \"#494677\",\n  \"lightGray\": \"#8F9BB2\",\n  \"container\": \"_Filters-module__container__bDoWi\",\n  \"filterLabel\": \"_Filters-module__filterLabel__3TLXM\",\n  \"icon\": \"_Filters-module__icon__38Jcc\",\n  \"filterContainer\": \"_Filters-module__filterContainer__2IE09\",\n  \"filterText\": \"_Filters-module__filterText__Lj7Op\",\n  \"divider1\": \"_Filters-module__divider1__2wmLq\",\n  \"divider2\": \"_Filters-module__divider2__2hFpj\"\n};\nLowlight.registerLanguage('python', python);\nLowlight.registerLanguage('xml', xml);\nLowlight.registerLanguage('json', json);\nLowlight.registerLanguage('yaml', yaml);\nLowlight.registerLanguage('protobuf', protobuf);\nLowlight.registerLanguage('javascript', javascript);\nLowlight.registerLanguage('actionscript', actionscript);\nLowlight.registerLanguage('wasm', wasm);\nLowlight.registerLanguage('handlebars', handlebars);\n\nconst SyntaxHighlighter = _ref => {\n  let {\n    code,\n    showLineNumbers: _showLineNumbers = false,\n    language: _language = null\n  } = _ref;\n  const markers = _showLineNumbers ? code.split(\"\\n\").map((item, i) => {\n    return {\n      line: i + 1,\n      className: 'hljs-marker-line'\n    };\n  }) : [];\n  return React__default.createElement(\"div\", {\n    style: {\n      fontSize: \".75rem\"\n    }\n  }, React__default.createElement(Lowlight, {\n    language: _language ? _language : \"\",\n    value: code,\n    markers: markers\n  }));\n};\n\nvar filterUIExample1 = \"filter-ui-example-1~blRIeMjR.png\";\nvar filterUIExample2 = \"filter-ui-example-2~TNqHmXhH.png\";\nvar variables = {\n  \"mainBackgroundColor\": \"white\",\n  \"headerBackgroundColor\": \"#F7F9FC\",\n  \"fontColor\": \"#0C0B1A\",\n  \"secondaryFontColor\": \"rgba(0, 0, 0, 0.5)\",\n  \"blueColor\": \"#205CF5\",\n  \"lightBlueColor\": \"#BCCEFD\",\n  \"successColor\": \"#27AE60\",\n  \"failureColor\": \"#EB5757\",\n  \"blueGray\": \"#494677\",\n  \"lightGray\": \"#8F9BB2\"\n};\nconst queryAtom = atom({\n  key: \"queryAtom\",\n  default: \"\"\n});\n\nconst useKeyPress = function (eventConfigs, callback) {\n  let node = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  const callbackRef = useRef(callback);\n  useLayoutEffect(() => {\n    callbackRef.current = callback;\n  });\n  const handleKeyPress = useCallback(event => {\n    if (eventConfigs.some(eventConfig => Object.keys(eventConfig).every(nameKey => eventConfig[nameKey] === event[nameKey]))) {\n      event.stopPropagation();\n      event.preventDefault();\n      callbackRef.current(event);\n    }\n  }, [eventConfigs]);\n  useEffect(() => {\n    const targetNode = node || document;\n    targetNode && targetNode.addEventListener(\"keydown\", handleKeyPress);\n    return () => targetNode && targetNode.removeEventListener(\"keydown\", handleKeyPress);\n  }, [handleKeyPress, node]);\n};\n\nconst dictionary = {\n  ctrlEnter: [{\n    metaKey: true,\n    code: \"Enter\"\n  }, {\n    ctrlKey: true,\n    code: \"Enter\"\n  }],\n  enter: [{\n    code: \"Enter\"\n  }]\n};\nconst wsConnectionAtom = atom({\n  key: \"wsConnectionAtom\",\n  default: 0\n});\nconst closeWsConnectionCallbackAtom = atom({\n  key: \"closeWsConnectionCallbackAtom\",\n  default: null\n});\n\nconst Filters = _ref2 => {\n  let {\n    backgroundColor,\n    openWebSocket\n  } = _ref2;\n  return React__default.createElement(\"div\", {\n    className: styles.container\n  }, React__default.createElement(QueryForm, {\n    backgroundColor: backgroundColor,\n    openWebSocket: openWebSocket\n  }));\n};\n\nconst modalStyle = {\n  position: 'absolute',\n  top: '10%',\n  left: '50%',\n  transform: 'translate(-50%, 0%)',\n  width: '80vw',\n  bgcolor: 'background.paper',\n  borderRadius: '5px',\n  boxShadow: 24,\n  outline: \"none\",\n  p: 4,\n  color: '#000'\n};\n\nconst QueryForm = _ref3 => {\n  let {\n    backgroundColor,\n    openWebSocket\n  } = _ref3;\n  const formRef = useRef(null);\n  const [query, setQuery] = useRecoilState(queryAtom);\n  const closeWsConnectionObj = useRecoilValue(closeWsConnectionCallbackAtom);\n  const [openModal, setOpenModal] = useState(false);\n\n  const handleOpenModal = () => setOpenModal(true);\n\n  const handleCloseModal = () => setOpenModal(false);\n\n  const handleChange = async e => {\n    setQuery(e.target.value.trim());\n  };\n\n  const handleSubmit = e => {\n    closeWsConnectionObj.closeCallback();\n\n    if (query) {\n      openWebSocket(`(${query}) and leftOff(-1)`, true);\n    } else {\n      openWebSocket(`leftOff(-1)`, true);\n    }\n\n    e.preventDefault();\n  };\n\n  useKeyPress(dictionary.ctrlEnter, handleSubmit, formRef.current);\n  return React__default.createElement(React__default.Fragment, null, React__default.createElement(\"form\", {\n    ref: formRef,\n    onSubmit: handleSubmit,\n    style: {\n      width: '100%'\n    }\n  }, React__default.createElement(Grid, {\n    container: true,\n    spacing: 2\n  }, React__default.createElement(Grid, {\n    item: true,\n    xs: 8,\n    style: {\n      maxHeight: '25vh',\n      overflowY: 'auto'\n    }\n  }, React__default.createElement(\"label\", null, React__default.createElement(CodeEditor, {\n    value: query,\n    language: \"py\",\n    placeholder: \"Mizu Filter Syntax\",\n    onChange: handleChange,\n    padding: 8,\n    style: {\n      fontSize: 14,\n      backgroundColor: `${backgroundColor}`,\n      fontFamily: 'ui-monospace,SFMono-Regular,SF Mono,Consolas,Liberation Mono,Menlo,monospace'\n    }\n  }))), React__default.createElement(Grid, {\n    item: true,\n    xs: 4\n  }, React__default.createElement(Button, {\n    type: \"submit\",\n    variant: \"contained\",\n    style: {\n      margin: \"2px 0px 0px 0px\",\n      backgroundColor: variables.blueColor,\n      fontWeight: 600,\n      borderRadius: \"4px\",\n      color: \"#fff\",\n      textTransform: \"none\"\n    }\n  }, \"Apply\"), React__default.createElement(Button, {\n    title: \"Open Filtering Guide (Cheatsheet)\",\n    variant: \"contained\",\n    color: \"primary\",\n    style: {\n      margin: \"2px 0px 0px 10px\",\n      minWidth: \"26px\",\n      backgroundColor: variables.blueColor,\n      fontWeight: 600,\n      borderRadius: \"4px\",\n      color: \"#fff\",\n      textTransform: \"none\"\n    },\n    onClick: handleOpenModal\n  }, React__default.createElement(MenuBookIcon, {\n    fontSize: \"inherit\"\n  }))))), React__default.createElement(Modal, {\n    \"aria-labelledby\": \"transition-modal-title\",\n    \"aria-describedby\": \"transition-modal-description\",\n    open: openModal,\n    onClose: handleCloseModal,\n    closeAfterTransition: true,\n    BackdropComponent: Backdrop,\n    BackdropProps: {\n      timeout: 500\n    },\n    style: {\n      overflow: 'auto'\n    }\n  }, React__default.createElement(Fade, {\n    in: openModal\n  }, React__default.createElement(Box, {\n    sx: modalStyle\n  }, React__default.createElement(Typography, {\n    id: \"modal-modal-title\",\n    variant: \"h5\",\n    component: \"h2\",\n    style: {\n      textAlign: 'center'\n    }\n  }, \"Filtering Guide (Cheatsheet)\"), React__default.createElement(Typography, {\n    component: 'span',\n    id: \"modal-modal-description\"\n  }, React__default.createElement(\"p\", null, \"Mizu has a rich filtering syntax that let's you query the results both flexibly and efficiently.\"), React__default.createElement(\"p\", null, \"Here are some examples that you can try;\")), React__default.createElement(Grid, {\n    container: true\n  }, React__default.createElement(Grid, {\n    item: true,\n    xs: true,\n    style: {\n      margin: \"10px\"\n    }\n  }, React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"This is a simple query that matches to HTTP packets with request path \\\"/catalogue\\\":\"), React__default.createElement(SyntaxHighlighter, {\n    showLineNumbers: false,\n    code: `http and request.path == \"/catalogue\"`,\n    language: \"python\"\n  }), React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"The same query can be negated for HTTP path and written like this:\"), React__default.createElement(SyntaxHighlighter, {\n    showLineNumbers: false,\n    code: `http and request.path != \"/catalogue\"`,\n    language: \"python\"\n  }), React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"The syntax supports regular expressions. Here is a query that matches the HTTP requests that send JSON to a server:\"), React__default.createElement(SyntaxHighlighter, {\n    showLineNumbers: false,\n    code: `http and request.headers[\"Accept\"] == r\"application/json.*\"`,\n    language: \"python\"\n  }), React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"Here is another query that matches HTTP responses with status code 4xx:\"), React__default.createElement(SyntaxHighlighter, {\n    showLineNumbers: false,\n    code: `http and response.status == r\"4.*\"`,\n    language: \"python\"\n  }), React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"The same exact query can be as integer comparison:\"), React__default.createElement(SyntaxHighlighter, {\n    showLineNumbers: false,\n    code: `http and response.status >= 400`,\n    language: \"python\"\n  }), React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"The results can be queried based on their timestamps:\"), React__default.createElement(SyntaxHighlighter, {\n    showLineNumbers: false,\n    code: `timestamp < datetime(\"10/28/2021, 9:13:02.905 PM\")`,\n    language: \"python\"\n  })), React__default.createElement(Divider, {\n    className: styles.divider1,\n    orientation: \"vertical\",\n    flexItem: true\n  }), React__default.createElement(Grid, {\n    item: true,\n    xs: true,\n    style: {\n      margin: \"10px\"\n    }\n  }, React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"Since Mizu supports various protocols like gRPC, AMQP, Kafka and Redis. It's possible to write complex queries that match multiple protocols like this:\"), React__default.createElement(SyntaxHighlighter, {\n    showLineNumbers: false,\n    code: `(http and request.method == \"PUT\") or (amqp and request.queue.startsWith(\"test\"))\\n or (kafka and response.payload.errorCode == 2) or (redis and request.key == \"example\")\\n or (grpc and request.headers[\":path\"] == r\".*foo.*\")`,\n    language: \"python\"\n  }), React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"By clicking the plus icon that appears beside the queryable UI elements on hovering in both left-pane and right-pane, you can automatically select a field and update the query:\"), React__default.createElement(\"img\", {\n    src: filterUIExample1,\n    width: 600,\n    alt: \"Clicking to UI elements (left-pane)\",\n    title: \"Clicking to UI elements (left-pane)\"\n  }), React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"Such that; clicking this icon in left-pane, would append the query below:\"), React__default.createElement(SyntaxHighlighter, {\n    showLineNumbers: false,\n    code: `and dst.name == \"carts.sock-shop\"`,\n    language: \"python\"\n  }), React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"Another queriable UI element example, this time from the right-pane:\"), React__default.createElement(\"img\", {\n    src: filterUIExample2,\n    width: 300,\n    alt: \"Clicking to UI elements (right-pane)\",\n    title: \"Clicking to UI elements (right-pane)\"\n  }), React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"A query that compares one selector to another is also a valid query:\"), React__default.createElement(SyntaxHighlighter, {\n    showLineNumbers: false,\n    code: `http and (request.query[\"x\"] == response.headers[\"y\"]\\n or response.content.text.contains(request.query[\"x\"]))`,\n    language: \"python\"\n  })), React__default.createElement(Divider, {\n    className: styles.divider2,\n    orientation: \"vertical\",\n    flexItem: true\n  }), React__default.createElement(Grid, {\n    item: true,\n    xs: true,\n    style: {\n      margin: \"10px\"\n    }\n  }, React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"There are a few helper methods included the in the filter language* to help building queries more easily.\"), React__default.createElement(\"br\", null), React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"true if the given selector's value starts with (similarly \", React__default.createElement(\"code\", {\n    style: {\n      fontSize: \"14px\"\n    }\n  }, \"endsWith\"), \", \", React__default.createElement(\"code\", {\n    style: {\n      fontSize: \"14px\"\n    }\n  }, \"contains\"), \") the string:\"), React__default.createElement(SyntaxHighlighter, {\n    showLineNumbers: false,\n    code: `request.path.startsWith(\"something\")`,\n    language: \"python\"\n  }), React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"a field that contains a JSON encoded string can be filtered based a JSONPath:\"), React__default.createElement(SyntaxHighlighter, {\n    showLineNumbers: false,\n    code: `response.content.text.json().some.path == \"somevalue\"`,\n    language: \"python\"\n  }), React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"fields that contain sensitive information can be redacted:\"), React__default.createElement(SyntaxHighlighter, {\n    showLineNumbers: false,\n    code: `and redact(\"request.path\", \"src.name\")`,\n    language: \"python\"\n  }), React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"returns the UNIX timestamp which is the equivalent of the time that's provided by the string. Invalid input evaluates to false:\"), React__default.createElement(SyntaxHighlighter, {\n    showLineNumbers: false,\n    code: `timestamp >= datetime(\"10/19/2021, 6:29:02.593 PM\")`,\n    language: \"python\"\n  }), React__default.createElement(Typography, {\n    id: \"modal-modal-description\"\n  }, \"limits the number of records that are streamed back as a result of a query. Always evaluates to true:\"), React__default.createElement(SyntaxHighlighter, {\n    showLineNumbers: false,\n    code: `and limit(100)`,\n    language: \"python\"\n  }))), React__default.createElement(\"br\", null), React__default.createElement(Typography, {\n    id: \"modal-modal-description\",\n    style: {\n      fontSize: 12,\n      fontStyle: 'italic'\n    }\n  }, \"*The filtering functionality is provided through \", React__default.createElement(\"b\", null, \"Basenine\"), \" database server. Please refer to \", React__default.createElement(\"a\", {\n    href: \"https://github.com/up9inc/basenine/wiki/BFL-Syntax-Reference\"\n  }, React__default.createElement(\"b\", null, \"BFL Syntax Reference\")), \" for more information.\")))));\n};\n\nvar styles$1 = {\n  \"mainBackgroundColor\": \"white\",\n  \"headerBackgroundColor\": \"#F7F9FC\",\n  \"fontColor\": \"#0C0B1A\",\n  \"secondaryFontColor\": \"rgba(0, 0, 0, 0.5)\",\n  \"blueColor\": \"#205CF5\",\n  \"lightBlueColor\": \"#BCCEFD\",\n  \"successColor\": \"#27AE60\",\n  \"failureColor\": \"#EB5757\",\n  \"blueGray\": \"#494677\",\n  \"lightGray\": \"#8F9BB2\",\n  \"list\": \"_EntriesList-module__list__2PiXR\",\n  \"container\": \"_EntriesList-module__container__2Wpee\",\n  \"footer\": \"_EntriesList-module__footer__2Lj6K\",\n  \"styledButton\": \"_EntriesList-module__styledButton__2b3l1\",\n  \"spinnerContainer\": \"_EntriesList-module__spinnerContainer__1EM1d\",\n  \"noMoreDataAvailable\": \"_EntriesList-module__noMoreDataAvailable__DuOfY\",\n  \"btnOld\": \"_EntriesList-module__btnOld__F9W2b\",\n  \"btnLive\": \"_EntriesList-module__btnLive__WTK-j\",\n  \"hideButton\": \"_EntriesList-module__hideButton__qTNt5\",\n  \"showButton\": \"_EntriesList-module__showButton__3p5uQ\"\n};\nvar styles$2 = {\n  \"mainBackgroundColor\": \"white\",\n  \"headerBackgroundColor\": \"#F7F9FC\",\n  \"fontColor\": \"#0C0B1A\",\n  \"secondaryFontColor\": \"rgba(0, 0, 0, 0.5)\",\n  \"blueColor\": \"#205CF5\",\n  \"lightBlueColor\": \"#BCCEFD\",\n  \"successColor\": \"#27AE60\",\n  \"failureColor\": \"#EB5757\",\n  \"blueGray\": \"#494677\",\n  \"lightGray\": \"#8F9BB2\",\n  \"row\": \"_EntryListItem-module__row__187vB\",\n  \"rowSelected\": \"_EntryListItem-module__rowSelected__17m0_\",\n  \"ruleSuccessRow\": \"_EntryListItem-module__ruleSuccessRow__1YAqt\",\n  \"ruleSuccessRowSelected\": \"_EntryListItem-module__ruleSuccessRowSelected__3B3Xu\",\n  \"ruleFailureRow\": \"_EntryListItem-module__ruleFailureRow__141CT\",\n  \"ruleFailureRowSelected\": \"_EntryListItem-module__ruleFailureRowSelected__3UkOF\",\n  \"ruleNumberText\": \"_EntryListItem-module__ruleNumberText__3kmpZ\",\n  \"ruleNumberTextFailure\": \"_EntryListItem-module__ruleNumberTextFailure__3gYwE\",\n  \"ruleNumberTextSuccess\": \"_EntryListItem-module__ruleNumberTextSuccess__CKluX\",\n  \"resolvedName\": \"_EntryListItem-module__resolvedName__9oFQl\",\n  \"timestamp\": \"_EntryListItem-module__timestamp__2FXpG\",\n  \"endpointServiceContainer\": \"_EntryListItem-module__endpointServiceContainer__38Ftu\",\n  \"separatorRight\": \"_EntryListItem-module__separatorRight__2V5vq\",\n  \"separatorLeft\": \"_EntryListItem-module__separatorLeft__3u_vA\",\n  \"tcpInfo\": \"_EntryListItem-module__tcpInfo__q0k49\",\n  \"port\": \"_EntryListItem-module__port__1tc6L\",\n  \"ip\": \"_EntryListItem-module__ip__oshN2\"\n};\nvar styles$3 = {\n  \"mainBackgroundColor\": \"white\",\n  \"headerBackgroundColor\": \"#F7F9FC\",\n  \"fontColor\": \"#0C0B1A\",\n  \"secondaryFontColor\": \"rgba(0, 0, 0, 0.5)\",\n  \"blueColor\": \"#205CF5\",\n  \"lightBlueColor\": \"#BCCEFD\",\n  \"successColor\": \"#27AE60\",\n  \"failureColor\": \"#EB5757\",\n  \"blueGray\": \"#494677\",\n  \"lightGray\": \"#8F9BB2\",\n  \"base\": \"_StatusCode-module__base__2q9kG\",\n  \"neutral\": \"_StatusCode-module__neutral__2KoKn\",\n  \"success\": \"_StatusCode-module__success__Q9KgG\",\n  \"failure\": \"_StatusCode-module__failure__DQ-SD\"\n};\nvar QueryableStyle = {\n  \"QueryableContainer\": \"_Queryable-module__QueryableContainer__2UQ5q\",\n  \"displayIconOnMouseOver\": \"_Queryable-module__displayIconOnMouseOver__2-s4J\",\n  \"Queryable-Icon\": \"_Queryable-module__Queryable-Icon__3_hk7\",\n  \"QueryableIcon\": \"_Queryable-module__QueryableIcon__kCbWQ\",\n  \"QueryableAddNotifier\": \"_Queryable-module__QueryableAddNotifier__1quUB\",\n  \"QueryableTooltip\": \"_Queryable-module__QueryableTooltip__2RwBJ\"\n};\n\nconst Queryable = _ref4 => {\n  let {\n    query,\n    style,\n    iconStyle,\n    className,\n    useTooltip: _useTooltip = true,\n    displayIconOnMouseOver: _displayIconOnMouseOver = false,\n    flipped: _flipped = false,\n    children\n  } = _ref4;\n  const [showAddedNotification, setAdded] = useState(false);\n  const [showTooltip, setShowTooltip] = useState(false);\n  const [queryState, setQuery] = useRecoilState(queryAtom);\n\n  const onCopy = () => {\n    setAdded(true);\n  };\n\n  useEffect(() => {\n    let timer;\n\n    if (showAddedNotification) {\n      setQuery(queryState ? `${queryState} and ${query}` : query);\n      timer = setTimeout(() => {\n        setAdded(false);\n      }, 1000);\n    }\n\n    return () => clearTimeout(timer);\n  }, [showAddedNotification, query, setQuery]);\n  const addButton = query ? React__default.createElement(CopyToClipboard, {\n    text: query,\n    onCopy: onCopy\n  }, React__default.createElement(\"span\", {\n    className: QueryableStyle.QueryableIcon,\n    title: `Add \"${query}\" to the filter`,\n    style: iconStyle\n  }, React__default.createElement(AddCircleIcon, {\n    fontSize: \"small\",\n    color: \"inherit\"\n  }), showAddedNotification && React__default.createElement(\"span\", {\n    className: QueryableStyle.QueryableAddNotifier\n  }, \"Added\"))) : null;\n  return React__default.createElement(\"div\", {\n    className: `${QueryableStyle.QueryableContainer} ${QueryableStyle.displayIconOnMouseOver} ${className ? className : ''} ${_displayIconOnMouseOver ? 'displayIconOnMouseOver ' : ''}`,\n    style: style,\n    onMouseOver: e => setShowTooltip(true),\n    onMouseLeave: e => setShowTooltip(false)\n  }, _flipped && addButton, children, !_flipped && addButton, _useTooltip && showTooltip && React__default.createElement(\"span\", {\n    className: QueryableStyle.QueryableTooltip\n  }, query));\n};\n\nvar StatusCodeClassification;\n\n(function (StatusCodeClassification) {\n  StatusCodeClassification[\"SUCCESS\"] = \"success\";\n  StatusCodeClassification[\"FAILURE\"] = \"failure\";\n  StatusCodeClassification[\"NEUTRAL\"] = \"neutral\";\n})(StatusCodeClassification || (StatusCodeClassification = {}));\n\nconst StatusCode = _ref5 => {\n  let {\n    statusCode\n  } = _ref5;\n  const classification = getClassification(statusCode);\n  return React__default.createElement(Queryable, {\n    query: `response.status == ${statusCode}`,\n    displayIconOnMouseOver: true,\n    flipped: true,\n    iconStyle: {\n      marginTop: \"40px\",\n      paddingLeft: \"10px\"\n    }\n  }, React__default.createElement(\"span\", {\n    title: \"Status Code\",\n    className: `${styles$3[classification]} ${styles$3.base}`\n  }, statusCode));\n};\n\nfunction getClassification(statusCode) {\n  let classification = StatusCodeClassification.NEUTRAL;\n\n  if (statusCode >= 200 && statusCode <= 399 || statusCode === 0) {\n    classification = StatusCodeClassification.SUCCESS;\n  } else if (statusCode >= 400 || statusCode >= 1 && statusCode <= 16) {\n    classification = StatusCodeClassification.FAILURE;\n  }\n\n  return classification;\n}\n\nvar styles$4 = {\n  \"base\": \"_Protocol-module__base__2RtmJ\",\n  \"vertical\": \"_Protocol-module__vertical__3QV4X\",\n  \"horizontal\": \"_Protocol-module__horizontal__hLa_N\"\n};\n\nconst Protocol = _ref6 => {\n  let {\n    protocol,\n    horizontal\n  } = _ref6;\n\n  if (horizontal) {\n    return React__default.createElement(Queryable, {\n      query: protocol.macro,\n      displayIconOnMouseOver: true\n    }, React__default.createElement(\"a\", {\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      href: protocol.referenceLink\n    }, React__default.createElement(\"span\", {\n      className: `${styles$4.base} ${styles$4.horizontal}`,\n      style: {\n        backgroundColor: protocol.backgroundColor,\n        color: protocol.foregroundColor,\n        fontSize: 13\n      },\n      title: protocol.abbr\n    }, protocol.longName)));\n  } else {\n    return React__default.createElement(Queryable, {\n      query: protocol.macro,\n      displayIconOnMouseOver: true,\n      flipped: false,\n      iconStyle: {\n        marginTop: \"52px\",\n        marginRight: \"10px\",\n        zIndex: 1000\n      }\n    }, React__default.createElement(\"span\", {\n      className: `${styles$4.base} ${styles$4.vertical}`,\n      style: {\n        backgroundColor: protocol.backgroundColor,\n        color: protocol.foregroundColor,\n        fontSize: protocol.fontSize,\n        marginRight: \"-20px\"\n      },\n      title: protocol.longName\n    }, protocol.abbr));\n  }\n};\n\nvar miscStyles = {\n  \"mainBackgroundColor\": \"white\",\n  \"headerBackgroundColor\": \"#F7F9FC\",\n  \"fontColor\": \"#0C0B1A\",\n  \"secondaryFontColor\": \"rgba(0, 0, 0, 0.5)\",\n  \"blueColor\": \"#205CF5\",\n  \"lightBlueColor\": \"#BCCEFD\",\n  \"successColor\": \"#27AE60\",\n  \"failureColor\": \"#EB5757\",\n  \"blueGray\": \"#494677\",\n  \"lightGray\": \"#8F9BB2\",\n  \"protocol\": \"_misc-module__protocol__xHb5a\",\n  \"method\": \"_misc-module__method__47gi3\",\n  \"filterPlate\": \"_misc-module__filterPlate__rRcPb\",\n  \"noSelect\": \"_misc-module__noSelect__2tn4S\"\n};\nvar styles$5 = {\n  \"container\": \"_Summary-module__container__2SgD4\",\n  \"summary\": \"_Summary-module__summary__1bYOK\"\n};\n\nconst Summary = _ref7 => {\n  let {\n    method,\n    summary\n  } = _ref7;\n  return React__default.createElement(\"div\", {\n    className: styles$5.container\n  }, method && React__default.createElement(Queryable, {\n    query: `method == \"${method}\"`,\n    className: `${miscStyles.protocol} ${miscStyles.method}`,\n    displayIconOnMouseOver: true,\n    style: {\n      whiteSpace: \"nowrap\"\n    },\n    flipped: true,\n    iconStyle: {\n      zIndex: \"5\",\n      position: \"relative\",\n      right: \"22px\"\n    }\n  }, React__default.createElement(\"span\", null, method)), summary && React__default.createElement(Queryable, {\n    query: `summary == \"${summary}\"`,\n    displayIconOnMouseOver: true,\n    flipped: true,\n    iconStyle: {\n      zIndex: \"5\",\n      position: \"relative\",\n      right: \"14px\"\n    }\n  }, React__default.createElement(\"div\", {\n    className: `${styles$5.summary}`\n  }, summary)));\n};\n\nvar ingoingIconSuccess = \"ingoing-traffic-success~EObaMWtq.svg\";\nvar ingoingIconFailure = \"ingoing-traffic-failure~EYOFZQfa.svg\";\nvar ingoingIconNeutral = \"ingoing-traffic-neutral~bjOAwlSF.svg\";\nvar outgoingIconSuccess = \"outgoing-traffic-success~QiFlyOil.svg\";\nvar outgoingIconFailure = \"outgoing-traffic-failure~boIYJAYg.svg\";\nvar outgoingIconNeutral = \"outgoing-traffic-neutral~BrZHGZUI.svg\";\nconst focusedEntryIdAtom = atom({\n  key: \"focusedEntryIdAtom\",\n  default: null\n});\n\nconst EntryItem = _ref8 => {\n  let {\n    entry,\n    style,\n    headingMode\n  } = _ref8;\n\n  var _Moment, _Moment2;\n\n  const [focusedEntryId, setFocusedEntryId] = useRecoilState(focusedEntryIdAtom);\n  const [queryState, setQuery] = useRecoilState(queryAtom);\n  const isSelected = focusedEntryId === entry.id.toString();\n  const classification = getClassification(entry.status);\n  const numberOfRules = entry.rules.numberOfRules;\n  let ingoingIcon;\n  let outgoingIcon;\n\n  switch (classification) {\n    case StatusCodeClassification.SUCCESS:\n      {\n        ingoingIcon = ingoingIconSuccess;\n        outgoingIcon = outgoingIconSuccess;\n        break;\n      }\n\n    case StatusCodeClassification.FAILURE:\n      {\n        ingoingIcon = ingoingIconFailure;\n        outgoingIcon = outgoingIconFailure;\n        break;\n      }\n\n    case StatusCodeClassification.NEUTRAL:\n      {\n        ingoingIcon = ingoingIconNeutral;\n        outgoingIcon = outgoingIconNeutral;\n        break;\n      }\n  }\n\n  let additionalRulesProperties = \"\";\n  let ruleSuccess = true;\n  let rule = ('latency' in entry.rules);\n\n  if (rule) {\n    if (entry.rules.latency !== -1) {\n      if (entry.rules.latency >= entry.latency || !('latency' in entry)) {\n        additionalRulesProperties = styles$2.ruleSuccessRow;\n        ruleSuccess = true;\n      } else {\n        additionalRulesProperties = styles$2.ruleFailureRow;\n        ruleSuccess = false;\n      }\n\n      if (isSelected) {\n        additionalRulesProperties += ` ${entry.rules.latency >= entry.latency ? styles$2.ruleSuccessRowSelected : styles$2.ruleFailureRowSelected}`;\n      }\n    } else {\n      if (entry.rules.status) {\n        additionalRulesProperties = styles$2.ruleSuccessRow;\n        ruleSuccess = true;\n      } else {\n        additionalRulesProperties = styles$2.ruleFailureRow;\n        ruleSuccess = false;\n      }\n\n      if (isSelected) {\n        additionalRulesProperties += ` ${entry.rules.status ? styles$2.ruleSuccessRowSelected : styles$2.ruleFailureRowSelected}`;\n      }\n    }\n  }\n\n  let contractEnabled = true;\n  let contractText = \"\";\n\n  switch (entry.contractStatus) {\n    case 0:\n      contractEnabled = false;\n      break;\n\n    case 1:\n      additionalRulesProperties = styles$2.ruleSuccessRow;\n      ruleSuccess = true;\n      contractText = \"No Breaches\";\n      break;\n\n    case 2:\n      additionalRulesProperties = styles$2.ruleFailureRow;\n      ruleSuccess = false;\n      contractText = \"Breach\";\n      break;\n  }\n\n  const isStatusCodeEnabled = entry.proto.name === \"http\" && \"status\" in entry || entry.status !== 0;\n  let endpointServiceContainer = \"10px\";\n  if (!isStatusCodeEnabled) endpointServiceContainer = \"20px\";\n  return React__default.createElement(React__default.Fragment, null, React__default.createElement(\"div\", {\n    id: `entry-${entry.id.toString()}`,\n    className: `${styles$2.row}\n            ${isSelected && !rule && !contractEnabled ? styles$2.rowSelected : additionalRulesProperties}`,\n    onClick: () => {\n      if (!setFocusedEntryId) return;\n      setFocusedEntryId(entry.id.toString());\n    },\n    style: {\n      border: isSelected && !headingMode ? `1px ${entry.proto.backgroundColor} solid` : \"1px transparent solid\",\n      position: !headingMode ? \"absolute\" : \"unset\",\n      top: style['top'],\n      marginTop: !headingMode ? style['marginTop'] : \"10px\",\n      width: !headingMode ? \"calc(100% - 25px)\" : \"calc(100% - 18px)\"\n    }\n  }, !headingMode ? React__default.createElement(Protocol, {\n    protocol: entry.proto,\n    horizontal: false\n  }) : null, isStatusCodeEnabled && React__default.createElement(\"div\", null, React__default.createElement(StatusCode, {\n    statusCode: entry.status\n  })), React__default.createElement(\"div\", {\n    className: styles$2.endpointServiceContainer,\n    style: {\n      paddingLeft: endpointServiceContainer\n    }\n  }, React__default.createElement(Summary, {\n    method: entry.method,\n    summary: entry.summary\n  }), React__default.createElement(\"div\", {\n    className: styles$2.resolvedName\n  }, React__default.createElement(Queryable, {\n    query: `src.name == \"${entry.src.name}\"`,\n    displayIconOnMouseOver: true,\n    flipped: true,\n    style: {\n      marginTop: \"-4px\",\n      overflow: \"visible\"\n    },\n    iconStyle: !headingMode ? {\n      marginTop: \"4px\",\n      right: \"16px\",\n      position: \"relative\"\n    } : entry.proto.name === \"http\" ? {\n      marginTop: \"4px\",\n      left: \"calc(50vw + 41px)\",\n      position: \"absolute\"\n    } : {\n      marginTop: \"4px\",\n      left: \"calc(50vw - 9px)\",\n      position: \"absolute\"\n    }\n  }, React__default.createElement(\"span\", {\n    title: \"Source Name\"\n  }, entry.src.name ? entry.src.name : \"[Unresolved]\")), React__default.createElement(SwapHorizIcon, {\n    style: {\n      color: entry.proto.backgroundColor,\n      marginTop: \"-2px\",\n      marginLeft: \"5px\",\n      marginRight: \"5px\"\n    }\n  }), React__default.createElement(Queryable, {\n    query: `dst.name == \"${entry.dst.name}\"`,\n    displayIconOnMouseOver: true,\n    flipped: true,\n    style: {\n      marginTop: \"-4px\"\n    },\n    iconStyle: {\n      marginTop: \"4px\",\n      marginLeft: \"-2px\",\n      right: \"11px\",\n      position: \"relative\"\n    }\n  }, React__default.createElement(\"span\", {\n    title: \"Destination Name\"\n  }, entry.dst.name ? entry.dst.name : \"[Unresolved]\")))), rule ? React__default.createElement(\"div\", {\n    className: `${styles$2.ruleNumberText} ${ruleSuccess ? styles$2.ruleNumberTextSuccess : styles$2.ruleNumberTextFailure} ${rule && contractEnabled ? styles$2.separatorRight : \"\"}`\n  }, `Rules (${numberOfRules})`) : \"\", contractEnabled ? React__default.createElement(\"div\", {\n    className: `${styles$2.ruleNumberText} ${ruleSuccess ? styles$2.ruleNumberTextSuccess : styles$2.ruleNumberTextFailure} ${rule && contractEnabled ? styles$2.separatorLeft : \"\"}`\n  }, contractText) : \"\", React__default.createElement(\"div\", {\n    className: styles$2.separatorRight\n  }, React__default.createElement(Queryable, {\n    query: `src.ip == \"${entry.src.ip}\"`,\n    displayIconOnMouseOver: true,\n    flipped: true,\n    iconStyle: {\n      marginRight: \"16px\"\n    }\n  }, React__default.createElement(\"span\", {\n    className: `${styles$2.tcpInfo} ${styles$2.ip}`,\n    title: \"Source IP\"\n  }, entry.src.ip)), React__default.createElement(\"span\", {\n    className: `${styles$2.tcpInfo}`,\n    style: {\n      marginTop: \"18px\"\n    }\n  }, entry.src.port ? \":\" : \"\"), React__default.createElement(Queryable, {\n    query: `src.port == \"${entry.src.port}\"`,\n    displayIconOnMouseOver: true,\n    flipped: true,\n    iconStyle: {\n      marginTop: \"28px\"\n    }\n  }, React__default.createElement(\"span\", {\n    className: `${styles$2.tcpInfo} ${styles$2.port}`,\n    title: \"Source Port\"\n  }, entry.src.port)), entry.isOutgoing ? React__default.createElement(Queryable, {\n    query: `outgoing == true`,\n    displayIconOnMouseOver: true,\n    flipped: true,\n    iconStyle: {\n      marginTop: \"28px\"\n    }\n  }, React__default.createElement(\"img\", {\n    src: outgoingIcon,\n    alt: \"Ingoing traffic\",\n    title: \"Ingoing\"\n  })) : React__default.createElement(Queryable, {\n    query: `outgoing == true`,\n    displayIconOnMouseOver: true,\n    flipped: true,\n    iconStyle: {\n      marginTop: \"28px\"\n    }\n  }, React__default.createElement(\"img\", {\n    src: ingoingIcon,\n    alt: \"Outgoing traffic\",\n    title: \"Outgoing\",\n    onClick: () => {\n      const query = `outgoing == false`;\n      setQuery(queryState ? `${queryState} and ${query}` : query);\n    }\n  })), React__default.createElement(Queryable, {\n    query: `dst.ip == \"${entry.dst.ip}\"`,\n    displayIconOnMouseOver: true,\n    flipped: false,\n    iconStyle: {\n      marginTop: \"28px\"\n    }\n  }, React__default.createElement(\"span\", {\n    className: `${styles$2.tcpInfo} ${styles$2.ip}`,\n    title: \"Destination IP\"\n  }, entry.dst.ip)), React__default.createElement(\"span\", {\n    className: `${styles$2.tcpInfo}`,\n    style: {\n      marginTop: \"18px\"\n    }\n  }, \":\"), React__default.createElement(Queryable, {\n    query: `dst.port == \"${entry.dst.port}\"`,\n    displayIconOnMouseOver: true,\n    flipped: false\n  }, React__default.createElement(\"span\", {\n    className: `${styles$2.tcpInfo} ${styles$2.port}`,\n    title: \"Destination Port\"\n  }, entry.dst.port))), React__default.createElement(\"div\", {\n    className: styles$2.timestamp\n  }, React__default.createElement(Queryable, {\n    query: `timestamp >= datetime(\"${(_Moment = Moment(+entry.timestamp)) === null || _Moment === void 0 ? void 0 : _Moment.utc().format('MM/DD/YYYY, h:mm:ss.SSS A')}\")`,\n    displayIconOnMouseOver: true,\n    flipped: false\n  }, React__default.createElement(\"span\", {\n    title: \"Timestamp (UTC)\"\n  }, (_Moment2 = Moment(+entry.timestamp)) === null || _Moment2 === void 0 ? void 0 : _Moment2.utc().format('MM/DD/YYYY, h:mm:ss.SSS A'))))));\n};\n\nvar down = \"downImg~RiQoMJyo.svg\";\nvar spinner = \"spinner~RjSDsBsa.svg\";\nconst entriesAtom = atom({\n  key: \"entriesAtom\",\n  default: []\n});\nvar WsConnectionStatus;\n\n(function (WsConnectionStatus) {\n  WsConnectionStatus[WsConnectionStatus[\"Closed\"] = 0] = \"Closed\";\n  WsConnectionStatus[WsConnectionStatus[\"Connected\"] = 1] = \"Connected\";\n})(WsConnectionStatus || (WsConnectionStatus = {}));\n\nconst TrafficViewerApiAtom = atom({\n  key: \"trafficViewerApi\",\n  default: {}\n});\n\nconst EntriesList = _ref9 => {\n  let {\n    listEntryREF,\n    onSnapBrokenEvent,\n    isSnappedToBottom,\n    setIsSnappedToBottom,\n    queriedCurrent,\n    setQueriedCurrent,\n    queriedTotal,\n    setQueriedTotal,\n    startTime,\n    noMoreDataTop,\n    setNoMoreDataTop,\n    leftOffTop,\n    setLeftOffTop,\n    openWebSocket,\n    leftOffBottom,\n    truncatedTimestamp,\n    setTruncatedTimestamp,\n    scrollableRef\n  } = _ref9;\n\n  var _scrollableRef$curren, _scrollableRef$curren2;\n\n  const [entries, setEntries] = useRecoilState(entriesAtom);\n  const wsConnection = useRecoilValue(wsConnectionAtom);\n  const query = useRecoilValue(queryAtom);\n  const isWsConnectionClosed = wsConnection === WsConnectionStatus.Closed;\n  const trafficViewerApi = useRecoilValue(TrafficViewerApiAtom);\n  const [loadMoreTop, setLoadMoreTop] = useState(false);\n  const [isLoadingTop, setIsLoadingTop] = useState(false);\n  const [closeWsConnection, setCloseWsConnection] = useRecoilState(closeWsConnectionCallbackAtom);\n  useEffect(() => {\n    const list = document.getElementById('list').firstElementChild;\n    list.addEventListener('scroll', e => {\n      const el = e.target;\n\n      if (el.scrollTop === 0) {\n        setLoadMoreTop(true);\n      } else {\n        setNoMoreDataTop(false);\n        setLoadMoreTop(false);\n      }\n    });\n  }, [setLoadMoreTop, setNoMoreDataTop]);\n  const memoizedEntries = useMemo(() => {\n    return entries;\n  }, [entries]);\n  const getOldEntries = useCallback(async () => {\n    setLoadMoreTop(false);\n\n    if (leftOffTop === null || leftOffTop <= 0) {\n      return;\n    }\n\n    setIsLoadingTop(true);\n    debugger;\n    const data = await trafficViewerApi.fetchEntries(leftOffTop, -1, query, 100, 3000);\n\n    if (!data || data.data === null || data.meta === null) {\n      setNoMoreDataTop(true);\n      setIsLoadingTop(false);\n      return;\n    }\n\n    setLeftOffTop(data.meta.leftOff);\n    let scrollTo;\n\n    if (data.meta.leftOff === 0) {\n      setNoMoreDataTop(true);\n      scrollTo = false;\n    } else {\n      scrollTo = true;\n    }\n\n    setIsLoadingTop(false);\n    const newEntries = [...data.data.reverse(), ...entries];\n    setEntries(newEntries);\n    setQueriedCurrent(queriedCurrent + data.meta.current);\n    setQueriedTotal(data.meta.total);\n    setTruncatedTimestamp(data.meta.truncatedTimestamp);\n\n    if (scrollTo) {\n      scrollableRef.current.scrollToIndex(data.data.length - 1);\n    }\n  }, [setLoadMoreTop, setIsLoadingTop, entries, setEntries, query, setNoMoreDataTop, leftOffTop, setLeftOffTop, queriedCurrent, setQueriedCurrent, setQueriedTotal, setTruncatedTimestamp, scrollableRef]);\n  useEffect(() => {\n    if (!isWsConnectionClosed || !loadMoreTop || noMoreDataTop) return;\n    getOldEntries();\n  }, [loadMoreTop, noMoreDataTop, getOldEntries, isWsConnectionClosed]);\n  const scrollbarVisible = ((_scrollableRef$curren = scrollableRef.current) === null || _scrollableRef$curren === void 0 ? void 0 : _scrollableRef$curren.childWrapperRef.current.clientHeight) > ((_scrollableRef$curren2 = scrollableRef.current) === null || _scrollableRef$curren2 === void 0 ? void 0 : _scrollableRef$curren2.wrapperRef.current.clientHeight);\n  return React__default.createElement(React__default.Fragment, null, React__default.createElement(\"div\", {\n    className: styles$1.list\n  }, React__default.createElement(\"div\", {\n    id: \"list\",\n    ref: listEntryREF,\n    className: styles$1.list\n  }, isLoadingTop && React__default.createElement(\"div\", {\n    className: styles$1.spinnerContainer\n  }, React__default.createElement(\"img\", {\n    alt: \"spinner\",\n    src: spinner,\n    style: {\n      height: 25\n    }\n  })), noMoreDataTop && React__default.createElement(\"div\", {\n    id: \"noMoreDataTop\",\n    className: styles$1.noMoreDataAvailable\n  }, \"No more data available\"), React__default.createElement(ScrollableFeedVirtualized, {\n    ref: scrollableRef,\n    itemHeight: 48,\n    marginTop: 10,\n    onSnapBroken: onSnapBrokenEvent\n  }, false, memoizedEntries.map(entry => React__default.createElement(EntryItem, {\n    key: `entry-${entry.id}`,\n    entry: entry,\n    style: {},\n    headingMode: false\n  }))), React__default.createElement(\"button\", {\n    type: \"button\",\n    title: \"Fetch old records\",\n    className: `${styles$1.btnOld} ${!scrollbarVisible && leftOffTop > 0 ? styles$1.showButton : styles$1.hideButton}`,\n    onClick: _ => {\n      closeWsConnection();\n      getOldEntries();\n    }\n  }, React__default.createElement(\"img\", {\n    alt: \"down\",\n    src: down\n  })), React__default.createElement(\"button\", {\n    type: \"button\",\n    title: \"Snap to bottom\",\n    className: `${styles$1.btnLive} ${isSnappedToBottom && !isWsConnectionClosed ? styles$1.hideButton : styles$1.showButton}`,\n    onClick: _ => {\n      if (isWsConnectionClosed) {\n        if (query) {\n          openWebSocket(`(${query}) and leftOff(${leftOffBottom})`, false);\n        } else {\n          openWebSocket(`leftOff(${leftOffBottom})`, false);\n        }\n      }\n\n      scrollableRef.current.jumpToBottom();\n      setIsSnappedToBottom(true);\n    }\n  }, React__default.createElement(\"img\", {\n    alt: \"down\",\n    src: down\n  }))), React__default.createElement(\"div\", {\n    className: styles$1.footer\n  }, React__default.createElement(\"div\", null, \"Displaying \", React__default.createElement(\"b\", {\n    id: \"entries-length\"\n  }, entries === null || entries === void 0 ? void 0 : entries.length), \" results out of \", React__default.createElement(\"b\", {\n    id: \"total-entries\"\n  }, queriedTotal), \" total\"), startTime !== 0 && React__default.createElement(\"div\", null, \"Started listening at \", React__default.createElement(\"span\", {\n    style: {\n      marginRight: 5,\n      fontWeight: 600,\n      fontSize: 13\n    }\n  }, Moment(truncatedTimestamp ? truncatedTimestamp : startTime).utc().format('MM/DD/YYYY, h:mm:ss.SSS A'))))));\n};\n\nvar TrafficViwerStyles = {\n  \"mainBackgroundColor\": \"white\",\n  \"headerBackgroundColor\": \"#F7F9FC\",\n  \"fontColor\": \"#0C0B1A\",\n  \"secondaryFontColor\": \"rgba(0, 0, 0, 0.5)\",\n  \"blueColor\": \"#205CF5\",\n  \"lightBlueColor\": \"#BCCEFD\",\n  \"successColor\": \"#27AE60\",\n  \"failureColor\": \"#EB5757\",\n  \"blueGray\": \"#494677\",\n  \"lightGray\": \"#8F9BB2\",\n  \"TrafficPage\": \"_TrafficViewer-module__TrafficPage__2iJRc\",\n  \"TrafficPageHeader\": \"_TrafficViewer-module__TrafficPageHeader__1ozU5\",\n  \"TrafficPageStreamStatus\": \"_TrafficViewer-module__TrafficPageStreamStatus__16baK\",\n  \"TrafficPageHeaderImage\": \"_TrafficViewer-module__TrafficPageHeaderImage__1aHaf\",\n  \"TrafficPageHeaderText\": \"_TrafficViewer-module__TrafficPageHeaderText__3syIR\",\n  \"TrafficPageHeaderActions\": \"_TrafficViewer-module__TrafficPageHeaderActions__29_nE\",\n  \"TrafficPageHeaderActionsImage\": \"_TrafficViewer-module__TrafficPageHeaderActionsImage__-VX8B\",\n  \"TrafficPageViewer\": \"_TrafficViewer-module__TrafficPageViewer__5hmYn\",\n  \"TrafficContent\": \"_TrafficViewer-module__TrafficContent__1CnKE\",\n  \"TrafficPageContainer\": \"_TrafficViewer-module__TrafficPageContainer__2Spig\",\n  \"TrafficPageListContainer\": \"_TrafficViewer-module__TrafficPageListContainer__2dgJN\",\n  \"TrafficPageDetailContainer\": \"_TrafficViewer-module__TrafficPageDetailContainer__1aIp_\",\n  \"indicatorContainer\": \"_TrafficViewer-module__indicatorContainer__3dDE3\",\n  \"indicator\": \"_TrafficViewer-module__indicator__1j4un\",\n  \"greenIndicatorContainer\": \"_TrafficViewer-module__greenIndicatorContainer__2F8Bp\",\n  \"greenIndicator\": \"_TrafficViewer-module__greenIndicator__1iDzL\",\n  \"orangeIndicatorContainer\": \"_TrafficViewer-module__orangeIndicatorContainer__3oeSA\",\n  \"orangeIndicator\": \"_TrafficViewer-module__orangeIndicator__3XnXZ\",\n  \"redIndicatorContainer\": \"_TrafficViewer-module__redIndicatorContainer__2r720\",\n  \"redIndicator\": \"_TrafficViewer-module__redIndicator__2DSyW\",\n  \"connectionText\": \"_TrafficViewer-module__connectionText__Wywit\",\n  \"playPauseIcon\": \"_TrafficViewer-module__playPauseIcon__IAc7l\"\n};\nvar styles$6 = {\n  \"mainBackgroundColor\": \"white\",\n  \"headerBackgroundColor\": \"#F7F9FC\",\n  \"fontColor\": \"#0C0B1A\",\n  \"secondaryFontColor\": \"rgba(0, 0, 0, 0.5)\",\n  \"blueColor\": \"#205CF5\",\n  \"lightBlueColor\": \"#BCCEFD\",\n  \"successColor\": \"#27AE60\",\n  \"failureColor\": \"#EB5757\",\n  \"blueGray\": \"#494677\",\n  \"lightGray\": \"#8F9BB2\",\n  \"Entry\": \"_EntryViewer-module__Entry__23PXK\",\n  \"header\": \"_EntryViewer-module__header__3fjPY\",\n  \"description\": \"_EntryViewer-module__description__3GUMF\",\n  \"method\": \"_EntryViewer-module__method__2C02h\",\n  \"timing\": \"_EntryViewer-module__timing__239nR\",\n  \"headerClickable\": \"_EntryViewer-module__headerClickable__1TCj2\",\n  \"body\": \"_EntryViewer-module__body__3PbSR\",\n  \"bodyHeader\": \"_EntryViewer-module__bodyHeader__3m9WW\",\n  \"endpointURL\": \"_EntryViewer-module__endpointURL__2Fb4k\"\n};\nconst styles$7 = {\n  default: {\n    maxWidth: 300\n  },\n  wide: {\n    maxWidth: 700\n  },\n  fit: {\n    maxWidth: '100%'\n  }\n};\nconst useStyles = makeStyles(theme => styles$7);\n\nconst Tooltip = props => {\n  const {\n    isSimple,\n    ..._props\n  } = props;\n  const classes = useStyles(props.variant);\n  const variant = props.variant || 'default';\n  const backgroundClass = isSimple ? \"\" : \"noBackground\";\n  return React__default.createElement(Tooltip$1, Object.assign({\n    classes: {\n      tooltip: `${backgroundClass} ` + classes[variant]\n    },\n    interactive: true,\n    enterDelay: 200,\n    TransitionComponent: Fade\n  }, _props), props.children || React__default.createElement(\"div\", null));\n};\n\nconst useTabsStyles = makeStyles$1(theme => createStyles({\n  root: {\n    height: 40,\n    paddingTop: 15\n  },\n  tab: {\n    display: 'inline-block',\n    textTransform: 'uppercase',\n    color: variables.blueColor,\n    cursor: 'pointer'\n  },\n  tabsAlignLeft: {\n    textAlign: 'left'\n  },\n  active: {\n    fontWeight: 400,\n    color: variables.fontColor,\n    cursor: 'unset',\n    borderBottom: \"2px solid \" + variables.fontColor,\n    paddingBottom: 6,\n    \"&.dark\": {\n      color: theme.palette.common.black,\n      borderBottom: \"2px solid \" + theme.palette.common.black\n    }\n  },\n  disabled: {\n    color: theme.palette.primary.dark,\n    cursor: 'unset'\n  },\n  highlight: {\n    color: theme.palette.primary.light\n  },\n  separator: {\n    borderRight: \"1px solid \" + theme.palette.primary.dark,\n    height: 20,\n    verticalAlign: 'middle',\n    margin: '0 20px',\n    cursor: 'unset'\n  }\n}));\n\nconst Tabs = _ref10 => {\n  let {\n    classes: _classes2 = {},\n    tabs,\n    currentTab,\n    color,\n    onChange,\n    leftAligned,\n    dark\n  } = _ref10;\n  const _classes = { ...useTabsStyles(),\n    ..._classes2\n  };\n  return React__default.createElement(\"div\", {\n    className: `${_classes.root} ${leftAligned ? _classes.tabsAlignLeft : ''}`\n  }, tabs.map((_ref11, index) => {\n    let {\n      tab,\n      disabled,\n      disabledMessage,\n      highlight,\n      badge\n    } = _ref11;\n    const active = currentTab === tab;\n    const tabLink = React__default.createElement(\"span\", {\n      key: tab,\n      className: `${_classes.tab} ${active ? _classes.active : ''} ${disabled ? _classes.disabled : ''} ${highlight ? _classes.highlight : ''} ${dark ? 'dark' : ''}`,\n      onClick: () => !disabled && onChange(tab),\n      style: {\n        color: color\n      }\n    }, tab, React__default.isValidElement(badge) && badge);\n    return React__default.createElement(\"span\", {\n      key: tab\n    }, disabled && disabledMessage ? React__default.createElement(Tooltip, {\n      title: disabledMessage,\n      isSimple: true\n    }, tabLink) : tabLink, index < tabs.length - 1 && React__default.createElement(\"span\", {\n      className: _classes.tab + ' ' + _classes.separator,\n      key: tab + '_sepparator'\n    }));\n  }));\n};\n\nvar styles$8 = {\n  \"mainBackgroundColor\": \"white\",\n  \"headerBackgroundColor\": \"#F7F9FC\",\n  \"fontColor\": \"#0C0B1A\",\n  \"secondaryFontColor\": \"rgba(0, 0, 0, 0.5)\",\n  \"blueColor\": \"#205CF5\",\n  \"lightBlueColor\": \"#BCCEFD\",\n  \"successColor\": \"#27AE60\",\n  \"failureColor\": \"#EB5757\",\n  \"blueGray\": \"#494677\",\n  \"lightGray\": \"#8F9BB2\",\n  \"title\": \"_EntrySections-module__title__3twI5\",\n  \"button\": \"_EntrySections-module__button__31axW\",\n  \"expanded\": \"_EntrySections-module__expanded__AqJnh\",\n  \"dataLine\": \"_EntrySections-module__dataLine__3F39a\",\n  \"dataKey\": \"_EntrySections-module__dataKey__3D_j8\",\n  \"rulesTitleSuccess\": \"_EntrySections-module__rulesTitleSuccess__FV3CW\",\n  \"rulesMatchedSuccess\": \"_EntrySections-module__rulesMatchedSuccess__3J0dt\",\n  \"rulesMatchedFailure\": \"_EntrySections-module__rulesMatchedFailure__7FHF7\",\n  \"dataValue\": \"_EntrySections-module__dataValue__32q7z\",\n  \"collapsibleContainer\": \"_EntrySections-module__collapsibleContainer__33qCl\",\n  \"noRules\": \"_EntrySections-module__noRules__NF9Wn\"\n};\nvar collapsedImg = \"collapsed~jQCycvry.svg\";\nvar expandedImg = \"expanded~EPlOjOeT.svg\";\nvar styles$9 = {\n  \"CollapsibleContainerHeader\": \"_CollapsibleContainer-module__CollapsibleContainerHeader__BhHxF\",\n  \"CollapsibleContainerHeaderSticky\": \"_CollapsibleContainer-module__CollapsibleContainerHeaderSticky__2QC3u\",\n  \"CollapsibleContainerBigger\": \"_CollapsibleContainer-module__CollapsibleContainerBigger__3hWtn\",\n  \"CollapsibleContainerExpandCollapseButton\": \"_CollapsibleContainer-module__CollapsibleContainerExpandCollapseButton__Ns-TU\",\n  \"CollapsibleContainerExpanded\": \"_CollapsibleContainer-module__CollapsibleContainerExpanded__2FxH-\",\n  \"CollapsibleContainerTitle\": \"_CollapsibleContainer-module__CollapsibleContainerTitle__29sFR\",\n  \"CollapsibleContainerCollapsed\": \"_CollapsibleContainer-module__CollapsibleContainerCollapsed__b6OUz\"\n};\n\nconst CollapsibleContainer = _ref12 => {\n  let {\n    title,\n    children,\n    expanded,\n    titleClassName,\n    className,\n    stickyHeader: _stickyHeader = false\n  } = _ref12;\n  const classNames = `${styles$9.CollapsibleContainer} ${expanded ? `${styles$9.CollapsibleContainerExpanded}` : `${styles$9.CollapsibleContainerCollapsed}`} ${className ? className : ''}`;\n  const content = React__default.createElement(React__default.Fragment, null, React__default.createElement(\"div\", {\n    className: `${styles$9.CollapsibleContainerHeader} ${_stickyHeader ? `${styles$9.CollapsibleContainerHeaderSticky}` : \"\"}\n                      ${expanded ? `${styles$9.CollapsibleContainerHeaderExpanded}` : \"\"}`\n  }, React__default.isValidElement(title) ? React__default.createElement(React__default.Fragment, null, title) : React__default.createElement(React__default.Fragment, null, React__default.createElement(\"div\", {\n    className: `${styles$9.CollapsibleContainerTitle} ${titleClassName ? titleClassName : ''}`\n  }, title), React__default.createElement(\"img\", {\n    className: styles$9.CollapsibleContainerExpandCollapseButton,\n    src: expanded ? expandedImg : collapsedImg,\n    alt: \"Expand/Collapse Button\"\n  }))), expanded ? children : null);\n  return _stickyHeader ? content : React__default.createElement(\"div\", {\n    className: classNames\n  }, content);\n};\n\nvar duplicateImg = \"duplicate~belDmfOt.svg\";\nvar styles$a = {\n  \"FancyTextDisplayContainer\": \"_FancyTextDisplay-module__FancyTextDisplayContainer__3Q3kb\",\n  \"displayIconOnMouseOver\": \"_FancyTextDisplay-module__displayIconOnMouseOver__3_6Ss\",\n  \"FancyTextDisplayIcon\": \"_FancyTextDisplay-module__FancyTextDisplayIcon__30YSL\",\n  \"FancyTextDisplayContainerEllipsis\": \"_FancyTextDisplay-module__FancyTextDisplayContainerEllipsis__38WfO\",\n  \"FancyTextDisplayText\": \"_FancyTextDisplay-module__FancyTextDisplayText__10gdA\",\n  \"FancyTextDisplayCopyNotifier\": \"_FancyTextDisplay-module__FancyTextDisplayCopyNotifier__2KHpn\"\n};\n\nconst FancyTextDisplay = _ref13 => {\n  let {\n    text,\n    className,\n    isPossibleToCopy: _isPossibleToCopy = true,\n    applyTextEllipsis: _applyTextEllipsis = true,\n    flipped: _flipped = false,\n    useTooltip: _useTooltip = false,\n    displayIconOnMouseOver: _displayIconOnMouseOver = false,\n    buttonOnly: _buttonOnly = false\n  } = _ref13;\n  const [showCopiedNotification, setCopied] = useState(false);\n  const [showTooltip, setShowTooltip] = useState(false);\n  text = String(text);\n\n  const onCopy = () => {\n    setCopied(true);\n  };\n\n  useEffect(() => {\n    let timer;\n\n    if (showCopiedNotification) {\n      timer = setTimeout(() => {\n        setCopied(false);\n      }, 1000);\n    }\n\n    return () => clearTimeout(timer);\n  }, [showCopiedNotification]);\n  const textElement = React__default.createElement(\"span\", {\n    className: styles$a.FancyTextDisplayText\n  }, text);\n  const copyButton = _isPossibleToCopy && text ? React__default.createElement(CopyToClipboard, {\n    text: text,\n    onCopy: onCopy\n  }, React__default.createElement(\"span\", {\n    className: styles$a.FancyTextDisplayIcon,\n    title: `Copy \"${text}\" value to clipboard`\n  }, React__default.createElement(\"img\", {\n    src: duplicateImg,\n    alt: \"Duplicate full value\"\n  }), showCopiedNotification && React__default.createElement(\"span\", {\n    className: styles$a.FancyTextDisplayCopyNotifier\n  }, \"Copied\"))) : null;\n  return React__default.createElement(\"p\", {\n    className: `${styles$a.FancyTextDisplayContainer} ${className ? className : ''} ${_displayIconOnMouseOver ? ` ${styles$a.displayIconOnMouseOver} ` : ''} ${_applyTextEllipsis ? ` ${styles$a.FancyTextDisplayContainerEllipsis} ` : ''}`,\n    title: text,\n    onMouseOver: e => setShowTooltip(true),\n    onMouseLeave: e => setShowTooltip(false)\n  }, !_buttonOnly && _flipped && textElement, copyButton, !_buttonOnly && !_flipped && textElement, _useTooltip && showTooltip && React__default.createElement(\"span\", {\n    className: styles$a.FancyTextDisplayCopyNotifier\n  }, text));\n};\n\nconst Checkbox = _ref14 => {\n  let {\n    checked,\n    onToggle\n  } = _ref14;\n  return React__default.createElement(\"div\", null, React__default.createElement(\"input\", {\n    style: {\n      cursor: \"pointer\"\n    },\n    type: \"checkbox\",\n    checked: checked,\n    onChange: event => onToggle(event.target.checked)\n  }));\n};\n\nconst EntryViewLine = _ref15 => {\n  let {\n    label,\n    value,\n    selector: _selector = \"\",\n    overrideQueryValue: _overrideQueryValue = \"\",\n    displayIconOnMouseOver: _displayIconOnMouseOver = true,\n    useTooltip: _useTooltip = true\n  } = _ref15;\n  let query;\n\n  if (!_selector) {\n    query = \"\";\n  } else if (_overrideQueryValue) {\n    query = `${_selector} == ${_overrideQueryValue}`;\n  } else if (typeof value == \"string\") {\n    query = `${_selector} == \"${JSON.stringify(value).slice(1, -1)}\"`;\n  } else {\n    query = `${_selector} == ${value}`;\n  }\n\n  return label && React__default.createElement(\"tr\", {\n    className: styles$8.dataLine\n  }, React__default.createElement(\"td\", {\n    className: `${styles$8.dataKey}`\n  }, React__default.createElement(Queryable, {\n    query: query,\n    style: {\n      float: \"right\",\n      height: \"18px\"\n    },\n    iconStyle: {\n      marginRight: \"20px\"\n    },\n    flipped: true,\n    useTooltip: _useTooltip,\n    displayIconOnMouseOver: _displayIconOnMouseOver\n  }, label)), React__default.createElement(\"td\", null, React__default.createElement(FancyTextDisplay, {\n    className: styles$8.dataValue,\n    text: value,\n    applyTextEllipsis: false,\n    flipped: true,\n    displayIconOnMouseOver: true\n  }))) || null;\n};\n\nconst EntrySectionCollapsibleTitle = _ref16 => {\n  let {\n    title,\n    color,\n    expanded,\n    setExpanded,\n    query: _query = \"\"\n  } = _ref16;\n  return React__default.createElement(\"div\", {\n    className: styles$8.title\n  }, React__default.createElement(\"div\", {\n    className: `${styles$8.button} ${expanded ? styles$8.expanded : ''}`,\n    style: {\n      backgroundColor: color\n    },\n    onClick: () => {\n      setExpanded(!expanded);\n    }\n  }, expanded ? '-' : '+'), React__default.createElement(Queryable, {\n    query: _query,\n    useTooltip: !!_query,\n    displayIconOnMouseOver: !!_query\n  }, React__default.createElement(\"span\", null, title)));\n};\n\nconst EntrySectionContainer = _ref17 => {\n  let {\n    title,\n    color,\n    children,\n    query: _query2 = \"\"\n  } = _ref17;\n  const [expanded, setExpanded] = useState(true);\n  return React__default.createElement(CollapsibleContainer, {\n    className: styles$8.collapsibleContainer,\n    expanded: expanded,\n    title: React__default.createElement(EntrySectionCollapsibleTitle, {\n      title: title,\n      color: color,\n      expanded: expanded,\n      setExpanded: setExpanded,\n      query: _query2\n    })\n  }, children);\n};\n\nconst EntryBodySection = _ref18 => {\n  let {\n    title,\n    color,\n    content,\n    encoding,\n    contentType,\n    selector\n  } = _ref18;\n  const MAXIMUM_BYTES_TO_FORMAT = 1000000;\n  const jsonLikeFormats = ['json', 'yaml', 'yml'];\n  const xmlLikeFormats = ['xml', 'html'];\n  const protobufFormats = ['application/grpc'];\n  const supportedFormats = jsonLikeFormats.concat(xmlLikeFormats, protobufFormats);\n  const [isPretty, setIsPretty] = useState(true);\n  const [showLineNumbers, setShowLineNumbers] = useState(true);\n  const [decodeBase64, setDecodeBase64] = useState(true);\n  const isBase64Encoding = encoding === 'base64';\n  const supportsPrettying = supportedFormats.some(format => (contentType === null || contentType === void 0 ? void 0 : contentType.indexOf(format)) > -1);\n\n  const formatTextBody = body => {\n    if (!decodeBase64) return body;\n    const chunk = body.slice(0, MAXIMUM_BYTES_TO_FORMAT);\n    const bodyBuf = isBase64Encoding ? atob(chunk) : chunk;\n\n    try {\n      if (jsonLikeFormats.some(format => (contentType === null || contentType === void 0 ? void 0 : contentType.indexOf(format)) > -1)) {\n        if (!isPretty) return bodyBuf;\n        return jsonBeautify(JSON.parse(bodyBuf), null, 2, 80);\n      } else if (xmlLikeFormats.some(format => (contentType === null || contentType === void 0 ? void 0 : contentType.indexOf(format)) > -1)) {\n        if (!isPretty) return bodyBuf;\n        return xmlBeautify(bodyBuf, {\n          indentation: '  ',\n          filter: node => node.type !== 'Comment',\n          collapseContent: true,\n          lineSeparator: '\\n'\n        });\n      } else if (protobufFormats.some(format => (contentType === null || contentType === void 0 ? void 0 : contentType.indexOf(format)) > -1)) {\n        const protobufDecoder = new ProtobufDecoder(bodyBuf, true);\n        const protobufDecoded = protobufDecoder.decode().toSimple();\n        if (!isPretty) return JSON.stringify(protobufDecoded);\n        return jsonBeautify(protobufDecoded, null, 2, 80);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n\n    return bodyBuf;\n  };\n\n  return React__default.createElement(React__default.Fragment, null, content && (content === null || content === void 0 ? void 0 : content.length) > 0 && React__default.createElement(EntrySectionContainer, {\n    title: title,\n    color: color,\n    query: `${selector} == r\".*\"`\n  }, React__default.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      alignContent: 'center',\n      margin: \"5px 0\"\n    }\n  }, supportsPrettying && React__default.createElement(\"div\", {\n    style: {\n      paddingTop: 3\n    }\n  }, React__default.createElement(Checkbox, {\n    checked: isPretty,\n    onToggle: () => {\n      setIsPretty(!isPretty);\n    }\n  })), supportsPrettying && React__default.createElement(\"span\", {\n    style: {\n      marginLeft: '.2rem'\n    }\n  }, \"Pretty\"), React__default.createElement(\"div\", {\n    style: {\n      paddingTop: 3,\n      paddingLeft: supportsPrettying ? 20 : 0\n    }\n  }, React__default.createElement(Checkbox, {\n    checked: showLineNumbers,\n    onToggle: () => {\n      setShowLineNumbers(!showLineNumbers);\n    }\n  })), React__default.createElement(\"span\", {\n    style: {\n      marginLeft: '.2rem'\n    }\n  }, \"Line numbers\"), isBase64Encoding && React__default.createElement(\"div\", {\n    style: {\n      paddingTop: 3,\n      paddingLeft: 20\n    }\n  }, React__default.createElement(Checkbox, {\n    checked: decodeBase64,\n    onToggle: () => {\n      setDecodeBase64(!decodeBase64);\n    }\n  })), isBase64Encoding && React__default.createElement(\"span\", {\n    style: {\n      marginLeft: '.2rem'\n    }\n  }, \"Decode Base64\")), React__default.createElement(SyntaxHighlighter, {\n    code: formatTextBody(content),\n    showLineNumbers: showLineNumbers\n  })));\n};\n\nconst EntryTableSection = _ref19 => {\n  let {\n    title,\n    color,\n    arrayToIterate\n  } = _ref19;\n  let arrayToIterateSorted;\n\n  if (arrayToIterate) {\n    arrayToIterateSorted = arrayToIterate.sort((a, b) => {\n      if (a.name > b.name) {\n        return 1;\n      }\n\n      if (a.name < b.name) {\n        return -1;\n      }\n\n      return 0;\n    });\n  }\n\n  return React__default.createElement(React__default.Fragment, null, arrayToIterate && arrayToIterate.length > 0 ? React__default.createElement(EntrySectionContainer, {\n    title: title,\n    color: color\n  }, React__default.createElement(\"table\", null, React__default.createElement(\"tbody\", {\n    id: `tbody-${title}`\n  }, arrayToIterateSorted.map((_ref20, index) => {\n    let {\n      name,\n      value,\n      selector\n    } = _ref20;\n    return React__default.createElement(EntryViewLine, {\n      key: index,\n      label: name,\n      value: value,\n      selector: selector\n    });\n  })))) : React__default.createElement(\"span\", null));\n};\n\nconst EntryPolicySectionCollapsibleTitle = _ref21 => {\n  let {\n    label,\n    matched,\n    expanded,\n    setExpanded\n  } = _ref21;\n  return React__default.createElement(\"div\", {\n    className: styles$8.title\n  }, React__default.createElement(\"span\", {\n    className: `${styles$8.button}\n            ${expanded ? styles$8.expanded : ''}`,\n    onClick: () => {\n      setExpanded(!expanded);\n    }\n  }, expanded ? '-' : '+'), React__default.createElement(\"span\", null, React__default.createElement(\"tr\", {\n    className: styles$8.dataLine\n  }, React__default.createElement(\"td\", {\n    className: `${styles$8.dataKey} ${styles$8.rulesTitleSuccess}`\n  }, label), React__default.createElement(\"td\", {\n    className: `${styles$8.dataKey} ${matched === 'Success' ? styles$8.rulesMatchedSuccess : styles$8.rulesMatchedFailure}`\n  }, matched))));\n};\n\nconst EntryPolicySectionContainer = _ref22 => {\n  let {\n    label,\n    matched,\n    children\n  } = _ref22;\n  const [expanded, setExpanded] = useState(false);\n  return React__default.createElement(CollapsibleContainer, {\n    className: styles$8.collapsibleContainer,\n    expanded: expanded,\n    title: React__default.createElement(EntryPolicySectionCollapsibleTitle, {\n      label: label,\n      matched: matched,\n      expanded: expanded,\n      setExpanded: setExpanded\n    })\n  }, children);\n};\n\nconst EntryTablePolicySection = _ref23 => {\n  let {\n    title,\n    color,\n    latency,\n    arrayToIterate\n  } = _ref23;\n  return React__default.createElement(React__default.Fragment, null, arrayToIterate && arrayToIterate.length > 0 ? React__default.createElement(React__default.Fragment, null, React__default.createElement(EntrySectionContainer, {\n    title: title,\n    color: color\n  }, React__default.createElement(\"table\", null, React__default.createElement(\"tbody\", null, arrayToIterate.map((_ref24, index) => {\n    let {\n      rule,\n      matched\n    } = _ref24;\n    return React__default.createElement(EntryPolicySectionContainer, {\n      key: index,\n      label: rule.Name,\n      matched: matched && (rule.Type === 'slo' ? rule.ResponseTime >= latency : true) ? \"Success\" : \"Failure\"\n    }, React__default.createElement(React__default.Fragment, null, rule.Key && React__default.createElement(\"tr\", {\n      className: styles$8.dataValue\n    }, React__default.createElement(\"td\", null, React__default.createElement(\"b\", null, \"Key:\")), \" \", React__default.createElement(\"td\", null, rule.Key)), rule.ResponseTime !== 0 && React__default.createElement(\"tr\", {\n      className: styles$8.dataValue\n    }, React__default.createElement(\"td\", null, React__default.createElement(\"b\", null, \"Response Time:\")), \" \", React__default.createElement(\"td\", null, rule.ResponseTime)), rule.Method && React__default.createElement(\"tr\", {\n      className: styles$8.dataValue\n    }, React__default.createElement(\"td\", null, React__default.createElement(\"b\", null, \"Method:\")), \" \", React__default.createElement(\"td\", null, rule.Method)), rule.Path && React__default.createElement(\"tr\", {\n      className: styles$8.dataValue\n    }, React__default.createElement(\"td\", null, React__default.createElement(\"b\", null, \"Path:\")), \" \", React__default.createElement(\"td\", null, rule.Path)), rule.Service && React__default.createElement(\"tr\", {\n      className: styles$8.dataValue\n    }, React__default.createElement(\"td\", null, React__default.createElement(\"b\", null, \"Service:\")), \" \", React__default.createElement(\"td\", null, rule.Service)), rule.Type && React__default.createElement(\"tr\", {\n      className: styles$8.dataValue\n    }, React__default.createElement(\"td\", null, React__default.createElement(\"b\", null, \"Type:\")), \" \", React__default.createElement(\"td\", null, rule.Type)), rule.Value && React__default.createElement(\"tr\", {\n      className: styles$8.dataValue\n    }, React__default.createElement(\"td\", null, React__default.createElement(\"b\", null, \"Value:\")), \" \", React__default.createElement(\"td\", null, rule.Value))));\n  }))))) : React__default.createElement(\"span\", {\n    className: styles$8.noRules\n  }, \"No rules could be applied to this request.\"));\n};\n\nconst EntryContractSection = _ref25 => {\n  let {\n    color,\n    requestReason,\n    responseReason,\n    contractContent\n  } = _ref25;\n  return React__default.createElement(React__default.Fragment, null, requestReason && React__default.createElement(EntrySectionContainer, {\n    title: \"Request\",\n    color: color\n  }, requestReason), responseReason && React__default.createElement(EntrySectionContainer, {\n    title: \"Response\",\n    color: color\n  }, responseReason), contractContent && React__default.createElement(EntrySectionContainer, {\n    title: \"Contract\",\n    color: color\n  }, React__default.createElement(SyntaxHighlighter, {\n    code: contractContent,\n    language: \"yaml\"\n  })));\n};\n\nvar SectionTypes;\n\n(function (SectionTypes) {\n  SectionTypes[\"SectionTable\"] = \"table\";\n  SectionTypes[\"SectionBody\"] = \"body\";\n})(SectionTypes || (SectionTypes = {}));\n\nconst SectionsRepresentation = _ref26 => {\n  let {\n    data,\n    color\n  } = _ref26;\n  const sections = [];\n\n  if (data) {\n    for (const [i, row] of data.entries()) {\n      switch (row.type) {\n        case SectionTypes.SectionTable:\n          sections.push(React__default.createElement(EntryTableSection, {\n            key: i,\n            title: row.title,\n            color: color,\n            arrayToIterate: JSON.parse(row.data)\n          }));\n          break;\n\n        case SectionTypes.SectionBody:\n          sections.push(React__default.createElement(EntryBodySection, {\n            key: i,\n            title: row.title,\n            color: color,\n            content: row.data,\n            encoding: row.encoding,\n            contentType: row.mimeType,\n            selector: row.selector\n          }));\n          break;\n      }\n    }\n  }\n\n  return React__default.createElement(React__default.Fragment, null, sections);\n};\n\nconst AutoRepresentation = _ref27 => {\n  let {\n    representation,\n    isRulesEnabled,\n    rulesMatched,\n    contractStatus,\n    requestReason,\n    responseReason,\n    contractContent,\n    elapsedTime,\n    color\n  } = _ref27;\n  var TABS = [{\n    tab: 'Request'\n  }];\n  const [currentTab, setCurrentTab] = useState(TABS[0].tab);\n\n  if (!representation) {\n    return React__default.createElement(React__default.Fragment, null);\n  }\n\n  const {\n    request,\n    response\n  } = JSON.parse(representation);\n  let responseTabIndex = 0;\n  let rulesTabIndex = 0;\n  let contractTabIndex = 0;\n\n  if (response) {\n    TABS.push({\n      tab: 'Response'\n    });\n    responseTabIndex = TABS.length - 1;\n  }\n\n  if (isRulesEnabled) {\n    TABS.push({\n      tab: 'Rules'\n    });\n    rulesTabIndex = TABS.length - 1;\n  }\n\n  if (contractStatus !== 0 && contractContent) {\n    TABS.push({\n      tab: 'Contract'\n    });\n    contractTabIndex = TABS.length - 1;\n  }\n\n  return React__default.createElement(\"div\", {\n    className: styles$6.Entry\n  }, React__default.createElement(\"div\", {\n    className: styles$6.body\n  }, React__default.createElement(\"div\", {\n    className: styles$6.bodyHeader\n  }, React__default.createElement(Tabs, {\n    tabs: TABS,\n    currentTab: currentTab,\n    color: color,\n    onChange: setCurrentTab,\n    leftAligned: true\n  })), currentTab === TABS[0].tab && React__default.createElement(React__default.Fragment, null, React__default.createElement(SectionsRepresentation, {\n    data: request,\n    color: color\n  })), response && currentTab === TABS[responseTabIndex].tab && React__default.createElement(React__default.Fragment, null, React__default.createElement(SectionsRepresentation, {\n    data: response,\n    color: color\n  })), isRulesEnabled && currentTab === TABS[rulesTabIndex].tab && React__default.createElement(React__default.Fragment, null, React__default.createElement(EntryTablePolicySection, {\n    title: 'Rule',\n    color: color,\n    latency: elapsedTime,\n    arrayToIterate: rulesMatched ? rulesMatched : []\n  })), contractStatus !== 0 && contractContent && currentTab === TABS[contractTabIndex].tab && React__default.createElement(React__default.Fragment, null, React__default.createElement(EntryContractSection, {\n    color: color,\n    requestReason: requestReason,\n    responseReason: responseReason,\n    contractContent: contractContent\n  }))));\n};\n\nconst EntryViewer = _ref28 => {\n  let {\n    representation,\n    isRulesEnabled,\n    rulesMatched,\n    contractStatus,\n    requestReason,\n    responseReason,\n    contractContent,\n    elapsedTime,\n    color\n  } = _ref28;\n  return React__default.createElement(AutoRepresentation, {\n    representation: representation,\n    isRulesEnabled: isRulesEnabled,\n    rulesMatched: rulesMatched,\n    contractStatus: contractStatus,\n    requestReason: requestReason,\n    responseReason: responseReason,\n    contractContent: contractContent,\n    elapsedTime: elapsedTime,\n    color: color\n  });\n};\n\nconst useStyles$1 = makeStyles(() => ({\n  entryTitle: {\n    display: 'flex',\n    minHeight: 20,\n    maxHeight: 46,\n    alignItems: 'center',\n    marginBottom: 4,\n    marginLeft: 6,\n    padding: 2,\n    paddingBottom: 0\n  },\n  entrySummary: {\n    display: 'flex',\n    minHeight: 36,\n    maxHeight: 46,\n    alignItems: 'center',\n    marginBottom: 4,\n    padding: 5,\n    paddingBottom: 0\n  }\n}));\n\nconst formatSize = n => n > 1000 ? `${Math.round(n / 1000)}KB` : `${n} B`;\n\nconst EntryTitle = _ref29 => {\n  let {\n    protocol,\n    data,\n    bodySize,\n    elapsedTime\n  } = _ref29;\n  const classes = useStyles$1();\n  const response = data.response;\n  return React__default.createElement(\"div\", {\n    className: classes.entryTitle\n  }, React__default.createElement(Protocol, {\n    protocol: protocol,\n    horizontal: true\n  }), React__default.createElement(\"div\", {\n    style: {\n      right: \"30px\",\n      position: \"absolute\",\n      display: \"flex\"\n    }\n  }, response && React__default.createElement(Queryable, {\n    query: `response.bodySize == ${bodySize}`,\n    style: {\n      margin: \"0 18px\"\n    },\n    displayIconOnMouseOver: true\n  }, React__default.createElement(\"div\", {\n    style: {\n      opacity: 0.5\n    },\n    id: \"entryDetailedTitleBodySize\"\n  }, formatSize(bodySize))), response && React__default.createElement(Queryable, {\n    query: `elapsedTime >= ${elapsedTime}`,\n    style: {\n      marginRight: 18\n    },\n    displayIconOnMouseOver: true\n  }, React__default.createElement(\"div\", {\n    style: {\n      opacity: 0.5\n    },\n    id: \"entryDetailedTitleElapsedTime\"\n  }, Math.round(elapsedTime), \"ms\"))));\n};\n\nconst EntrySummary = _ref30 => {\n  let {\n    entry\n  } = _ref30;\n  return React__default.createElement(EntryItem, {\n    key: `entry-${entry.id}`,\n    entry: entry,\n    style: {},\n    headingMode: true\n  });\n};\n\nconst EntryDetailed = () => {\n  const focusedEntryId = useRecoilValue(focusedEntryIdAtom);\n  const trafficViewerApi = useRecoilValue(TrafficViewerApiAtom);\n  const [entryData, setEntryData] = useState(null);\n  useEffect(() => {\n    if (!focusedEntryId) return;\n    setEntryData(null);\n\n    (async () => {\n      try {\n        const entryData = await trafficViewerApi.getEntry(focusedEntryId);\n        setEntryData(entryData);\n      } catch (error) {\n        var _error$response, _error$response$data;\n\n        if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.type) {\n          toast[error.response.data.type](`Entry[${focusedEntryId}]: ${error.response.data.msg}`, {\n            position: \"bottom-right\",\n            theme: \"colored\",\n            autoClose: error.response.data.autoClose,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined\n          });\n        }\n\n        console.error(error);\n      }\n    })();\n  }, [focusedEntryId]);\n  return React__default.createElement(React__default.Fragment, null, entryData && React__default.createElement(EntryTitle, {\n    protocol: entryData.protocol,\n    data: entryData.data,\n    bodySize: entryData.bodySize,\n    elapsedTime: entryData.data.elapsedTime\n  }), entryData && React__default.createElement(EntrySummary, {\n    entry: entryData.data\n  }), React__default.createElement(React__default.Fragment, null, entryData && React__default.createElement(EntryViewer, {\n    representation: entryData.representation,\n    isRulesEnabled: entryData.isRulesEnabled,\n    rulesMatched: entryData.rulesMatched,\n    contractStatus: entryData.data.contractStatus,\n    requestReason: entryData.data.contractRequestReason,\n    responseReason: entryData.data.contractResponseReason,\n    contractContent: entryData.data.contractContent,\n    elapsedTime: entryData.data.elapsedTime,\n    color: entryData.protocol.backgroundColor\n  })));\n};\n\nvar playIcon = \"run~HQBkkOVV.svg\";\nvar pauseIcon = \"pause~bnWETGzB.svg\";\nvar style = {\n  \"mainBackgroundColor\": \"white\",\n  \"headerBackgroundColor\": \"#F7F9FC\",\n  \"fontColor\": \"#0C0B1A\",\n  \"secondaryFontColor\": \"rgba(0, 0, 0, 0.5)\",\n  \"blueColor\": \"#205CF5\",\n  \"lightBlueColor\": \"#BCCEFD\",\n  \"successColor\": \"#27AE60\",\n  \"failureColor\": \"#EB5757\",\n  \"blueGray\": \"#494677\",\n  \"lightGray\": \"#8F9BB2\",\n  \"statusBar\": \"_StatusBar-module__statusBar__1rfCV\",\n  \"podsCount\": \"_StatusBar-module__podsCount__2sH6K\",\n  \"expandedStatusBar\": \"_StatusBar-module__expandedStatusBar__13zi6\"\n};\nvar warningIcon = \"warning_icon~biNkjgls.svg\";\nvar failIcon = \"failed~UgUtqrYv.svg\";\nvar successIcon = \"success~SJqhqGpJ.svg\";\nconst tappingStatusAtom = atom({\n  key: \"tappingStatusAtom\",\n  default: null\n});\nconst tappingStatusDetails = selector({\n  key: 'tappingStatusDetails',\n  get: _ref31 => {\n    let {\n      get\n    } = _ref31;\n    const tappingStatus = get(tappingStatusAtom);\n    const uniqueNamespaces = Array.from(new Set(tappingStatus.map(pod => pod.namespace)));\n    const amountOfPods = tappingStatus.length;\n    const amountOfTappedPods = tappingStatus.filter(pod => pod.isTapped).length;\n    const amountOfUntappedPods = amountOfPods - amountOfTappedPods;\n    return {\n      uniqueNamespaces,\n      amountOfPods,\n      amountOfTappedPods,\n      amountOfUntappedPods\n    };\n  }\n});\n\nconst pluralize = (noun, amount) => {\n  return `${noun}${amount !== 1 ? 's' : ''}`;\n};\n\nconst StatusBar = () => {\n  const tappingStatus = useRecoilValue(tappingStatusAtom);\n  const [expandedBar, setExpandedBar] = useState(false);\n  const {\n    uniqueNamespaces,\n    amountOfPods,\n    amountOfTappedPods,\n    amountOfUntappedPods\n  } = useRecoilValue(tappingStatusDetails);\n  return React__default.createElement(\"div\", {\n    className: `${style.statusBar} + ${expandedBar ? ' expandedStatusBar' : \"\"}`,\n    onMouseOver: () => setExpandedBar(true),\n    onMouseLeave: () => setExpandedBar(false)\n  }, React__default.createElement(\"div\", {\n    className: style.podsCount\n  }, (tappingStatus === null || tappingStatus === void 0 ? void 0 : tappingStatus.some(pod => !pod.isTapped)) && React__default.createElement(\"img\", {\n    src: warningIcon,\n    alt: \"warning\"\n  }), `Tapping ${amountOfUntappedPods > 0 ? amountOfTappedPods + \" / \" + amountOfPods : amountOfPods} ${pluralize('pod', amountOfPods)} in ${pluralize('namespace', uniqueNamespaces.length)} ${uniqueNamespaces.join(\", \")}`), expandedBar && React__default.createElement(\"div\", {\n    style: {\n      marginTop: 20\n    }\n  }, React__default.createElement(\"table\", null, React__default.createElement(\"thead\", null, React__default.createElement(\"tr\", null, React__default.createElement(\"th\", {\n    style: {\n      width: \"40%\"\n    }\n  }, \"Pod name\"), React__default.createElement(\"th\", {\n    style: {\n      width: \"40%\"\n    }\n  }, \"Namespace\"), React__default.createElement(\"th\", {\n    style: {\n      width: \"20%\",\n      textAlign: \"center\"\n    }\n  }, \"Tapping\"))), React__default.createElement(\"tbody\", null, tappingStatus.map(pod => React__default.createElement(\"tr\", {\n    key: pod.name\n  }, React__default.createElement(\"td\", {\n    style: {\n      width: \"40%\"\n    }\n  }, pod.name), React__default.createElement(\"td\", {\n    style: {\n      width: \"40%\"\n    }\n  }, pod.namespace), React__default.createElement(\"td\", {\n    style: {\n      width: \"20%\",\n      textAlign: \"center\"\n    }\n  }, React__default.createElement(\"img\", {\n    style: {\n      height: 20\n    },\n    alt: \"status\",\n    src: pod.isTapped ? successIcon : failIcon\n  }))))))));\n};\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\n\n\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nvar isObject_1 = isObject;\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n/** Detect free variable `global` from Node.js. */\n\nvar freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\nvar _freeGlobal = freeGlobal;\n/** Detect free variable `self`. */\n\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n/** Used as a reference to the global object. */\n\nvar root = _freeGlobal || freeSelf || Function('return this')();\nvar _root = root;\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\n\nvar now = function () {\n  return _root.Date.now();\n};\n\nvar now_1 = now;\n/** Used to match a single whitespace character. */\n\nvar reWhitespace = /\\s/;\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\n\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n\n  return index;\n}\n\nvar _trimmedEndIndex = trimmedEndIndex;\n/** Used to match leading whitespace. */\n\nvar reTrimStart = /^\\s+/;\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\n\nfunction baseTrim(string) {\n  return string ? string.slice(0, _trimmedEndIndex(string) + 1).replace(reTrimStart, '') : string;\n}\n\nvar _baseTrim = baseTrim;\n/** Built-in value references. */\n\nvar Symbol = _root.Symbol;\nvar _Symbol = Symbol;\n/** Used for built-in method references. */\n\nvar objectProto = Object.prototype;\n/** Used to check objects for own properties. */\n\nvar hasOwnProperty = objectProto.hasOwnProperty;\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar nativeObjectToString = objectProto.toString;\n/** Built-in value references. */\n\nvar symToStringTag = _Symbol ? _Symbol.toStringTag : undefined;\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\n\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n\n  return result;\n}\n\nvar _getRawTag = getRawTag;\n/** Used for built-in method references. */\n\nvar objectProto$1 = Object.prototype;\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar nativeObjectToString$1 = objectProto$1.toString;\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\n\nfunction objectToString(value) {\n  return nativeObjectToString$1.call(value);\n}\n\nvar _objectToString = objectToString;\n/** `Object#toString` result references. */\n\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n/** Built-in value references. */\n\nvar symToStringTag$1 = _Symbol ? _Symbol.toStringTag : undefined;\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\n\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n\n  return symToStringTag$1 && symToStringTag$1 in Object(value) ? _getRawTag(value) : _objectToString(value);\n}\n\nvar _baseGetTag = baseGetTag;\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\n\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nvar isObjectLike_1 = isObjectLike;\n/** `Object#toString` result references. */\n\nvar symbolTag = '[object Symbol]';\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\n\nfunction isSymbol(value) {\n  return typeof value == 'symbol' || isObjectLike_1(value) && _baseGetTag(value) == symbolTag;\n}\n\nvar isSymbol_1 = isSymbol;\n/** Used as references for various `Number` constants. */\n\nvar NAN = 0 / 0;\n/** Used to detect bad signed hexadecimal string values. */\n\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n/** Used to detect binary string values. */\n\nvar reIsBinary = /^0b[01]+$/i;\n/** Used to detect octal string values. */\n\nvar reIsOctal = /^0o[0-7]+$/i;\n/** Built-in method references without a dependency on `root`. */\n\nvar freeParseInt = parseInt;\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\n\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n\n  if (isSymbol_1(value)) {\n    return NAN;\n  }\n\n  if (isObject_1(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject_1(other) ? other + '' : other;\n  }\n\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n\n  value = _baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n}\n\nvar toNumber_1 = toNumber;\n/** Error message constants. */\n\nvar FUNC_ERROR_TEXT = 'Expected a function';\n/* Built-in method references for those with the same name as other `lodash` methods. */\n\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\n\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  wait = toNumber_1(wait) || 0;\n\n  if (isObject_1(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber_1(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time; // Start the timer for the trailing edge.\n\n    timerId = setTimeout(timerExpired, wait); // Invoke the leading edge.\n\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n    return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime; // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n\n    return lastCallTime === undefined || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n  }\n\n  function timerExpired() {\n    var time = now_1();\n\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    } // Restart the timer.\n\n\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined; // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now_1());\n  }\n\n  function debounced() {\n    var time = now_1(),\n        isInvoking = shouldInvoke(time);\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n\n    return result;\n  }\n\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nvar debounce_1 = debounce;\n\nconst TLSWarning = _ref32 => {\n  let {\n    showTLSWarning,\n    setShowTLSWarning,\n    addressesWithTLS,\n    setAddressesWithTLS,\n    userDismissedTLSWarning,\n    setUserDismissedTLSWarning\n  } = _ref32;\n  const trafficViewerApi = useRecoilValue(TrafficViewerApiAtom);\n  useEffect(() => {\n    (async () => {\n      try {\n        const recentTLSLinks = await (trafficViewerApi === null || trafficViewerApi === void 0 ? void 0 : trafficViewerApi.getRecentTLSLinks());\n\n        if ((recentTLSLinks === null || recentTLSLinks === void 0 ? void 0 : recentTLSLinks.length) > 0) {\n          setAddressesWithTLS(new Set(recentTLSLinks));\n          setShowTLSWarning(true);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    })();\n  }, [setShowTLSWarning, setAddressesWithTLS]);\n  return React__default.createElement(Snackbar, {\n    open: showTLSWarning && !userDismissedTLSWarning\n  }, React__default.createElement(MuiAlert, {\n    classes: {\n      filledWarning: 'customWarningStyle'\n    },\n    elevation: 6,\n    variant: \"filled\",\n    onClose: () => setUserDismissedTLSWarning(true),\n    severity: \"warning\"\n  }, \"Mizu is detecting TLS traffic, this type of traffic will not be displayed.\", addressesWithTLS.size > 0 && React__default.createElement(\"ul\", {\n    className: \"httpsDomains\"\n  }, \" \", Array.from(addressesWithTLS, address => React__default.createElement(\"li\", null, address)), \" \")));\n};\n\nconst useLayoutStyles = makeStyles(() => ({\n  details: {\n    flex: \"0 0 50%\",\n    width: \"45vw\",\n    padding: \"12px 24px\",\n    borderRadius: 4,\n    marginTop: 15,\n    background: variables.headerBackgroundColor\n  },\n  viewer: {\n    display: \"flex\",\n    overflowY: \"auto\",\n    height: \"calc(100% - 70px)\",\n    padding: 5,\n    paddingBottom: 0,\n    overflow: \"auto\"\n  }\n}));\n\nconst TrafficViewer = _ref33 => {\n  let {\n    setAnalyzeStatus,\n    message,\n    error,\n    isOpen,\n    closeWs,\n    sendQuery,\n    openSocket,\n    trafficViewerApiProp\n  } = _ref33;\n  const classes = useLayoutStyles();\n  const [tappingStatus, setTappingStatus] = useRecoilState(tappingStatusAtom);\n  const [entries, setEntries] = useRecoilState(entriesAtom);\n  const [focusedEntryId, setFocusedEntryId] = useRecoilState(focusedEntryIdAtom);\n  const [wsConnection, setWsConnection] = useRecoilState(wsConnectionAtom);\n  const setCloseWsCallback = useSetRecoilState(closeWsConnectionCallbackAtom);\n  const query = useRecoilValue(queryAtom);\n  const [queryToSend, setQueryToSend] = useState(\"\");\n  const [trafficViewerApiState, setTrafficViewerApiState] = useRecoilState(TrafficViewerApiAtom);\n  const [noMoreDataTop, setNoMoreDataTop] = useState(false);\n  const [isSnappedToBottom, setIsSnappedToBottom] = useState(true);\n  const [queryBackgroundColor, setQueryBackgroundColor] = useState(\"#f5f5f5\");\n  const [queriedCurrent, setQueriedCurrent] = useState(0);\n  const [queriedTotal, setQueriedTotal] = useState(0);\n  const [leftOffBottom, setLeftOffBottom] = useState(0);\n  const [leftOffTop, setLeftOffTop] = useState(null);\n  const [truncatedTimestamp, setTruncatedTimestamp] = useState(0);\n  const [startTime, setStartTime] = useState(0);\n  const scrollableRef = useRef(null);\n  const [showTLSWarning, setShowTLSWarning] = useState(false);\n  const [userDismissedTLSWarning, setUserDismissedTLSWarning] = useState(false);\n  const [addressesWithTLS, setAddressesWithTLS] = useState(new Set());\n  const handleQueryChange = useMemo(() => debounce_1(async query => {\n    if (!query) {\n      setQueryBackgroundColor(\"#f5f5f5\");\n    } else {\n      const data = await trafficViewerApiProp.validateQuery(query);\n\n      if (!data) {\n        return;\n      }\n\n      if (data.valid) {\n        setQueryBackgroundColor(\"#d2fad2\");\n      } else {\n        setQueryBackgroundColor(\"#fad6dc\");\n      }\n    }\n  }, 500), []);\n  useEffect(() => {\n    handleQueryChange(query);\n  }, [query, handleQueryChange]);\n  const listEntry = useRef(null);\n\n  const openWebSocket = (query, resetEntries) => {\n    if (resetEntries) {\n      setFocusedEntryId(null);\n      setEntries([]);\n      setQueriedCurrent(0);\n      setLeftOffTop(null);\n      setNoMoreDataTop(false);\n    }\n\n    setQueryToSend(query);\n    openSocket();\n  };\n\n  const onmessage = useCallback(e => {\n    if (!(e !== null && e !== void 0 && e.data)) return;\n    const message = JSON.parse(e.data);\n\n    switch (message.messageType) {\n      case \"entry\":\n        const entry = message.data;\n        if (!focusedEntryId) setFocusedEntryId(entry.id.toString());\n        const newEntries = [...entries, entry];\n\n        if (newEntries.length === 10001) {\n          setLeftOffTop(newEntries[0].entry.id);\n          newEntries.shift();\n          setNoMoreDataTop(false);\n        }\n\n        setEntries(newEntries);\n        break;\n\n      case \"status\":\n        setTappingStatus(message.tappingStatus);\n        break;\n\n      case \"analyzeStatus\":\n        setAnalyzeStatus(message.analyzeStatus);\n        break;\n\n      case \"outboundLink\":\n        onTLSDetected(message.Data.DstIP);\n        break;\n\n      case \"toast\":\n        toast[message.data.type](message.data.text, {\n          position: \"bottom-right\",\n          theme: \"colored\",\n          autoClose: message.data.autoClose,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n        break;\n\n      case \"queryMetadata\":\n        setQueriedCurrent(queriedCurrent + message.data.current);\n        setQueriedTotal(message.data.total);\n        setLeftOffBottom(message.data.leftOff);\n        setTruncatedTimestamp(message.data.truncatedTimestamp);\n\n        if (leftOffTop === null) {\n          setLeftOffTop(message.data.leftOff - 1);\n        }\n\n        break;\n\n      case \"startTime\":\n        setStartTime(message.data);\n        break;\n\n      default:\n        console.error(`unsupported websocket message type, Got: ${message.messageType}`);\n    }\n  }, [message]);\n  useEffect(() => {\n    onmessage(message);\n  }, [message, onmessage]);\n  useEffect(() => {\n    isOpen ? setWsConnection(WsConnectionStatus.Connected) : setWsConnection(WsConnectionStatus.Closed);\n    sendQuery(queryToSend);\n  }, [isOpen, queryToSend, sendQuery, setWsConnection]);\n  useEffect(() => {\n    (async () => {\n      setTrafficViewerApiState(trafficViewerApiProp);\n      openWebSocket(\"leftOff(-1)\", true);\n\n      try {\n        const tapStatusResponse = await trafficViewerApiProp.tapStatus();\n        setTappingStatus(tapStatusResponse);\n\n        if (setAnalyzeStatus) {\n          const analyzeStatusResponse = await trafficViewerApiProp.analyzeStatus();\n          setAnalyzeStatus(analyzeStatusResponse);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    })();\n  }, []);\n\n  const closeCallback = () => {\n    wsConnection === WsConnectionStatus.Connected && closeWs();\n  };\n\n  setCloseWsCallback({\n    closeCallback: closeCallback\n  });\n\n  const toggleConnection = () => {\n    if (wsConnection === WsConnectionStatus.Closed) {\n      if (query) {\n        openWebSocket(`(${query}) and leftOff(-1)`, true);\n      } else {\n        openWebSocket(`leftOff(-1)`, true);\n      }\n\n      scrollableRef.current.jumpToBottom();\n      setIsSnappedToBottom(true);\n    } else if (wsConnection === WsConnectionStatus.Connected) {\n      closeWs();\n      setWsConnection(WsConnectionStatus.Closed);\n    }\n  };\n\n  const onTLSDetected = destAddress => {\n    addressesWithTLS.add(destAddress);\n    setAddressesWithTLS(new Set(addressesWithTLS));\n\n    if (!userDismissedTLSWarning) {\n      setShowTLSWarning(true);\n    }\n  };\n\n  const getConnectionIndicator = () => {\n    switch (wsConnection) {\n      case WsConnectionStatus.Connected:\n        return React__default.createElement(\"div\", {\n          className: `${TrafficViwerStyles.indicatorContainer} ${TrafficViwerStyles.greenIndicatorContainer}`\n        }, React__default.createElement(\"div\", {\n          className: `${TrafficViwerStyles.indicator} ${TrafficViwerStyles.greenIndicator}`\n        }));\n\n      default:\n        return React__default.createElement(\"div\", {\n          className: `${TrafficViwerStyles.indicatorContainer} ${TrafficViwerStyles.redIndicatorContainer}`\n        }, React__default.createElement(\"div\", {\n          className: `${TrafficViwerStyles.indicator} ${TrafficViwerStyles.redIndicator}`\n        }));\n    }\n  };\n\n  const getConnectionTitle = () => {\n    switch (wsConnection) {\n      case WsConnectionStatus.Connected:\n        return \"streaming live traffic\";\n\n      default:\n        return \"streaming paused\";\n    }\n  };\n\n  const onSnapBrokenEvent = () => {\n    setIsSnappedToBottom(false);\n\n    if (wsConnection === WsConnectionStatus.Connected) {\n      closeWs();\n    }\n  };\n\n  return React__default.createElement(\"div\", {\n    className: TrafficViwerStyles.TrafficPage\n  }, React__default.createElement(\"div\", {\n    className: TrafficViwerStyles.TrafficPageHeader\n  }, React__default.createElement(\"div\", {\n    className: TrafficViwerStyles.TrafficPageStreamStatus\n  }, React__default.createElement(\"img\", {\n    className: TrafficViwerStyles.playPauseIcon,\n    style: {\n      visibility: wsConnection === WsConnectionStatus.Connected ? \"visible\" : \"hidden\"\n    },\n    alt: \"pause\",\n    src: pauseIcon,\n    onClick: toggleConnection\n  }), React__default.createElement(\"img\", {\n    className: TrafficViwerStyles.playPauseIcon,\n    style: {\n      position: \"absolute\",\n      visibility: wsConnection === WsConnectionStatus.Connected ? \"hidden\" : \"visible\"\n    },\n    alt: \"play\",\n    src: playIcon,\n    onClick: toggleConnection\n  }), React__default.createElement(\"div\", {\n    className: TrafficViwerStyles.connectionText\n  }, getConnectionTitle(), getConnectionIndicator()))), React__default.createElement(\"div\", {\n    className: TrafficViwerStyles.TrafficPageContainer\n  }, React__default.createElement(\"div\", {\n    className: TrafficViwerStyles.TrafficPageListContainer\n  }, React__default.createElement(Filters, {\n    backgroundColor: queryBackgroundColor,\n    openWebSocket: openWebSocket\n  }), React__default.createElement(\"div\", {\n    className: styles$1.container\n  }, React__default.createElement(EntriesList, {\n    listEntryREF: listEntry,\n    onSnapBrokenEvent: onSnapBrokenEvent,\n    isSnappedToBottom: isSnappedToBottom,\n    setIsSnappedToBottom: setIsSnappedToBottom,\n    queriedCurrent: queriedCurrent,\n    setQueriedCurrent: setQueriedCurrent,\n    queriedTotal: queriedTotal,\n    setQueriedTotal: setQueriedTotal,\n    startTime: startTime,\n    noMoreDataTop: noMoreDataTop,\n    setNoMoreDataTop: setNoMoreDataTop,\n    leftOffTop: leftOffTop,\n    setLeftOffTop: setLeftOffTop,\n    openWebSocket: openWebSocket,\n    leftOffBottom: leftOffBottom,\n    truncatedTimestamp: truncatedTimestamp,\n    setTruncatedTimestamp: setTruncatedTimestamp,\n    scrollableRef: scrollableRef\n  }))), React__default.createElement(\"div\", {\n    className: classes.details,\n    id: \"rightSideContainer\"\n  }, focusedEntryId && React__default.createElement(EntryDetailed, null))), tappingStatus && React__default.createElement(StatusBar, null), React__default.createElement(TLSWarning, {\n    showTLSWarning: showTLSWarning,\n    setShowTLSWarning: setShowTLSWarning,\n    addressesWithTLS: addressesWithTLS,\n    setAddressesWithTLS: setAddressesWithTLS,\n    userDismissedTLSWarning: userDismissedTLSWarning,\n    setUserDismissedTLSWarning: setUserDismissedTLSWarning\n  }));\n};\n\nconst MemoiedTrafficViwer = React__default.memo(TrafficViewer);\n\nconst TrafficViewerContainer = _ref34 => {\n  let {\n    setAnalyzeStatus,\n    message,\n    isOpen,\n    closeWs,\n    sendQuery,\n    openSocket,\n    trafficViewerApiProp\n  } = _ref34;\n  return React__default.createElement(RecoilRoot, null, React__default.createElement(MemoiedTrafficViwer, {\n    message: message,\n    isOpen: isOpen,\n    closeWs: closeWs,\n    sendQuery: sendQuery,\n    openSocket: openSocket,\n    trafficViewerApiProp: trafficViewerApiProp,\n    setAnalyzeStatus: setAnalyzeStatus\n  }));\n};\n\nvar style$1 = {\n  \"loadingOverlayContainer\": \"_LoadingOverlay-module__loadingOverlayContainer__3eijD\",\n  \"loadingOverlaySpinner\": \"_LoadingOverlay-module__loadingOverlaySpinner__bGElx\",\n  \"rotation\": \"_LoadingOverlay-module__rotation__1jTYC\"\n};\nconst SpinnerShowDelayMs = 350;\n\nconst LoadingOverlay = _ref35 => {\n  let {\n    delay\n  } = _ref35;\n  const [isVisible, setIsVisible] = useState(false);\n  useEffect(() => {\n    let isRelevant = true;\n    setTimeout(() => {\n      if (isRelevant) setIsVisible(true);\n    }, delay || SpinnerShowDelayMs);\n    return () => isRelevant = false;\n  }, [delay]);\n  return React__default.createElement(\"div\", {\n    className: style$1.loadingOverlayContainer,\n    hidden: !isVisible\n  }, React__default.createElement(\"div\", {\n    className: style$1.loadingOverlaySpinner\n  }));\n};\n\nexport default TrafficViewerContainer;\nexport { LoadingOverlay };","map":{"version":3,"mappings":"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","names":["Lowlight","registerLanguage","python","xml","json","yaml","protobuf","javascript","actionscript","wasm","handlebars","SyntaxHighlighter","code","showLineNumbers","language","markers","split","map","item","i","line","className","React","style","fontSize","value","queryAtom","atom","key","default","useKeyPress","eventConfigs","callback","node","callbackRef","useRef","useLayoutEffect","current","handleKeyPress","useCallback","event","some","eventConfig","Object","keys","every","nameKey","stopPropagation","preventDefault","useEffect","targetNode","document","addEventListener","removeEventListener","dictionary","ctrlEnter","metaKey","ctrlKey","enter","wsConnectionAtom","closeWsConnectionCallbackAtom","Filters","backgroundColor","openWebSocket","styles","container","QueryForm","modalStyle","position","top","left","transform","width","bgcolor","borderRadius","boxShadow","outline","p","color","formRef","query","setQuery","useRecoilState","closeWsConnectionObj","useRecoilValue","openModal","setOpenModal","useState","handleOpenModal","handleCloseModal","handleChange","e","target","trim","handleSubmit","closeCallback","shortcutsKeyboard","Fragment","ref","onSubmit","Grid","spacing","xs","maxHeight","overflowY","CodeEditor","placeholder","onChange","padding","fontFamily","Button","type","variant","margin","variables","blueColor","fontWeight","textTransform","title","minWidth","onClick","MenuBookIcon","Modal","open","onClose","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","overflow","Fade","in","Box","sx","Typography","id","component","textAlign","Divider","divider1","orientation","flexItem","src","filterUIExample1","alt","filterUIExample2","divider2","fontStyle","href","Queryable","iconStyle","useTooltip","displayIconOnMouseOver","flipped","children","showAddedNotification","setAdded","showTooltip","setShowTooltip","queryState","onCopy","timer","setTimeout","clearTimeout","addButton","CopyToClipboard","text","QueryableStyle","QueryableIcon","AddCircleIcon","QueryableAddNotifier","QueryableContainer","onMouseOver","onMouseLeave","QueryableTooltip","StatusCodeClassification","StatusCode","statusCode","classification","getClassification","marginTop","paddingLeft","base","NEUTRAL","SUCCESS","FAILURE","Protocol","protocol","horizontal","macro","rel","referenceLink","foregroundColor","abbr","longName","marginRight","zIndex","vertical","Summary","method","summary","miscStyles","whiteSpace","right","focusedEntryIdAtom","EntryItem","entry","headingMode","focusedEntryId","setFocusedEntryId","isSelected","toString","status","numberOfRules","rules","ingoingIcon","outgoingIcon","ingoingIconSuccess","outgoingIconSuccess","ingoingIconFailure","outgoingIconFailure","ingoingIconNeutral","outgoingIconNeutral","additionalRulesProperties","ruleSuccess","rule","latency","ruleSuccessRow","ruleFailureRow","ruleSuccessRowSelected","ruleFailureRowSelected","contractEnabled","contractText","contractStatus","isStatusCodeEnabled","proto","name","endpointServiceContainer","row","rowSelected","border","resolvedName","SwapHorizIcon","marginLeft","dst","ruleNumberText","ruleNumberTextSuccess","ruleNumberTextFailure","separatorRight","separatorLeft","ip","tcpInfo","port","isOutgoing","timestamp","Moment","_Moment","utc","format","_Moment2","entriesAtom","WsConnectionStatus","TrafficViewerApiAtom","EntriesList","listEntryREF","onSnapBrokenEvent","isSnappedToBottom","setIsSnappedToBottom","queriedCurrent","setQueriedCurrent","queriedTotal","setQueriedTotal","startTime","noMoreDataTop","setNoMoreDataTop","leftOffTop","setLeftOffTop","leftOffBottom","truncatedTimestamp","setTruncatedTimestamp","scrollableRef","entries","setEntries","wsConnection","isWsConnectionClosed","Closed","trafficViewerApi","loadMoreTop","setLoadMoreTop","isLoadingTop","setIsLoadingTop","closeWsConnection","setCloseWsConnection","list","getElementById","firstElementChild","el","scrollTop","memoizedEntries","useMemo","getOldEntries","data","fetchEntries","meta","leftOff","scrollTo","newEntries","reverse","total","scrollToIndex","length","scrollbarVisible","childWrapperRef","clientHeight","_scrollableRef$curren2","wrapperRef","spinnerContainer","spinner","height","noMoreDataAvailable","ScrollableFeedVirtualized","itemHeight","onSnapBroken","btnOld","showButton","hideButton","_","down","btnLive","jumpToBottom","footer","maxWidth","wide","fit","useStyles","makeStyles","theme","Tooltip","props","isSimple","_props","classes","backgroundClass","MUITooltip","tooltip","interactive","enterDelay","TransitionComponent","useTabsStyles","createStyles","root","paddingTop","tab","display","cursor","tabsAlignLeft","active","fontColor","borderBottom","paddingBottom","palette","common","black","disabled","primary","dark","highlight","light","separator","borderRight","verticalAlign","Tabs","tabs","currentTab","leftAligned","_classes","index","disabledMessage","badge","tabLink","isValidElement","CollapsibleContainer","expanded","titleClassName","stickyHeader","classNames","CollapsibleContainerExpanded","CollapsibleContainerCollapsed","content","CollapsibleContainerHeader","CollapsibleContainerHeaderSticky","CollapsibleContainerHeaderExpanded","CollapsibleContainerTitle","CollapsibleContainerExpandCollapseButton","expandedImg","collapsedImg","FancyTextDisplay","isPossibleToCopy","applyTextEllipsis","buttonOnly","showCopiedNotification","setCopied","String","textElement","FancyTextDisplayText","copyButton","FancyTextDisplayIcon","duplicateImg","FancyTextDisplayCopyNotifier","FancyTextDisplayContainer","FancyTextDisplayContainerEllipsis","Checkbox","checked","onToggle","EntryViewLine","label","selector","overrideQueryValue","JSON","stringify","slice","dataLine","dataKey","float","dataValue","EntrySectionCollapsibleTitle","setExpanded","button","EntrySectionContainer","collapsibleContainer","EntryBodySection","encoding","contentType","MAXIMUM_BYTES_TO_FORMAT","jsonLikeFormats","xmlLikeFormats","protobufFormats","supportedFormats","concat","isPretty","setIsPretty","setShowLineNumbers","decodeBase64","setDecodeBase64","isBase64Encoding","supportsPrettying","indexOf","formatTextBody","body","chunk","bodyBuf","atob","jsonBeautify","parse","xmlBeautify","indentation","filter","collapseContent","lineSeparator","protobufDecoder","ProtobufDecoder","protobufDecoded","decode","toSimple","error","console","alignItems","alignContent","EntryTableSection","arrayToIterate","arrayToIterateSorted","sort","a","b","EntryPolicySectionCollapsibleTitle","matched","rulesTitleSuccess","rulesMatchedSuccess","rulesMatchedFailure","EntryPolicySectionContainer","EntryTablePolicySection","Name","Type","ResponseTime","Key","Method","Path","Service","Value","noRules","EntryContractSection","requestReason","responseReason","contractContent","SectionTypes","SectionsRepresentation","sections","SectionTable","push","SectionBody","mimeType","AutoRepresentation","representation","isRulesEnabled","rulesMatched","elapsedTime","TABS","setCurrentTab","request","response","responseTabIndex","rulesTabIndex","contractTabIndex","Entry","bodyHeader","EntryViewer","entryTitle","minHeight","marginBottom","entrySummary","formatSize","n","Math","round","EntryTitle","bodySize","opacity","EntrySummary","EntryDetailed","entryData","setEntryData","getEntry","_error$response","_error$response$data","toast","msg","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","contractRequestReason","contractResponseReason","tappingStatusAtom","tappingStatusDetails","get","tappingStatus","uniqueNamespaces","Array","from","Set","pod","namespace","amountOfPods","amountOfTappedPods","isTapped","amountOfUntappedPods","pluralize","noun","amount","StatusBar","expandedBar","setExpandedBar","statusBar","podsCount","warningIcon","join","successIcon","failIcon","isObject","freeGlobal","global","freeSelf","self","Function","now","Date","reWhitespace","trimmedEndIndex","string","test","charAt","reTrimStart","baseTrim","replace","Symbol","objectProto","prototype","hasOwnProperty","nativeObjectToString","symToStringTag","toStringTag","getRawTag","isOwn","call","tag","unmasked","result","objectToString","nullTag","undefinedTag","baseGetTag","isObjectLike","symbolTag","isSymbol","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","toNumber","other","valueOf","isBinary","FUNC_ERROR_TEXT","nativeMax","max","nativeMin","min","debounce","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","apply","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","flush","debounced","isInvoking","arguments","TLSWarning","showTLSWarning","setShowTLSWarning","addressesWithTLS","setAddressesWithTLS","userDismissedTLSWarning","setUserDismissedTLSWarning","recentTLSLinks","getRecentTLSLinks","Snackbar","MuiAlert","filledWarning","elevation","severity","size","address","useLayoutStyles","details","flex","background","headerBackgroundColor","viewer","TrafficViewer","setAnalyzeStatus","message","isOpen","closeWs","sendQuery","openSocket","trafficViewerApiProp","setTappingStatus","setWsConnection","websocketConnectionAtom","setCloseWsCallback","useSetRecoilState","queryToSend","setQueryToSend","trafficViewerApiState","setTrafficViewerApiState","trafficViewerApiAtom","queryBackgroundColor","setQueryBackgroundColor","setLeftOffBottom","setStartTime","handleQueryChange","validateQuery","valid","listEntry","resetEntries","onmessage","messageType","shift","analyzeStatus","onTLSDetected","Data","DstIP","Connected","tapStatusResponse","tapStatus","analyzeStatusResponse","toggleConnection","destAddress","add","getConnectionIndicator","TrafficViwerStyles","indicatorContainer","greenIndicatorContainer","indicator","greenIndicator","redIndicatorContainer","redIndicator","getConnectionTitle","TrafficPage","TrafficPageHeader","TrafficPageStreamStatus","playPauseIcon","visibility","pauseIcon","playIcon","connectionText","TrafficPageContainer","TrafficPageListContainer","MemoiedTrafficViwer","memo","TrafficViewerContainer","RecoilRoot","SpinnerShowDelayMs","LoadingOverlay","delay","isVisible","setIsVisible","isRelevant","loadingOverlayContainer","hidden","loadingOverlaySpinner"],"sources":["../src/components/UI/SyntaxHighlighter/index.tsx","../src/components/assets/filter-ui-example-1.png","../src/components/assets/filter-ui-example-2.png","../src/recoil/query/atom.ts","../src/hooks/useKeyPress.ts","../src/configs/shortcutsKeyboard.ts","../src/recoil/wsConnection/atom.ts","../src/components/Filters.tsx","../src/components/UI/Queryable.tsx","../src/components/UI/StatusCode.tsx","../src/components/UI/Protocol.tsx","../src/components/UI/Summary.tsx","../src/recoil/focusedEntryId/atom.ts","../src/components/EntryListItem/EntryListItem.tsx","../src/recoil/entries/atom.ts","../src/recoil/wsConnection/index.ts","../src/recoil/TrafficViewerApi/atom.ts","../src/components/EntriesList.tsx","../src/components/UI/Tooltip.tsx","../src/components/UI/Tabs.tsx","../src/components/UI/CollapsibleContainer.tsx","../src/components/UI/FancyTextDisplay.tsx","../src/components/UI/Checkbox.tsx","../src/components/EntryDetailed/EntrySections.tsx","../src/components/EntryDetailed/EntryViewer.tsx","../src/components/EntryDetailed.tsx","../src/recoil/tappingStatus/atom.ts","../src/recoil/tappingStatus/details.ts","../src/components/UI/StatusBar.tsx","../node_modules/lodash/isObject.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/now.js","../node_modules/lodash/_trimmedEndIndex.js","../node_modules/lodash/_baseTrim.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/debounce.js","../src/components/TLSWarning/TLSWarning.tsx","../src/components/TrafficViewer/TrafficViewer.tsx","../src/components/LoadingOverlay.tsx"],"sourcesContent":["import React from 'react';\nimport Lowlight from 'react-lowlight'\nimport 'highlight.js/styles/atom-one-light.css'\nimport './index.scss';\n\nimport xml from 'highlight.js/lib/languages/xml'\nimport json from 'highlight.js/lib/languages/json'\nimport protobuf from 'highlight.js/lib/languages/protobuf'\nimport javascript from 'highlight.js/lib/languages/javascript'\nimport actionscript from 'highlight.js/lib/languages/actionscript'\nimport wasm from 'highlight.js/lib/languages/wasm'\nimport handlebars from 'highlight.js/lib/languages/handlebars'\nimport yaml from 'highlight.js/lib/languages/yaml'\nimport python from 'highlight.js/lib/languages/python'\n\nLowlight.registerLanguage('python', python);\nLowlight.registerLanguage('xml', xml);\nLowlight.registerLanguage('json', json);\nLowlight.registerLanguage('yaml', yaml);\nLowlight.registerLanguage('protobuf', protobuf);\nLowlight.registerLanguage('javascript', javascript);\nLowlight.registerLanguage('actionscript', actionscript);\nLowlight.registerLanguage('wasm', wasm);\nLowlight.registerLanguage('handlebars', handlebars);\n\ninterface Props {\n    code: string;\n    showLineNumbers?: boolean;\n    language?: string;\n}\n\nexport const SyntaxHighlighter: React.FC<Props> = ({\n        code,\n        showLineNumbers = false,\n        language = null\n    }) => {\n    const markers = showLineNumbers ? code.split(\"\\n\").map((item, i) => {\n        return {\n            line: i + 1,\n            className: 'hljs-marker-line'\n        }\n    }) : [];\n\n    return <div style={{fontSize: \".75rem\"}}><Lowlight language={language ? language : \"\"} value={code} markers={markers}/></div>;\n};\n\nexport default SyntaxHighlighter;\n","/* loaded by smart-asset */\nexport default \"filter-ui-example-1~blRIeMjR.png\"","/* loaded by smart-asset */\nexport default \"filter-ui-example-2~TNqHmXhH.png\"","import { atom } from \"recoil\";\n\nconst queryAtom = atom({\n    key: \"queryAtom\",\n    default: \"\"\n});\n\nexport default queryAtom;\n","import { useCallback, useEffect, useLayoutEffect, useRef } from 'react';\n\nconst useKeyPress = (eventConfigs, callback, node = null) => {\n  // implement the callback ref pattern\n  const callbackRef = useRef(callback);\n  useLayoutEffect(() => {\n    callbackRef.current = callback;\n  });\n\n  // handle what happens on key press\n  const handleKeyPress = useCallback(\n    (event) => {\n      \n      // check if one of the key is part of the ones we want\n      if (eventConfigs.some((eventConfig) => Object.keys(eventConfig).every(nameKey => eventConfig[nameKey] === event[nameKey]))) {\n        event.stopPropagation()\n        event.preventDefault();\n        callbackRef.current(event);\n      }\n    },\n    [eventConfigs]\n  );\n\n  useEffect(() => {\n    // target is either the provided node or the document\n    const targetNode = node || document;\n    // attach the event listener\n    targetNode &&\n      targetNode.addEventListener(\"keydown\", handleKeyPress);\n\n    // remove the event listener\n    return () =>\n      targetNode &&\n        targetNode.removeEventListener(\"keydown\", handleKeyPress);\n  }, [handleKeyPress, node]);\n};\n\nexport default useKeyPress;","const dictionary = {\n    ctrlEnter : [{metaKey : true, code:\"Enter\"}, {ctrlKey:true, code:\"Enter\"}], // support Ctrl/command\n    enter : [{code:\"Enter\"}]\n};\n\n\nexport default dictionary;","import { atom } from \"recoil\";\n\nconst wsConnectionAtom = atom({\n    key: \"wsConnectionAtom\",\n    default: 0\n});\n\nexport const closeWsConnectionCallbackAtom = atom({\n    key: \"closeWsConnectionCallbackAtom\",\n    default:  null\n})\n\nexport default wsConnectionAtom;\n","import React, {useRef, useState} from \"react\";\nimport styles from './style/Filters.module.sass';\nimport {Button, Grid, Modal, Box, Typography, Backdrop, Fade, Divider} from \"@material-ui/core\";\nimport CodeEditor from '@uiw/react-textarea-code-editor';\nimport MenuBookIcon from '@material-ui/icons/MenuBook';\nimport {SyntaxHighlighter} from \"./UI/SyntaxHighlighter/index\";\nimport filterUIExample1 from \"./assets/filter-ui-example-1.png\"\nimport filterUIExample2 from \"./assets/filter-ui-example-2.png\"\nimport variables from '../variables.module.scss';\nimport {useRecoilState, useRecoilValue} from \"recoil\";\nimport queryAtom from \"../recoil/query\";\nimport useKeyPress from \"../hooks/useKeyPress\"\nimport shortcutsKeyboard from \"../configs/shortcutsKeyboard\"\nimport { closeWsConnectionCallbackAtom } from \"../recoil/wsConnection/atom\";\n\n\ninterface FiltersProps {\n    backgroundColor: string\n    openWebSocket: (query: string, resetEntries: boolean) => void;\n}\n\nexport const Filters: React.FC<FiltersProps> = ({backgroundColor, openWebSocket}) => {\n    return <div className={styles.container}>\n        <QueryForm\n            backgroundColor={backgroundColor}\n            openWebSocket={openWebSocket}\n        />\n    </div>;\n};\n\ninterface QueryFormProps {\n    backgroundColor: string\n    openWebSocket: (query: string, resetEntries: boolean) => void;\n}\n\nexport const modalStyle = {\n    position: 'absolute',\n    top: '10%',\n    left: '50%',\n    transform: 'translate(-50%, 0%)',\n    width: '80vw',\n    bgcolor: 'background.paper',\n    borderRadius: '5px',\n    boxShadow: 24,\n    outline: \"none\",\n    p: 4,\n    color: '#000',\n};\n\nexport const QueryForm: React.FC<QueryFormProps> = ({backgroundColor, openWebSocket}) => {\n\n    const formRef = useRef<HTMLFormElement>(null);\n    const [query, setQuery] = useRecoilState(queryAtom);\n    const closeWsConnectionObj = useRecoilValue(closeWsConnectionCallbackAtom)\n\n    const [openModal, setOpenModal] = useState(false);\n\n    const handleOpenModal = () => setOpenModal(true);\n    const handleCloseModal = () => setOpenModal(false);\n\n    const handleChange = async (e) => {\n        setQuery(e.target.value.trim());\n    }\n\n    const handleSubmit = (e) => {\n        closeWsConnectionObj.closeCallback()\n        if (query) {\n            openWebSocket(`(${query}) and leftOff(-1)`, true);\n        } else {\n            openWebSocket(`leftOff(-1)`, true);\n        }\n        e.preventDefault();\n    }\n\n    useKeyPress(shortcutsKeyboard.ctrlEnter, handleSubmit, formRef.current);\n\n    return <React.Fragment>\n        <form\n            ref={formRef}\n            onSubmit={handleSubmit}\n            style={{\n                width: '100%',\n            }}\n        >\n            <Grid container spacing={2}>\n                <Grid\n                    item\n                    xs={8}\n                    style={{\n                        maxHeight: '25vh',\n                        overflowY: 'auto',\n                    }}\n                >\n                    <label>\n                        <CodeEditor\n                            value={query}\n                            language=\"py\"\n                            placeholder=\"Mizu Filter Syntax\"\n                            onChange={handleChange}\n                            padding={8}\n                            style={{\n                                fontSize: 14,\n                                backgroundColor: `${backgroundColor}`,\n                                fontFamily: 'ui-monospace,SFMono-Regular,SF Mono,Consolas,Liberation Mono,Menlo,monospace',\n                            }}\n                        />\n                    </label>\n                </Grid>\n                <Grid item xs={4}>\n                    <Button\n                        type=\"submit\"\n                        variant=\"contained\"\n                        style={{\n                            margin: \"2px 0px 0px 0px\",\n                            backgroundColor: variables.blueColor,\n                            fontWeight: 600,\n                            borderRadius: \"4px\",\n                            color: \"#fff\",\n                            textTransform: \"none\",\n                        }}\n                    >\n                        Apply\n                    </Button>\n                    <Button\n                        title=\"Open Filtering Guide (Cheatsheet)\"\n                        variant=\"contained\"\n                        color=\"primary\"\n                        style={{\n                            margin: \"2px 0px 0px 10px\",\n                            minWidth: \"26px\",\n                            backgroundColor: variables.blueColor,\n                            fontWeight: 600,\n                            borderRadius: \"4px\",\n                            color: \"#fff\",\n                            textTransform: \"none\",\n                        }}\n                        onClick={handleOpenModal}\n                    >\n                        <MenuBookIcon fontSize=\"inherit\"></MenuBookIcon>\n                    </Button>\n                </Grid>\n            </Grid>\n        </form>\n\n        <Modal\n            aria-labelledby=\"transition-modal-title\"\n            aria-describedby=\"transition-modal-description\"\n            open={openModal}\n            onClose={handleCloseModal}\n            closeAfterTransition\n            BackdropComponent={Backdrop}\n            BackdropProps={{\n                timeout: 500,\n            }}\n            style={{overflow: 'auto'}}\n        >\n            <Fade in={openModal}>\n                <Box sx={modalStyle}>\n                    <Typography id=\"modal-modal-title\" variant=\"h5\" component=\"h2\" style={{textAlign: 'center'}}>\n                        Filtering Guide (Cheatsheet)\n                    </Typography>\n                    <Typography component={'span'} id=\"modal-modal-description\">\n                        <p>Mizu has a rich filtering syntax that let's you query the results both flexibly and efficiently.</p>\n                        <p>Here are some examples that you can try;</p>\n                    </Typography>\n                    <Grid container>\n                        <Grid item xs style={{margin: \"10px\"}}>\n                            <Typography id=\"modal-modal-description\">\n                                This is a simple query that matches to HTTP packets with request path \"/catalogue\":\n                            </Typography>\n                            <SyntaxHighlighter\n                                showLineNumbers={false}\n                                code={`http and request.path == \"/catalogue\"`}\n                                language=\"python\"\n                            />\n                            <Typography id=\"modal-modal-description\">\n                                The same query can be negated for HTTP path and written like this:\n                            </Typography>\n                            <SyntaxHighlighter\n                                showLineNumbers={false}\n                                code={`http and request.path != \"/catalogue\"`}\n                                language=\"python\"\n                            />\n                            <Typography id=\"modal-modal-description\">\n                                The syntax supports regular expressions. Here is a query that matches the HTTP requests that send JSON to a server:\n                            </Typography>\n                            <SyntaxHighlighter\n                                showLineNumbers={false}\n                                code={`http and request.headers[\"Accept\"] == r\"application/json.*\"`}\n                                language=\"python\"\n                            />\n                            <Typography id=\"modal-modal-description\">\n                                Here is another query that matches HTTP responses with status code 4xx:\n                            </Typography>\n                            <SyntaxHighlighter\n                                showLineNumbers={false}\n                                code={`http and response.status == r\"4.*\"`}\n                                language=\"python\"\n                            />\n                            <Typography id=\"modal-modal-description\">\n                                The same exact query can be as integer comparison:\n                            </Typography>\n                            <SyntaxHighlighter\n                                showLineNumbers={false}\n                                code={`http and response.status >= 400`}\n                                language=\"python\"\n                            />\n                            <Typography id=\"modal-modal-description\">\n                                The results can be queried based on their timestamps:\n                            </Typography>\n                            <SyntaxHighlighter\n                                showLineNumbers={false}\n                                code={`timestamp < datetime(\"10/28/2021, 9:13:02.905 PM\")`}\n                                language=\"python\"\n                            />\n                        </Grid>\n                        <Divider className={styles.divider1} orientation=\"vertical\" flexItem />\n                        <Grid item xs style={{margin: \"10px\"}}>\n                            <Typography id=\"modal-modal-description\">\n                                Since Mizu supports various protocols like gRPC, AMQP, Kafka and Redis. It's possible to write complex queries that match multiple protocols like this:\n                            </Typography>\n                            <SyntaxHighlighter\n                                showLineNumbers={false}\n                                code={`(http and request.method == \"PUT\") or (amqp and request.queue.startsWith(\"test\"))\\n or (kafka and response.payload.errorCode == 2) or (redis and request.key == \"example\")\\n or (grpc and request.headers[\":path\"] == r\".*foo.*\")`}\n                                language=\"python\"\n                            />\n                            <Typography id=\"modal-modal-description\">\n                                By clicking the plus icon that appears beside the queryable UI elements on hovering in both left-pane and right-pane, you can automatically select a field and update the query:\n                            </Typography>\n                            <img\n                                src={filterUIExample1}\n                                width={600}\n                                alt=\"Clicking to UI elements (left-pane)\"\n                                title=\"Clicking to UI elements (left-pane)\"\n                            />\n                            <Typography id=\"modal-modal-description\">\n                                Such that; clicking this icon in left-pane, would append the query below:\n                            </Typography>\n                            <SyntaxHighlighter\n                                showLineNumbers={false}\n                                code={`and dst.name == \"carts.sock-shop\"`}\n                                language=\"python\"\n                            />\n                            <Typography id=\"modal-modal-description\">\n                                Another queriable UI element example, this time from the right-pane:\n                            </Typography>\n                            <img\n                                src={filterUIExample2}\n                                width={300}\n                                alt=\"Clicking to UI elements (right-pane)\"\n                                title=\"Clicking to UI elements (right-pane)\"\n                            />\n                            <Typography id=\"modal-modal-description\">\n                                A query that compares one selector to another is also a valid query:\n                            </Typography>\n                            <SyntaxHighlighter\n                                showLineNumbers={false}\n                                code={`http and (request.query[\"x\"] == response.headers[\"y\"]\\n or response.content.text.contains(request.query[\"x\"]))`}\n                                language=\"python\"\n                            />\n                        </Grid>\n                        <Divider className={styles.divider2} orientation=\"vertical\" flexItem />\n                        <Grid item xs style={{margin: \"10px\"}}>\n                            <Typography id=\"modal-modal-description\">\n                                There are a few helper methods included the in the filter language* to help building queries more easily.\n                            </Typography>\n                            <br></br>\n                            <Typography id=\"modal-modal-description\">\n                                true if the given selector's value starts with (similarly <code style={{fontSize: \"14px\"}}>endsWith</code>, <code style={{fontSize: \"14px\"}}>contains</code>) the string:\n                            </Typography>\n                            <SyntaxHighlighter\n                                showLineNumbers={false}\n                                code={`request.path.startsWith(\"something\")`}\n                                language=\"python\"\n                            />\n                            <Typography id=\"modal-modal-description\">\n                                a field that contains a JSON encoded string can be filtered based a JSONPath:\n                            </Typography>\n                            <SyntaxHighlighter\n                                showLineNumbers={false}\n                                code={`response.content.text.json().some.path == \"somevalue\"`}\n                                language=\"python\"\n                            />\n                            <Typography id=\"modal-modal-description\">\n                                fields that contain sensitive information can be redacted:\n                            </Typography>\n                            <SyntaxHighlighter\n                                showLineNumbers={false}\n                                code={`and redact(\"request.path\", \"src.name\")`}\n                                language=\"python\"\n                            />\n                            <Typography id=\"modal-modal-description\">\n                                returns the UNIX timestamp which is the equivalent of the time that's provided by the string. Invalid input evaluates to false:\n                            </Typography>\n                            <SyntaxHighlighter\n                                showLineNumbers={false}\n                                code={`timestamp >= datetime(\"10/19/2021, 6:29:02.593 PM\")`}\n                                language=\"python\"\n                            />\n                            <Typography id=\"modal-modal-description\">\n                                limits the number of records that are streamed back as a result of a query. Always evaluates to true:\n                            </Typography>\n                            <SyntaxHighlighter\n                                showLineNumbers={false}\n                                code={`and limit(100)`}\n                                language=\"python\"\n                            />\n                        </Grid>\n                    </Grid>\n                    <br></br>\n                    <Typography id=\"modal-modal-description\" style={{fontSize: 12, fontStyle: 'italic'}}>\n                        *The filtering functionality is provided through <b>Basenine</b> database server. Please refer to <a href=\"https://github.com/up9inc/basenine/wiki/BFL-Syntax-Reference\"><b>BFL Syntax Reference</b></a> for more information.\n                    </Typography>\n                </Box>\n            </Fade>\n        </Modal>\n    </React.Fragment>\n}\n","import React, { useEffect, useState } from 'react';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport QueryableStyle from './style/Queryable.module.sass';\nimport {useRecoilState} from \"recoil\";\nimport queryAtom from \"../../recoil/query\";\n\ninterface Props {\n    query: string,\n    style?: object,\n    iconStyle?: object,\n    className?: string,\n    useTooltip?: boolean,\n    displayIconOnMouseOver?: boolean,\n    flipped?: boolean,\n}\n\nconst Queryable: React.FC<Props> = ({query, style, iconStyle, className, useTooltip= true, displayIconOnMouseOver = false, flipped = false, children}) => {\n    const [showAddedNotification, setAdded] = useState(false);\n    const [showTooltip, setShowTooltip] = useState(false);\n    const [queryState, setQuery] = useRecoilState(queryAtom);\n\n    const onCopy = () => {\n        setAdded(true)\n    };\n\n    useEffect(() => {\n        let timer;\n        if (showAddedNotification) {\n            setQuery(queryState ? `${queryState} and ${query}` : query);\n            timer = setTimeout(() => {\n                setAdded(false);\n            }, 1000);\n        }\n        return () => clearTimeout(timer);\n\n    // eslint-disable-next-line\n    }, [showAddedNotification, query, setQuery]);\n\n    const addButton = query ? <CopyToClipboard text={query} onCopy={onCopy}>\n                    <span\n                        className={QueryableStyle.QueryableIcon}\n                        title={`Add \"${query}\" to the filter`}\n                        style={iconStyle}\n                    >\n                        <AddCircleIcon fontSize=\"small\" color=\"inherit\"/>\n                        {showAddedNotification && <span className={QueryableStyle.QueryableAddNotifier}>Added</span>}\n                    </span>\n\t\t\t\t</CopyToClipboard> : null;\n\n    return (\n        <div\n            className={`${QueryableStyle.QueryableContainer} ${QueryableStyle.displayIconOnMouseOver} ${className ? className : ''} ${displayIconOnMouseOver ? 'displayIconOnMouseOver ' : ''}`}\n            style={style}\n            onMouseOver={ e => setShowTooltip(true)}\n            onMouseLeave={ e => setShowTooltip(false)}\n        >\n            {flipped && addButton}\n            {children}\n            {!flipped && addButton}\n            {useTooltip && showTooltip && <span className={QueryableStyle.QueryableTooltip}>{query}</span>}\n        </div>\n    );\n};\n\nexport default Queryable;\n","import React from \"react\";\nimport styles from './style/StatusCode.module.sass';\nimport Queryable from \"./Queryable\";\n\nexport enum StatusCodeClassification {\n    SUCCESS = \"success\",\n    FAILURE = \"failure\",\n    NEUTRAL = \"neutral\"\n}\n\ninterface EntryProps {\n    statusCode: number\n}\n\nconst StatusCode: React.FC<EntryProps> = ({statusCode}) => {\n\n    const classification = getClassification(statusCode)\n\n    return <Queryable\n        query={`response.status == ${statusCode}`}\n        displayIconOnMouseOver={true}\n        flipped={true}\n        iconStyle={{marginTop: \"40px\", paddingLeft: \"10px\"}}\n    >\n        <span\n            title=\"Status Code\"\n            className={`${styles[classification]} ${styles.base}`}\n        >\n            {statusCode}\n        </span>\n    </Queryable>\n};\n\nexport function getClassification(statusCode: number): string {\n    let classification = StatusCodeClassification.NEUTRAL;\n\n    // 1 - 16 HTTP/2 (gRPC) status codes\n    // 2xx - 5xx HTTP/1.x status codes\n    if ((statusCode >= 200 && statusCode <= 399) || statusCode === 0) {\n        classification = StatusCodeClassification.SUCCESS;\n    } else if (statusCode >= 400 || (statusCode >= 1 && statusCode <= 16)) {\n        classification = StatusCodeClassification.FAILURE;\n    }\n\n    return classification\n}\n\nexport default StatusCode;\n","import React from \"react\";\nimport styles from './style/Protocol.module.sass';\nimport Queryable from \"./Queryable\";\n\nexport interface ProtocolInterface {\n    name: string\n    longName: string\n    abbr: string\n    macro: string\n    backgroundColor: string\n    foregroundColor: string\n    fontSize: number\n    referenceLink: string\n    ports: string[]\n    inbound_ports: string\n}\n\ninterface ProtocolProps {\n    protocol: ProtocolInterface\n    horizontal: boolean\n}\n\nconst Protocol: React.FC<ProtocolProps> = ({protocol, horizontal}) => {\n    if (horizontal) {\n        return <Queryable\n            query={protocol.macro}\n            displayIconOnMouseOver={true}\n        >\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href={protocol.referenceLink}>\n                <span\n                    className={`${styles.base} ${styles.horizontal}`}\n                    style={{\n                        backgroundColor: protocol.backgroundColor,\n                        color: protocol.foregroundColor,\n                        fontSize: 13,\n                    }}\n                    title={protocol.abbr}\n                >\n                    {protocol.longName}\n                </span>\n            </a>\n        </Queryable>\n    } else {\n        return <Queryable\n            query={protocol.macro}\n            displayIconOnMouseOver={true}\n            flipped={false}\n            iconStyle={{marginTop: \"52px\", marginRight: \"10px\", zIndex: 1000}}\n        >\n            <span\n                className={`${styles.base} ${styles.vertical}`}\n                style={{\n                    backgroundColor: protocol.backgroundColor,\n                    color: protocol.foregroundColor,\n                    fontSize: protocol.fontSize,\n                    marginRight: \"-20px\",\n                }}\n                title={protocol.longName}\n            >\n                {protocol.abbr}\n            </span>\n        </Queryable>\n    }\n};\n\nexport default Protocol;\n","import miscStyles from \"./style/misc.module.sass\";\nimport React from \"react\";\nimport styles from './style/Summary.module.sass';\nimport Queryable from \"./Queryable\";\n\ninterface SummaryProps {\n    method: string\n    summary: string\n}\n\nexport const Summary: React.FC<SummaryProps> = ({method, summary}) => {\n\n    return <div className={styles.container}>\n        {method && <Queryable\n            query={`method == \"${method}\"`}\n            className={`${miscStyles.protocol} ${miscStyles.method}`}\n            displayIconOnMouseOver={true}\n            style={{whiteSpace: \"nowrap\"}}\n            flipped={true}\n            iconStyle={{zIndex:\"5\",position:\"relative\",right:\"22px\"}}\n        >\n            <span>\n                {method}\n            </span>\n        </Queryable>}\n        {summary && <Queryable\n            query={`summary == \"${summary}\"`}\n            displayIconOnMouseOver={true}\n            flipped={true}\n            iconStyle={{zIndex:\"5\",position:\"relative\",right:\"14px\"}}\n        >\n            <div\n                className={`${styles.summary}`}\n            >\n                {summary}\n            </div>\n        </Queryable>}\n    </div>\n};\n","import { atom } from \"recoil\";\n\nconst focusedEntryIdAtom = atom({\n    key: \"focusedEntryIdAtom\",\n    default: null\n});\n\nexport default focusedEntryIdAtom;\n","import React from \"react\";\nimport Moment from 'moment';\nimport SwapHorizIcon from '@material-ui/icons/SwapHoriz';\nimport styles from './EntryListItem.module.sass';\nimport StatusCode, {getClassification, StatusCodeClassification} from \"../UI/StatusCode\";\nimport Protocol, {ProtocolInterface} from \"../UI/Protocol\"\nimport {Summary} from \"../UI/Summary\";\nimport Queryable from \"../UI/Queryable\";\nimport ingoingIconSuccess from \"../assets/ingoing-traffic-success.svg\"\nimport ingoingIconFailure from \"../assets/ingoing-traffic-failure.svg\"\nimport ingoingIconNeutral from \"../assets/ingoing-traffic-neutral.svg\"\nimport outgoingIconSuccess from \"../assets/outgoing-traffic-success.svg\"\nimport outgoingIconFailure from \"../assets/outgoing-traffic-failure.svg\"\nimport outgoingIconNeutral from \"../assets/outgoing-traffic-neutral.svg\"\nimport {useRecoilState} from \"recoil\";\nimport focusedEntryIdAtom from \"../../recoil/focusedEntryId\";\nimport queryAtom from \"../../recoil/query\";\n\ninterface TCPInterface {\n    ip: string\n    port: string\n    name: string\n}\n\ninterface Entry {\n    proto: ProtocolInterface,\n    method?: string,\n    summary: string,\n    id: number,\n    status?: number;\n    timestamp: Date;\n    src: TCPInterface,\n    dst: TCPInterface,\n    isOutgoing?: boolean;\n    latency: number;\n    rules: Rules;\n    contractStatus: number,\n}\n\ninterface Rules {\n    status: boolean;\n    latency: number;\n    numberOfRules: number;\n}\n\ninterface EntryProps {\n    entry: Entry;\n    style: object;\n    headingMode: boolean;\n}\n\nexport const EntryItem: React.FC<EntryProps> = ({entry, style, headingMode}) => {\n\n    const [focusedEntryId, setFocusedEntryId] = useRecoilState(focusedEntryIdAtom);\n    const [queryState, setQuery] = useRecoilState(queryAtom);\n    const isSelected = focusedEntryId === entry.id.toString();\n\n    const classification = getClassification(entry.status)\n    const numberOfRules = entry.rules.numberOfRules\n    let ingoingIcon;\n    let outgoingIcon;\n    switch(classification) {\n        case StatusCodeClassification.SUCCESS: {\n            ingoingIcon = ingoingIconSuccess;\n            outgoingIcon = outgoingIconSuccess;\n            break;\n        }\n        case StatusCodeClassification.FAILURE: {\n            ingoingIcon = ingoingIconFailure;\n            outgoingIcon = outgoingIconFailure;\n            break;\n        }\n        case StatusCodeClassification.NEUTRAL: {\n            ingoingIcon = ingoingIconNeutral;\n            outgoingIcon = outgoingIconNeutral;\n            break;\n        }\n    }\n    let additionalRulesProperties = \"\";\n    let ruleSuccess = true;\n    let rule = 'latency' in entry.rules\n    if (rule) {\n        if (entry.rules.latency !== -1) {\n            if (entry.rules.latency >= entry.latency || !('latency' in entry)) {\n                additionalRulesProperties = styles.ruleSuccessRow\n                ruleSuccess = true\n            } else {\n                additionalRulesProperties = styles.ruleFailureRow\n                ruleSuccess = false\n            }\n            if (isSelected) {\n                additionalRulesProperties += ` ${entry.rules.latency >= entry.latency ? styles.ruleSuccessRowSelected : styles.ruleFailureRowSelected}`\n            }\n        } else {\n            if (entry.rules.status) {\n                additionalRulesProperties = styles.ruleSuccessRow\n                ruleSuccess = true\n            } else {\n                additionalRulesProperties = styles.ruleFailureRow\n                ruleSuccess = false\n            }\n            if (isSelected) {\n                additionalRulesProperties += ` ${entry.rules.status ? styles.ruleSuccessRowSelected : styles.ruleFailureRowSelected}`\n            }\n        }\n    }\n\n    let contractEnabled = true;\n    let contractText = \"\";\n    switch (entry.contractStatus) {\n        case 0:\n            contractEnabled = false;\n            break;\n        case 1:\n            additionalRulesProperties = styles.ruleSuccessRow\n            ruleSuccess = true\n            contractText = \"No Breaches\"\n            break;\n        case 2:\n            additionalRulesProperties = styles.ruleFailureRow\n            ruleSuccess = false\n            contractText = \"Breach\"\n            break;\n        default:\n            break;\n    }\n\n\n    const isStatusCodeEnabled = ((entry.proto.name === \"http\" && \"status\" in entry) || entry.status !== 0);\n    let endpointServiceContainer = \"10px\";\n    if (!isStatusCodeEnabled) endpointServiceContainer = \"20px\";\n\n    return <React.Fragment>\n        <div\n            id={`entry-${entry.id.toString()}`}\n            className={`${styles.row}\n            ${isSelected && !rule && !contractEnabled ? styles.rowSelected : additionalRulesProperties}`}\n            onClick={() => {\n                if (!setFocusedEntryId) return;\n                setFocusedEntryId(entry.id.toString());\n            }}\n            style={{\n                border: isSelected && !headingMode ? `1px ${entry.proto.backgroundColor} solid` : \"1px transparent solid\",\n                position: !headingMode ? \"absolute\" : \"unset\",\n                top: style['top'],\n                marginTop: !headingMode ? style['marginTop'] : \"10px\",\n                width: !headingMode ? \"calc(100% - 25px)\" : \"calc(100% - 18px)\",\n            }}\n        >\n            {!headingMode ? <Protocol\n                protocol={entry.proto}\n                horizontal={false}\n            /> : null}\n            {isStatusCodeEnabled && <div>\n                <StatusCode statusCode={entry.status}/>\n            </div>}\n            <div className={styles.endpointServiceContainer} style={{paddingLeft: endpointServiceContainer}}>\n                <Summary method={entry.method} summary={entry.summary}/>\n                <div className={styles.resolvedName}>\n                    <Queryable\n                        query={`src.name == \"${entry.src.name}\"`}\n                        displayIconOnMouseOver={true}\n                        flipped={true}\n                        style={{marginTop: \"-4px\", overflow: \"visible\"}}\n                        iconStyle={!headingMode ? {marginTop: \"4px\", right: \"16px\", position: \"relative\"} :\n                        entry.proto.name === \"http\" ? {marginTop: \"4px\", left: \"calc(50vw + 41px)\", position: \"absolute\"} :\n                        {marginTop: \"4px\", left: \"calc(50vw - 9px)\", position: \"absolute\"}}\n                    >\n                        <span\n                            title=\"Source Name\"\n                        >\n                            {entry.src.name ? entry.src.name : \"[Unresolved]\"}\n                        </span>\n                    </Queryable>\n                    <SwapHorizIcon style={{color: entry.proto.backgroundColor, marginTop: \"-2px\",marginLeft:\"5px\",marginRight:\"5px\"}}></SwapHorizIcon>\n                    <Queryable\n                        query={`dst.name == \"${entry.dst.name}\"`}\n                        displayIconOnMouseOver={true}\n                        flipped={true}\n                        style={{marginTop: \"-4px\"}}\n                        iconStyle={{marginTop: \"4px\", marginLeft: \"-2px\",right: \"11px\", position: \"relative\"}}\n                    >\n                        <span\n                            title=\"Destination Name\">\n                            {entry.dst.name ? entry.dst.name : \"[Unresolved]\"}\n                        </span>\n                    </Queryable>\n                </div>\n            </div>\n            {\n                rule ?\n                    <div className={`${styles.ruleNumberText} ${ruleSuccess ? styles.ruleNumberTextSuccess : styles.ruleNumberTextFailure} ${rule && contractEnabled ? styles.separatorRight : \"\"}`}>\n                        {`Rules (${numberOfRules})`}\n                    </div>\n                : \"\"\n            }\n            {\n                contractEnabled ?\n                    <div className={`${styles.ruleNumberText} ${ruleSuccess ? styles.ruleNumberTextSuccess : styles.ruleNumberTextFailure} ${rule && contractEnabled ? styles.separatorLeft : \"\"}`}>\n                        {contractText}\n                    </div>\n                : \"\"\n            }\n            <div className={styles.separatorRight}>\n                <Queryable\n                        query={`src.ip == \"${entry.src.ip}\"`}\n                        displayIconOnMouseOver={true}\n                        flipped={true}\n                        iconStyle={{marginRight: \"16px\"}}\n                >\n                    <span\n                        className={`${styles.tcpInfo} ${styles.ip}`}\n                        title=\"Source IP\"\n                    >\n                        {entry.src.ip}\n                    </span>\n                </Queryable>\n\t\t\t\t<span className={`${styles.tcpInfo}`} style={{marginTop: \"18px\"}}>{entry.src.port ? \":\" : \"\"}</span>\n                <Queryable\n                        query={`src.port == \"${entry.src.port}\"`}\n                        displayIconOnMouseOver={true}\n                        flipped={true}\n                        iconStyle={{marginTop: \"28px\"}}\n                >\n                    <span\n                        className={`${styles.tcpInfo} ${styles.port}`}\n                        title=\"Source Port\"\n                    >\n                        {entry.src.port}\n                    </span>\n                </Queryable>\n                {entry.isOutgoing ?\n                    <Queryable\n                            query={`outgoing == true`}\n                            displayIconOnMouseOver={true}\n                            flipped={true}\n                            iconStyle={{marginTop: \"28px\"}}\n                    >\n                        <img\n                            src={outgoingIcon}\n                            alt=\"Ingoing traffic\"\n                            title=\"Ingoing\"\n                        />\n                    </Queryable>\n                    :\n                    <Queryable\n                            query={`outgoing == true`}\n                            displayIconOnMouseOver={true}\n                            flipped={true}\n                            iconStyle={{marginTop: \"28px\"}}\n                    >\n                        <img\n                            src={ingoingIcon}\n                            alt=\"Outgoing traffic\"\n                            title=\"Outgoing\"\n                            onClick={() => {\n                                const query = `outgoing == false`;\n                                setQuery(queryState ? `${queryState} and ${query}` : query);\n                            }}\n                        />\n                    </Queryable>\n                }\n                <Queryable\n                        query={`dst.ip == \"${entry.dst.ip}\"`}\n                        displayIconOnMouseOver={true}\n                        flipped={false}\n                        iconStyle={{marginTop: \"28px\"}}\n                >\n                    <span\n                        className={`${styles.tcpInfo} ${styles.ip}`}\n                        title=\"Destination IP\"\n                    >\n                        {entry.dst.ip}\n                    </span>\n                </Queryable>\n                <span className={`${styles.tcpInfo}`} style={{marginTop: \"18px\"}}>:</span>\n                <Queryable\n                        query={`dst.port == \"${entry.dst.port}\"`}\n                        displayIconOnMouseOver={true}\n                        flipped={false}\n                >\n                    <span\n                        className={`${styles.tcpInfo} ${styles.port}`}\n                        title=\"Destination Port\"\n                    >\n                        {entry.dst.port}\n                    </span>\n                </Queryable>\n            </div>\n            <div className={styles.timestamp}>\n                <Queryable\n                        query={`timestamp >= datetime(\"${Moment(+entry.timestamp)?.utc().format('MM/DD/YYYY, h:mm:ss.SSS A')}\")`}\n                        displayIconOnMouseOver={true}\n                        flipped={false}\n                >\n                    <span\n                        title=\"Timestamp (UTC)\"\n                    >\n                        {Moment(+entry.timestamp)?.utc().format('MM/DD/YYYY, h:mm:ss.SSS A')}\n                    </span>\n                </Queryable>\n            </div>\n        </div>\n    </React.Fragment>\n\n}\n","import { atom } from \"recoil\";\n\nconst entriesAtom = atom({\n    key: \"entriesAtom\",\n    default: []\n});\n\nexport default entriesAtom;\n","import atom from \"./atom\";\n\nenum WsConnectionStatus {\n    Closed,\n    Connected,\n}\n\nexport {WsConnectionStatus};\n\nexport default atom\n","import { atom } from \"recoil\";\n\nconst TrafficViewerApiAtom = atom({\n    key: \"trafficViewerApi\",\n    default: {}\n});\n\nexport default TrafficViewerApiAtom;\n","import React, {useCallback, useEffect, useMemo, useState} from \"react\";\nimport styles from './style/EntriesList.module.sass';\nimport ScrollableFeedVirtualized from \"react-scrollable-feed-virtualized\";\nimport Moment from 'moment';\nimport {EntryItem} from \"./EntryListItem/EntryListItem\";\nimport down from \"./assets/downImg.svg\";\nimport spinner from './assets/spinner.svg';\n\nimport {RecoilState, useRecoilState, useRecoilValue} from \"recoil\";\nimport entriesAtom from \"../recoil/entries\";\nimport wsConnectionAtom, {WsConnectionStatus} from \"../recoil/wsConnection\";\nimport queryAtom from \"../recoil/query\";\nimport { closeWsConnectionCallbackAtom } from \"../recoil/wsConnection/atom\";\nimport TrafficViewerApiAtom from \"../recoil/TrafficViewerApi\";\nimport ITrafficViewerApi from \"./TrafficViewer/ITrafficViewerApi\";\n\ninterface EntriesListProps {\n    listEntryREF: any;\n    onSnapBrokenEvent: () => void;\n    isSnappedToBottom: boolean;\n    setIsSnappedToBottom: any;\n    queriedCurrent: number;\n    setQueriedCurrent: any;\n    queriedTotal: number;\n    setQueriedTotal: any;\n    startTime: number;\n    noMoreDataTop: boolean;\n    setNoMoreDataTop: (flag: boolean) => void;\n    leftOffTop: number;\n    setLeftOffTop: (leftOffTop: number) => void;\n    openWebSocket: (query: string, resetEntries: boolean) => void;\n    leftOffBottom: number;\n    truncatedTimestamp: number;\n    setTruncatedTimestamp: any;\n    scrollableRef: any;\n}\n\nexport const EntriesList: React.FC<EntriesListProps> = ({listEntryREF, onSnapBrokenEvent, isSnappedToBottom, setIsSnappedToBottom, queriedCurrent, setQueriedCurrent, queriedTotal, setQueriedTotal, startTime, noMoreDataTop, setNoMoreDataTop, leftOffTop, setLeftOffTop, openWebSocket, leftOffBottom, truncatedTimestamp, setTruncatedTimestamp, scrollableRef}) => {\n\n    const [entries, setEntries] = useRecoilState(entriesAtom);\n    const wsConnection = useRecoilValue(wsConnectionAtom);\n    const query = useRecoilValue(queryAtom);\n    const isWsConnectionClosed = wsConnection === WsConnectionStatus.Closed;\n    const trafficViewerApi = useRecoilValue(TrafficViewerApiAtom as RecoilState<ITrafficViewerApi>)\n\n    const [loadMoreTop, setLoadMoreTop] = useState(false);\n    const [isLoadingTop, setIsLoadingTop] = useState(false);\n    const [closeWsConnection, setCloseWsConnection] = useRecoilState(closeWsConnectionCallbackAtom)\n\n    useEffect(() => {\n        const list = document.getElementById('list').firstElementChild;\n        list.addEventListener('scroll', (e) => {\n            const el: any = e.target;\n            if(el.scrollTop === 0) {\n                setLoadMoreTop(true);\n            } else {\n                setNoMoreDataTop(false);\n                setLoadMoreTop(false);\n            }\n        });\n    }, [setLoadMoreTop, setNoMoreDataTop]);\n\n    const memoizedEntries = useMemo(() => {\n        return entries;\n    },[entries]);\n\n    const getOldEntries = useCallback(async () => {\n        setLoadMoreTop(false);\n        if (leftOffTop === null || leftOffTop <= 0) {\n            return;\n        }\n        setIsLoadingTop(true);\n        debugger;\n        const data = await trafficViewerApi.fetchEntries(leftOffTop, -1, query, 100, 3000);\n        if (!data || data.data === null || data.meta === null) {\n            setNoMoreDataTop(true);\n            setIsLoadingTop(false);\n            return;\n        }\n        setLeftOffTop(data.meta.leftOff);\n\n        let scrollTo: boolean;\n        if (data.meta.leftOff === 0) {\n            setNoMoreDataTop(true);\n            scrollTo = false;\n        } else {\n            scrollTo = true;\n        }\n        setIsLoadingTop(false);\n\n        const newEntries = [...data.data.reverse(), ...entries];\n        setEntries(newEntries);\n\n        setQueriedCurrent(queriedCurrent + data.meta.current);\n        setQueriedTotal(data.meta.total);\n        setTruncatedTimestamp(data.meta.truncatedTimestamp);\n\n        if (scrollTo) {\n            scrollableRef.current.scrollToIndex(data.data.length - 1);\n        }\n    },[setLoadMoreTop, setIsLoadingTop, entries, setEntries, query, setNoMoreDataTop, leftOffTop, setLeftOffTop, queriedCurrent, setQueriedCurrent, setQueriedTotal, setTruncatedTimestamp, scrollableRef]);\n\n    useEffect(() => {\n        if(!isWsConnectionClosed || !loadMoreTop || noMoreDataTop) return;\n        getOldEntries();\n    }, [loadMoreTop, noMoreDataTop, getOldEntries, isWsConnectionClosed]);\n\n    const scrollbarVisible = scrollableRef.current?.childWrapperRef.current.clientHeight > scrollableRef.current?.wrapperRef.current.clientHeight;\n\n    return <React.Fragment>\n            <div className={styles.list}>\n                <div id=\"list\" ref={listEntryREF} className={styles.list}>\n                    {isLoadingTop && <div className={styles.spinnerContainer}>\n                        <img alt=\"spinner\" src={spinner} style={{height: 25}}/>\n                    </div>}\n                    {noMoreDataTop && <div id=\"noMoreDataTop\" className={styles.noMoreDataAvailable}>No more data available</div>}\n                    <ScrollableFeedVirtualized ref={scrollableRef} itemHeight={48} marginTop={10} onSnapBroken={onSnapBrokenEvent}>\n                        {false /* It's because the first child is ignored by ScrollableFeedVirtualized */}\n                        {memoizedEntries.map(entry => <EntryItem\n                            key={`entry-${entry.id}`}\n                            entry={entry}\n                            style={{}}\n                            headingMode={false}\n                        />)}\n                    </ScrollableFeedVirtualized>\n                    <button type=\"button\"\n                        title=\"Fetch old records\"\n                        className={`${styles.btnOld} ${!scrollbarVisible && leftOffTop > 0 ? styles.showButton : styles.hideButton}`}\n                        onClick={(_) => {\n                            closeWsConnection()\n                            getOldEntries();\n                        }}>\n                        <img alt=\"down\" src={down} />\n                    </button>\n                    <button type=\"button\"\n                        title=\"Snap to bottom\"\n                        className={`${styles.btnLive} ${isSnappedToBottom && !isWsConnectionClosed ? styles.hideButton : styles.showButton}`}\n                        onClick={(_) => {\n                            if (isWsConnectionClosed) {\n                                if (query) {\n                                    openWebSocket(`(${query}) and leftOff(${leftOffBottom})`, false);\n                                } else {\n                                    openWebSocket(`leftOff(${leftOffBottom})`, false);\n                                }\n                            }\n                            scrollableRef.current.jumpToBottom();\n                            setIsSnappedToBottom(true);\n                        }}>\n                        <img alt=\"down\" src={down} />\n                    </button>\n                </div>\n\n                <div className={styles.footer}>\n                    <div>Displaying <b id=\"entries-length\">{entries?.length}</b> results out of <b id=\"total-entries\">{queriedTotal}</b> total</div>\n                    {startTime !== 0 && <div>Started listening at <span style={{marginRight: 5, fontWeight: 600, fontSize: 13}}>{Moment(truncatedTimestamp ? truncatedTimestamp : startTime).utc().format('MM/DD/YYYY, h:mm:ss.SSS A')}</span></div>}\n                </div>\n            </div>\n    </React.Fragment>;\n};\n","import {Tooltip as MUITooltip, Fade, TooltipProps as MUITooltipProps, makeStyles} from \"@material-ui/core\";\nimport React from \"react\";\n\nexport interface TooltipProps extends MUITooltipProps {\n    variant?: 'default' | 'wide' | 'fit';\n    isSimple?: boolean;\n    classes?: any;\n}\n\nexport type TooltipPlacement = 'bottom-end' | 'bottom-start' | 'bottom' | 'left-end' | 'left-start' | 'left' | 'right-end' | 'right-start' | 'right' | 'top-end' | 'top-start' | 'top';\n\nconst styles = {\n    default: {\n        maxWidth: 300\n    },\n    wide: {\n        maxWidth: 700\n    },\n    fit: {\n        maxWidth: '100%'\n    }\n};\n\nconst useStyles = makeStyles((theme) => styles);\n\nconst Tooltip: React.FC<TooltipProps> = (props) => {\n\n    const {isSimple, ..._props} = props;\n\n    const classes = useStyles(props.variant);\n\n    const variant = props.variant || 'default';\n\n    const backgroundClass = isSimple ? \"\" : \"noBackground\"\n\n    return (\n        <MUITooltip\n            classes={{tooltip: `${backgroundClass} ` + classes[variant]}}\n            interactive={true}\n            enterDelay={200}\n            TransitionComponent={Fade}\n            {..._props}\n        >\n            {props.children || <div/>}\n        </MUITooltip>\n    );\n};\n\nexport default Tooltip;","import Tooltip from \"./Tooltip\";\nimport React from \"react\";\nimport { makeStyles, Theme,createStyles } from '@material-ui/core/styles';\nimport variables from '../../variables.module.scss';\n\ninterface Tab {\n    tab: string,\n    disabled?: boolean,\n    disabledMessage?: string,\n    highlight?: boolean,\n    badge?: any,\n}\n\ninterface Props {\n    classes?: any,\n    tabs: Tab[],\n    currentTab: string,\n    color: string,\n    onChange: (string) => void,\n    leftAligned?: boolean,\n    dark?: boolean,\n}\n\nconst useTabsStyles = makeStyles((theme : Theme) => createStyles({\n    root: {\n        height: 40,\n        paddingTop: 15\n    },\n\n    tab: {\n        display: 'inline-block',\n        textTransform: 'uppercase',\n        color: variables.blueColor,\n        cursor: 'pointer',\n    },\n\n    tabsAlignLeft: {\n        textAlign: 'left'\n    },\n\n    active: {\n        fontWeight: 400,\n        color: variables.fontColor,\n        cursor: 'unset',\n        borderBottom: \"2px solid \" + variables.fontColor,\n        paddingBottom: 6,\n\n        \"&.dark\": {\n            color: theme.palette.common.black,\n            borderBottom: \"2px solid \" + theme.palette.common.black,\n        }\n    },\n\n    disabled: {\n        color: theme.palette.primary.dark,\n        cursor: 'unset'\n    },\n\n    highlight: {\n        color: theme.palette.primary.light,\n    },\n\n    separator: {\n        borderRight: \"1px solid \" + theme.palette.primary.dark,\n        height: 20,\n        verticalAlign: 'middle',\n        margin: '0 20px',\n        cursor: 'unset',\n    }\n}));\n\n\nconst Tabs: React.FC<Props> = ({classes={}, tabs, currentTab, color, onChange, leftAligned, dark}) => {\n    const _classes = {...useTabsStyles(), ...classes};\n    return <div className={`${_classes.root} ${leftAligned ? _classes.tabsAlignLeft : ''}`}>\n        {tabs.map(({tab, disabled, disabledMessage, highlight, badge}, index) => {\n            const active = currentTab === tab;\n            const tabLink = <span\n                key={tab}\n                className={`${_classes.tab} ${active ? _classes.active : ''} ${disabled ? _classes.disabled : ''} ${highlight ? _classes.highlight : ''} ${dark ? 'dark' : ''}`}\n                onClick={() => !disabled && onChange(tab)}\n                style={{color: color}}\n            >\n                {tab}\n\n                {React.isValidElement(badge) && badge}\n            </span>;\n\n            return <span key={tab}>\n                {disabled && disabledMessage ? <Tooltip title={disabledMessage} isSimple>{tabLink}</Tooltip> : tabLink}\n                {index < tabs.length - 1 && <span className={_classes.tab + ' ' + _classes.separator} key={tab + '_sepparator'}></span>}\n            </span>;\n        })}\n    </div>;\n}\n\nexport default Tabs;\n","import React from \"react\";\nimport collapsedImg from \"../assets/collapsed.svg\";\nimport expandedImg from \"../assets/expanded.svg\";\nimport styles from \"./style/CollapsibleContainer.module.sass\";\n\ninterface Props {\n    title: string | React.ReactNode,\n    expanded: boolean,\n    titleClassName?: string,\n    className?: string,\n    stickyHeader?: boolean,\n}\n\nconst CollapsibleContainer: React.FC<Props> = ({title, children, expanded, titleClassName, className, stickyHeader = false}) => {\n    const classNames = `${styles.CollapsibleContainer} ${expanded ? `${styles.CollapsibleContainerExpanded}` : `${styles.CollapsibleContainerCollapsed}`} ${className ? className : ''}`;\n\n    // This is needed to achieve the sticky header feature.\n    // It is needed an un-contained component for the css to work properly.\n    const content = <React.Fragment>\n        <div\n            className={`${styles.CollapsibleContainerHeader} ${stickyHeader ? `${styles.CollapsibleContainerHeaderSticky}` : \"\"}\n                      ${expanded ? `${styles.CollapsibleContainerHeaderExpanded}` : \"\"}`}>\n            {\n                React.isValidElement(title)?\n                    <React.Fragment>{title}</React.Fragment> :\n                    <React.Fragment>\n                        <div className={`${styles.CollapsibleContainerTitle} ${titleClassName ? titleClassName : ''}`}>{title}</div>\n                        <img\n                            className={styles.CollapsibleContainerExpandCollapseButton}\n                            src={expanded ? expandedImg : collapsedImg}\n                            alt=\"Expand/Collapse Button\"\n                        />\n                    </React.Fragment>\n            }\n        </div>\n        {expanded ? children : null}\n    </React.Fragment>;\n\n    return stickyHeader ? content : <div className={classNames}>{content}</div>;\n};\n\nexport default CollapsibleContainer;\n","import React, { useEffect, useState } from 'react';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport duplicateImg from \"../assets/duplicate.svg\";\nimport styles from './style/FancyTextDisplay.module.sass';\n\ninterface Props {\n    text: string | number,\n    className?: string,\n    isPossibleToCopy?: boolean,\n    applyTextEllipsis?: boolean,\n    flipped?: boolean,\n    useTooltip?: boolean,\n    displayIconOnMouseOver?: boolean,\n    buttonOnly?: boolean,\n}\n\nconst FancyTextDisplay: React.FC<Props> = ({text, className, isPossibleToCopy = true, applyTextEllipsis = true, flipped = false, useTooltip= false, displayIconOnMouseOver = false, buttonOnly = false}) => {\n    const [showCopiedNotification, setCopied] = useState(false);\n    const [showTooltip, setShowTooltip] = useState(false);\n    text = String(text);\n\n    const onCopy = () => {\n        setCopied(true)\n    };\n\n    useEffect(() => {\n        let timer;\n        if (showCopiedNotification) {\n            timer = setTimeout(() => {\n                setCopied(false);\n            }, 1000);\n        }\n        return () => clearTimeout(timer);\n    }, [showCopiedNotification]);\n\n    const textElement = <span className={styles.FancyTextDisplayText}>{text}</span>;\n\n    const copyButton = isPossibleToCopy && text ? <CopyToClipboard text={text} onCopy={onCopy}>\n                    <span\n                        className={styles.FancyTextDisplayIcon}\n                        title={`Copy \"${text}\" value to clipboard`}\n                    >\n                        <img src={duplicateImg} alt=\"Duplicate full value\"/>\n                        {showCopiedNotification && <span className={styles.FancyTextDisplayCopyNotifier}>Copied</span>}\n                    </span>\n\t\t\t\t</CopyToClipboard> : null;\n\n    return (\n        <p\n            className={`${styles.FancyTextDisplayContainer} ${className ? className : ''} ${displayIconOnMouseOver ? ` ${styles.displayIconOnMouseOver} ` : ''} ${applyTextEllipsis ? ` ${styles.FancyTextDisplayContainerEllipsis} `: ''}`}\n            title={text}\n            onMouseOver={ e => setShowTooltip(true)}\n            onMouseLeave={ e => setShowTooltip(false)}\n        >\n            {!buttonOnly && flipped && textElement}\n            {copyButton}\n            {!buttonOnly && !flipped && textElement}\n            {useTooltip && showTooltip && <span className={styles.FancyTextDisplayCopyNotifier}>{text}</span>}\n        </p>\n    );\n};\n\nexport default FancyTextDisplay;\n","import React from \"react\";\n\nexport interface Props {\n    checked: boolean;\n    onToggle: (checked:boolean) => any;\n}\n\nconst Checkbox: React.FC<Props> = ({checked, onToggle}) => {\n\n    return (\n        <div>\n            <input style={{cursor: \"pointer\"}} type=\"checkbox\" checked={checked} onChange={(event) => onToggle(event.target.checked)}/>\n        </div>\n    );\n};\n\nexport default Checkbox;\n","import styles from \"./EntrySections.module.sass\";\nimport React, {useState} from \"react\";\nimport {SyntaxHighlighter} from \"../UI/SyntaxHighlighter/index\";\nimport CollapsibleContainer from \"../UI/CollapsibleContainer\";\nimport FancyTextDisplay from \"../UI/FancyTextDisplay\";\nimport Queryable from \"../UI/Queryable\";\nimport Checkbox from \"../UI/Checkbox\";\nimport ProtobufDecoder from \"protobuf-decoder\";\nimport {default as jsonBeautify} from \"json-beautify\";\nimport {default as xmlBeautify} from \"xml-formatter\";\n\ninterface EntryViewLineProps {\n    label: string;\n    value: number | string;\n    selector?: string;\n    overrideQueryValue?: string;\n    displayIconOnMouseOver?: boolean;\n    useTooltip?: boolean;\n}\n\nconst EntryViewLine: React.FC<EntryViewLineProps> = ({label, value, selector = \"\", overrideQueryValue = \"\", displayIconOnMouseOver = true, useTooltip = true}) => {\n    let query: string;\n    if (!selector) {\n        query = \"\";\n    } else if (overrideQueryValue) {\n        query = `${selector} == ${overrideQueryValue}`;\n    } else if (typeof(value) == \"string\") {\n        query = `${selector} == \"${JSON.stringify(value).slice(1, -1)}\"`;\n    } else {\n        query = `${selector} == ${value}`;\n    }\n    return (label && <tr className={styles.dataLine}>\n                    <td className={`${styles.dataKey}`}>\n                        <Queryable\n                            query={query}\n                            style={{float: \"right\", height: \"18px\"}}\n                            iconStyle={{marginRight: \"20px\"}}\n                            flipped={true}\n                            useTooltip={useTooltip}\n                            displayIconOnMouseOver={displayIconOnMouseOver}\n                        >\n                            {label}\n                        </Queryable>\n                    </td>\n                <td>\n                    <FancyTextDisplay\n                        className={styles.dataValue}\n                        text={value}\n                        applyTextEllipsis={false}\n                        flipped={true}\n                        displayIconOnMouseOver={true}\n                    />\n                </td>\n            </tr>) || null;\n}\n\n\ninterface EntrySectionCollapsibleTitleProps {\n    title: string,\n    color: string,\n    expanded: boolean,\n    setExpanded: any,\n    query?: string,\n}\n\nconst EntrySectionCollapsibleTitle: React.FC<EntrySectionCollapsibleTitleProps> = ({title, color, expanded, setExpanded, query = \"\"}) => {\n    return <div className={styles.title}>\n        <div\n            className={`${styles.button} ${expanded ? styles.expanded : ''}`}\n            style={{backgroundColor: color}}\n            onClick={() => {\n                setExpanded(!expanded)\n            }}\n        >\n            {expanded ? '-' : '+'}\n        </div>\n        <Queryable\n            query={query}\n            useTooltip={!!query}\n            displayIconOnMouseOver={!!query}\n        >\n            <span>{title}</span>\n        </Queryable>\n    </div>\n}\n\ninterface EntrySectionContainerProps {\n    title: string,\n    color: string,\n    query?: string,\n}\n\nexport const EntrySectionContainer: React.FC<EntrySectionContainerProps> = ({title, color, children, query = \"\"}) => {\n    const [expanded, setExpanded] = useState(true);\n    return <CollapsibleContainer\n        className={styles.collapsibleContainer}\n        expanded={expanded}\n        title={<EntrySectionCollapsibleTitle title={title} color={color} expanded={expanded} setExpanded={setExpanded} query={query}/>}\n    >\n        {children}\n    </CollapsibleContainer>\n}\n\ninterface EntryBodySectionProps {\n    title: string,\n    content: any,\n    color: string,\n    encoding?: string,\n    contentType?: string,\n    selector?: string,\n}\n\nexport const EntryBodySection: React.FC<EntryBodySectionProps> = ({\n    title,\n    color,\n    content,\n    encoding,\n    contentType,\n    selector,\n}) => {\n    const MAXIMUM_BYTES_TO_FORMAT = 1000000; // The maximum of chars to highlight in body, in case the response can be megabytes\n    const jsonLikeFormats = ['json', 'yaml', 'yml'];\n    const xmlLikeFormats = ['xml', 'html'];\n    const protobufFormats = ['application/grpc'];\n    const supportedFormats = jsonLikeFormats.concat(xmlLikeFormats, protobufFormats);\n\n    const [isPretty, setIsPretty] = useState(true);\n    const [showLineNumbers, setShowLineNumbers] = useState(true);\n    const [decodeBase64, setDecodeBase64] = useState(true);\n\n    const isBase64Encoding = encoding === 'base64';\n    const supportsPrettying = supportedFormats.some(format => contentType?.indexOf(format) > -1);\n\n    const formatTextBody = (body: any): string => {\n        if (!decodeBase64) return body;\n\n        const chunk = body.slice(0, MAXIMUM_BYTES_TO_FORMAT);\n        const bodyBuf = isBase64Encoding ? atob(chunk) : chunk;\n\n        try {\n            if (jsonLikeFormats.some(format => contentType?.indexOf(format) > -1)) {\n                if (!isPretty) return bodyBuf;\n                return jsonBeautify(JSON.parse(bodyBuf), null, 2, 80);\n            }  else if (xmlLikeFormats.some(format => contentType?.indexOf(format) > -1)) {\n                if (!isPretty) return bodyBuf;\n                return xmlBeautify(bodyBuf, {\n                    indentation: '  ',\n                    filter: (node) => node.type !== 'Comment',\n                    collapseContent: true,\n                    lineSeparator: '\\n'\n                });\n            } else if (protobufFormats.some(format => contentType?.indexOf(format) > -1)) {\n                // Replace all non printable characters (ASCII)\n                const protobufDecoder = new ProtobufDecoder(bodyBuf, true);\n                const protobufDecoded = protobufDecoder.decode().toSimple();\n                if (!isPretty) return JSON.stringify(protobufDecoded);\n                return jsonBeautify(protobufDecoded, null, 2, 80);\n            }\n        } catch (error) {\n            console.error(error);\n        }\n        return bodyBuf;\n    }\n\n    return <React.Fragment>\n        {content && content?.length > 0 && <EntrySectionContainer\n                                                title={title}\n                                                color={color}\n                                                query={`${selector} == r\".*\"`}\n                                            >\n            <div style={{display: 'flex', alignItems: 'center', alignContent: 'center', margin: \"5px 0\"}}>\n                {supportsPrettying && <div style={{paddingTop: 3}}>\n                    <Checkbox checked={isPretty} onToggle={() => {setIsPretty(!isPretty)}}/>\n                </div>}\n                {supportsPrettying && <span style={{marginLeft: '.2rem'}}>Pretty</span>}\n\n                <div style={{paddingTop: 3, paddingLeft: supportsPrettying ? 20 : 0}}>\n                    <Checkbox checked={showLineNumbers} onToggle={() => {setShowLineNumbers(!showLineNumbers)}}/>\n                </div>\n                <span style={{marginLeft: '.2rem'}}>Line numbers</span>\n\n                {isBase64Encoding && <div style={{paddingTop: 3, paddingLeft: 20}}>\n                    <Checkbox checked={decodeBase64} onToggle={() => {setDecodeBase64(!decodeBase64)}}/>\n                </div>}\n                {isBase64Encoding && <span style={{marginLeft: '.2rem'}}>Decode Base64</span>}\n            </div>\n\n            <SyntaxHighlighter\n                code={formatTextBody(content)}\n                showLineNumbers={showLineNumbers}\n            />\n        </EntrySectionContainer>}\n    </React.Fragment>\n}\n\ninterface EntrySectionProps {\n    title: string,\n    color: string,\n    arrayToIterate: any[],\n}\n\nexport const EntryTableSection: React.FC<EntrySectionProps> = ({title, color, arrayToIterate}) => {\n    let arrayToIterateSorted: any[];\n    if (arrayToIterate) {\n        arrayToIterateSorted = arrayToIterate.sort((a, b) => {\n            if (a.name > b.name) {\n                return 1;\n            }\n\n            if (a.name < b.name) {\n                return -1;\n            }\n\n            return 0;\n        });\n    }\n    return <React.Fragment>\n        {\n            arrayToIterate && arrayToIterate.length > 0 ?\n                <EntrySectionContainer title={title} color={color}>\n                    <table>\n                        <tbody id={`tbody-${title}`}>\n                            {arrayToIterateSorted.map(({name, value, selector}, index) => <EntryViewLine\n                                key={index}\n                                label={name}\n                                value={value}\n                                selector={selector}\n                            />)}\n                        </tbody>\n                    </table>\n                </EntrySectionContainer> : <span/>\n        }\n    </React.Fragment>\n}\n\ninterface EntryPolicySectionProps {\n    title: string,\n    color: string,\n    latency?: number,\n    arrayToIterate: any[],\n}\n\ninterface EntryPolicySectionCollapsibleTitleProps {\n    label: string;\n    matched: string;\n    expanded: boolean;\n    setExpanded: any;\n}\n\nconst EntryPolicySectionCollapsibleTitle: React.FC<EntryPolicySectionCollapsibleTitleProps> = ({label, matched, expanded, setExpanded}) => {\n    return <div className={styles.title}>\n        <span\n            className={`${styles.button}\n            ${expanded ? styles.expanded : ''}`}\n            onClick={() => {\n                setExpanded(!expanded)\n            }}\n        >\n            {expanded ? '-' : '+'}\n        </span>\n        <span>\n            <tr className={styles.dataLine}>\n            <td className={`${styles.dataKey} ${styles.rulesTitleSuccess}`}>{label}</td>\n            <td className={`${styles.dataKey} ${matched === 'Success' ? styles.rulesMatchedSuccess : styles.rulesMatchedFailure}`}>{matched}</td>\n            </tr>\n        </span>\n    </div>\n}\n\ninterface EntryPolicySectionContainerProps {\n    label: string;\n    matched: string;\n    children?: any;\n}\n\nexport const EntryPolicySectionContainer: React.FC<EntryPolicySectionContainerProps> = ({label, matched, children}) => {\n    const [expanded, setExpanded] = useState(false);\n    return <CollapsibleContainer\n        className={styles.collapsibleContainer}\n        expanded={expanded}\n        title={<EntryPolicySectionCollapsibleTitle label={label} matched={matched} expanded={expanded} setExpanded={setExpanded}/>}\n    >\n        {children}\n    </CollapsibleContainer>\n}\n\nexport const EntryTablePolicySection: React.FC<EntryPolicySectionProps> = ({title, color, latency, arrayToIterate}) => {\n    return <React.Fragment>\n        {\n            arrayToIterate && arrayToIterate.length > 0 ?\n                <React.Fragment>\n                <EntrySectionContainer title={title} color={color}>\n                    <table>\n                        <tbody>\n                            {arrayToIterate.map(({rule, matched}, index) => {\n                                    return (\n                                        <EntryPolicySectionContainer key={index} label={rule.Name} matched={matched && (rule.Type === 'slo' ? rule.ResponseTime >= latency : true)? \"Success\" : \"Failure\"}>\n                                            {\n                                                <React.Fragment>\n                                                    {\n                                                        rule.Key &&\n                                                        <tr className={styles.dataValue}><td><b>Key:</b></td> <td>{rule.Key}</td></tr>\n                                                    }\n                                                    {\n                                                        rule.ResponseTime !== 0 &&\n                                                        <tr className={styles.dataValue}><td><b>Response Time:</b></td> <td>{rule.ResponseTime}</td></tr>\n                                                    }\n                                                    {\n                                                        rule.Method &&\n                                                        <tr className={styles.dataValue}><td><b>Method:</b></td> <td>{rule.Method}</td></tr>\n                                                    }\n                                                    {\n                                                        rule.Path &&\n                                                        <tr className={styles.dataValue}><td><b>Path:</b></td> <td>{rule.Path}</td></tr>\n                                                    }\n                                                    {\n                                                        rule.Service &&\n                                                        <tr className={styles.dataValue}><td><b>Service:</b></td> <td>{rule.Service}</td></tr>\n                                                    }\n                                                    {\n                                                        rule.Type &&\n                                                        <tr className={styles.dataValue}><td><b>Type:</b></td> <td>{rule.Type}</td></tr>\n                                                    }\n                                                    {\n                                                        rule.Value &&\n                                                        <tr className={styles.dataValue}><td><b>Value:</b></td> <td>{rule.Value}</td></tr>\n                                                    }\n                                                </React.Fragment>\n                                            }\n                                        </EntryPolicySectionContainer>\n                                    )\n                                }\n                            )\n                            }\n                        </tbody>\n                    </table>\n                </EntrySectionContainer>\n                </React.Fragment> : <span className={styles.noRules}>No rules could be applied to this request.</span>\n        }\n    </React.Fragment>\n}\n\ninterface EntryContractSectionProps {\n    color: string,\n    requestReason: string,\n    responseReason: string,\n    contractContent: string,\n}\n\nexport const EntryContractSection: React.FC<EntryContractSectionProps> = ({color, requestReason, responseReason, contractContent}) => {\n    return <React.Fragment>\n        {requestReason && <EntrySectionContainer title=\"Request\" color={color}>\n            {requestReason}\n        </EntrySectionContainer>}\n        {responseReason && <EntrySectionContainer title=\"Response\" color={color}>\n            {responseReason}\n        </EntrySectionContainer>}\n        {contractContent && <EntrySectionContainer title=\"Contract\" color={color}>\n            <SyntaxHighlighter\n                code={contractContent}\n                language={\"yaml\"}\n            />\n        </EntrySectionContainer>}\n    </React.Fragment>\n}\n","import React, {useState} from 'react';\nimport styles from './EntryViewer.module.sass';\nimport Tabs from \"../UI/Tabs\";\nimport {EntryTableSection, EntryBodySection, EntryTablePolicySection, EntryContractSection} from \"./EntrySections\";\n\nenum SectionTypes {\n    SectionTable = \"table\",\n    SectionBody = \"body\",\n}\n\nconst SectionsRepresentation: React.FC<any> = ({data, color}) => {\n    const sections = []\n\n    if (data) {\n        for (const [i, row] of data.entries()) {\n            switch (row.type) {\n                case SectionTypes.SectionTable:\n                    sections.push(\n                        <EntryTableSection key={i} title={row.title} color={color} arrayToIterate={JSON.parse(row.data)}/>\n                    )\n                    break;\n                case SectionTypes.SectionBody:\n                    sections.push(\n                        <EntryBodySection key={i} title={row.title} color={color} content={row.data} encoding={row.encoding} contentType={row.mimeType} selector={row.selector}/>\n                    )\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n\n    return <React.Fragment>{sections}</React.Fragment>;\n}\n\nconst AutoRepresentation: React.FC<any> = ({representation, isRulesEnabled, rulesMatched, contractStatus, requestReason, responseReason, contractContent, elapsedTime, color}) => {\n    var TABS = [\n        {\n            tab: 'Request'\n        }\n    ];\n    const [currentTab, setCurrentTab] = useState(TABS[0].tab);\n\n    // Don't fail even if `representation` is an empty string\n    if (!representation) {\n        return <React.Fragment></React.Fragment>;\n    }\n\n    const {request, response} = JSON.parse(representation);\n\n    let responseTabIndex = 0;\n    let rulesTabIndex = 0;\n    let contractTabIndex = 0;\n\n    if (response) {\n        TABS.push(\n            {\n                tab: 'Response',\n            }\n        );\n        responseTabIndex = TABS.length - 1;\n    }\n\n    if (isRulesEnabled) {\n        TABS.push(\n            {\n                tab: 'Rules',\n            }\n        );\n        rulesTabIndex = TABS.length - 1;\n    }\n\n    if (contractStatus !== 0 && contractContent) {\n        TABS.push(\n            {\n                tab: 'Contract',\n            }\n        );\n        contractTabIndex = TABS.length - 1;\n    }\n\n    return <div className={styles.Entry}>\n        {<div className={styles.body}>\n            <div className={styles.bodyHeader}>\n                <Tabs tabs={TABS} currentTab={currentTab} color={color} onChange={setCurrentTab} leftAligned/>\n            </div>\n            {currentTab === TABS[0].tab && <React.Fragment>\n                <SectionsRepresentation data={request} color={color}/>\n            </React.Fragment>}\n            {response && currentTab === TABS[responseTabIndex].tab && <React.Fragment>\n                <SectionsRepresentation data={response} color={color}/>\n            </React.Fragment>}\n            {isRulesEnabled && currentTab === TABS[rulesTabIndex].tab && <React.Fragment>\n                <EntryTablePolicySection title={'Rule'} color={color} latency={elapsedTime} arrayToIterate={rulesMatched ? rulesMatched : []}/>\n            </React.Fragment>}\n            {contractStatus !== 0 && contractContent && currentTab === TABS[contractTabIndex].tab && <React.Fragment>\n                <EntryContractSection color={color} requestReason={requestReason} responseReason={responseReason} contractContent={contractContent}/>\n            </React.Fragment>}\n        </div>}\n    </div>;\n}\n\ninterface Props {\n    representation: any;\n    isRulesEnabled: boolean;\n    rulesMatched: any;\n    contractStatus: number;\n    requestReason: string;\n    responseReason: string;\n    contractContent: string;\n    color: string;\n    elapsedTime: number;\n}\n\nconst EntryViewer: React.FC<Props> = ({representation, isRulesEnabled, rulesMatched, contractStatus, requestReason, responseReason, contractContent, elapsedTime, color}) => {\n    return <AutoRepresentation\n        representation={representation}\n        isRulesEnabled={isRulesEnabled}\n        rulesMatched={rulesMatched}\n        contractStatus={contractStatus}\n        requestReason={requestReason}\n        responseReason={responseReason}\n        contractContent={contractContent}\n        elapsedTime={elapsedTime}\n        color={color}\n    />\n};\n\nexport default EntryViewer;\n","import React, {useEffect, useState} from \"react\";\nimport EntryViewer from \"./EntryDetailed/EntryViewer\";\nimport {EntryItem} from \"./EntryListItem/EntryListItem\";\nimport {makeStyles} from \"@material-ui/core\";\nimport Protocol from \"./UI/Protocol\"\nimport Queryable from \"./UI/Queryable\";\nimport {toast} from \"react-toastify\";\nimport {RecoilState, useRecoilState, useRecoilValue} from \"recoil\";\nimport focusedEntryIdAtom from \"../recoil/focusedEntryId\";\nimport trafficViewerApi from \"../recoil/TrafficViewerApi\";\nimport ITrafficViewerApi from \"./TrafficViewer/ITrafficViewerApi\";\nimport TrafficViewerApiAtom from \"../recoil/TrafficViewerApi/atom\";\n\nconst useStyles = makeStyles(() => ({\n    entryTitle: {\n        display: 'flex',\n        minHeight: 20,\n        maxHeight: 46,\n        alignItems: 'center',\n        marginBottom: 4,\n        marginLeft: 6,\n        padding: 2,\n        paddingBottom: 0\n    },\n    entrySummary: {\n        display: 'flex',\n        minHeight: 36,\n        maxHeight: 46,\n        alignItems: 'center',\n        marginBottom: 4,\n        padding: 5,\n        paddingBottom: 0\n    }\n}));\n\nexport const formatSize = (n: number) => n > 1000 ? `${Math.round(n / 1000)}KB` : `${n} B`;\n\nconst EntryTitle: React.FC<any> = ({protocol, data, bodySize, elapsedTime}) => {\n    const classes = useStyles();\n    const response = data.response;\n\n    return <div className={classes.entryTitle}>\n        <Protocol protocol={protocol} horizontal={true}/>\n        <div style={{right: \"30px\", position: \"absolute\", display: \"flex\"}}>\n            {response && <Queryable\n                query={`response.bodySize == ${bodySize}`}\n                style={{margin: \"0 18px\"}}\n                displayIconOnMouseOver={true}\n            >\n                <div\n                    style={{opacity: 0.5}}\n                    id=\"entryDetailedTitleBodySize\"\n                >\n                    {formatSize(bodySize)}\n                </div>\n            </Queryable>}\n            {response && <Queryable\n                query={`elapsedTime >= ${elapsedTime}`}\n                style={{marginRight: 18}}\n                displayIconOnMouseOver={true}\n            >\n                <div\n                    style={{opacity: 0.5}}\n                    id=\"entryDetailedTitleElapsedTime\"\n                >\n                    {Math.round(elapsedTime)}ms\n                </div>\n            </Queryable>}\n        </div>\n    </div>;\n};\n\nconst EntrySummary: React.FC<any> = ({entry}) => {\n    return <EntryItem\n        key={`entry-${entry.id}`}\n        entry={entry}\n        style={{}}\n        headingMode={true}\n    />;\n};\n\n\n\nexport const EntryDetailed = () => {\n\n    const focusedEntryId = useRecoilValue(focusedEntryIdAtom);\n    const trafficViewerApi = useRecoilValue(TrafficViewerApiAtom as RecoilState<ITrafficViewerApi>)\n\n    const [entryData, setEntryData] = useState(null);\n\n    useEffect(() => {\n        if (!focusedEntryId) return;\n        setEntryData(null);\n        (async () => {\n            try {\n                const entryData = await trafficViewerApi.getEntry(focusedEntryId);\n                setEntryData(entryData);\n            } catch (error) {\n                if (error.response?.data?.type) {\n                    toast[error.response.data.type](`Entry[${focusedEntryId}]: ${error.response.data.msg}`, {\n                        position: \"bottom-right\",\n                        theme: \"colored\",\n                        autoClose: error.response.data.autoClose,\n                        hideProgressBar: false,\n                        closeOnClick: true,\n                        pauseOnHover: true,\n                        draggable: true,\n                        progress: undefined,\n                    });\n                }\n                console.error(error);\n            }\n        })();\n        // eslint-disable-next-line\n    }, [focusedEntryId]);\n\n    return <React.Fragment>\n        {entryData && <EntryTitle\n            protocol={entryData.protocol}\n            data={entryData.data}\n            bodySize={entryData.bodySize}\n            elapsedTime={entryData.data.elapsedTime}\n        />}\n        {entryData && <EntrySummary entry={entryData.data}/>}\n        <React.Fragment>\n            {entryData && <EntryViewer\n                representation={entryData.representation}\n                isRulesEnabled={entryData.isRulesEnabled}\n                rulesMatched={entryData.rulesMatched}\n                contractStatus={entryData.data.contractStatus}\n                requestReason={entryData.data.contractRequestReason}\n                responseReason={entryData.data.contractResponseReason}\n                contractContent={entryData.data.contractContent}\n                elapsedTime={entryData.data.elapsedTime}\n                color={entryData.protocol.backgroundColor}\n            />}\n        </React.Fragment>\n    </React.Fragment>\n};\n","import { atom } from \"recoil\";\nimport {TappingStatusPod} from \"./index\";\n\nconst tappingStatusAtom = atom({\n    key: \"tappingStatusAtom\",\n    default: null as TappingStatusPod[]\n});\n\nexport default tappingStatusAtom;\n","import {selector} from \"recoil\";\nimport tappingStatusAtom from \"./atom\";\n\nconst tappingStatusDetails = selector({\n    key: 'tappingStatusDetails',\n    get: ({get}) => {\n        const tappingStatus = get(tappingStatusAtom);\n        const uniqueNamespaces = Array.from(new Set(tappingStatus.map(pod => pod.namespace)));\n        const amountOfPods = tappingStatus.length;\n        const amountOfTappedPods = tappingStatus.filter(pod => pod.isTapped).length;\n        const amountOfUntappedPods = amountOfPods - amountOfTappedPods;\n\n        return {\n            uniqueNamespaces,\n            amountOfPods,\n            amountOfTappedPods,\n            amountOfUntappedPods,\n        };\n    },\n});\n\nexport default tappingStatusDetails;\n","import style from './style/StatusBar.module.sass';\nimport React, {useState} from \"react\";\nimport warningIcon from '../assets/warning_icon.svg';\nimport failIcon from '../assets/failed.svg';\nimport successIcon from '../assets/success.svg';\nimport {useRecoilValue} from \"recoil\";\nimport tappingStatusAtom, {tappingStatusDetails} from \"../../recoil/tappingStatus\";\n\nconst pluralize = (noun: string, amount: number) => {\n    return `${noun}${amount !== 1 ? 's' : ''}`\n}\n\nexport const StatusBar = () => {\n\n    const tappingStatus = useRecoilValue(tappingStatusAtom);\n    const [expandedBar, setExpandedBar] = useState(false);\n    const {uniqueNamespaces, amountOfPods, amountOfTappedPods, amountOfUntappedPods} = useRecoilValue(tappingStatusDetails);\n\n    return <div className={`${style.statusBar} + ${(expandedBar ? ' expandedStatusBar' : \"\")}`} onMouseOver={() => setExpandedBar(true)} onMouseLeave={() => setExpandedBar(false)}>\n        <div className={style.podsCount}>\n            {tappingStatus?.some(pod => !pod.isTapped) && <img src={warningIcon} alt=\"warning\"/>}\n            {`Tapping ${amountOfUntappedPods > 0 ? amountOfTappedPods + \" / \" + amountOfPods : amountOfPods} ${pluralize('pod', amountOfPods)} in ${pluralize('namespace', uniqueNamespaces.length)} ${uniqueNamespaces.join(\", \")}`}\n            </div>\n        {expandedBar && <div style={{marginTop: 20}}>\n            <table>\n                <thead>\n                    <tr>\n                        <th style={{width: \"40%\"}}>Pod name</th>\n                        <th style={{width: \"40%\"}}>Namespace</th>\n                        <th style={{width: \"20%\", textAlign: \"center\"}}>Tapping</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {tappingStatus.map(pod => <tr key={pod.name}>\n                        <td style={{width: \"40%\"}}>{pod.name}</td>\n                        <td style={{width: \"40%\"}}>{pod.namespace}</td>\n                        <td style={{width: \"20%\", textAlign: \"center\"}}><img style={{height: 20}} alt=\"status\" src={pod.isTapped ? successIcon : failIcon}/></td>\n                    </tr>)}\n                </tbody>\n            </table>\n        </div>}\n    </div>;\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","import {Snackbar} from \"@material-ui/core\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport React, {useEffect} from \"react\";\nimport { RecoilState, useRecoilValue } from \"recoil\";\nimport TrafficViewerApiAtom from \"../../recoil/TrafficViewerApi/atom\";\nimport ITrafficViewerApi from \"../TrafficViewer/ITrafficViewerApi\";\nimport './TLSWarning.sass';\n\ninterface TLSWarningProps {\n    showTLSWarning: boolean\n    setShowTLSWarning: (show: boolean) => void\n    addressesWithTLS: Set<string>\n    setAddressesWithTLS: (addresses: Set<string>) => void\n    userDismissedTLSWarning: boolean\n    setUserDismissedTLSWarning: (flag: boolean) => void\n}\n\nexport const TLSWarning: React.FC<TLSWarningProps>  = ({showTLSWarning, setShowTLSWarning, addressesWithTLS, setAddressesWithTLS, userDismissedTLSWarning, setUserDismissedTLSWarning}) => {\n\n    const trafficViewerApi = useRecoilValue(TrafficViewerApiAtom as RecoilState<ITrafficViewerApi>)\n    useEffect(() => {\n        (async () => {\n            try {\n                const recentTLSLinks = await trafficViewerApi?.getRecentTLSLinks();\n                if (recentTLSLinks?.length > 0) {\n                    setAddressesWithTLS(new Set(recentTLSLinks));\n                    setShowTLSWarning(true);\n                }\n            } catch (e) {\n                console.error(e);\n            }\n        })();\n    }, [setShowTLSWarning, setAddressesWithTLS]);\n\n    return (<Snackbar open={showTLSWarning && !userDismissedTLSWarning}>\n        <MuiAlert classes={{filledWarning: 'customWarningStyle'}} elevation={6} variant=\"filled\"\n                  onClose={() => setUserDismissedTLSWarning(true)} severity=\"warning\">\n            Mizu is detecting TLS traffic, this type of traffic will not be displayed.\n            {addressesWithTLS.size > 0 &&\n            <ul className=\"httpsDomains\"> {Array.from(addressesWithTLS, address => <li>{address}</li>)} </ul>}\n        </MuiAlert>\n    </Snackbar>);\n}\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { Filters } from \"../Filters\";\nimport { EntriesList } from \"../EntriesList\";\nimport { makeStyles } from \"@material-ui/core\";\nimport TrafficViwerStyles from \"./TrafficViewer.module.sass\";\nimport styles from '../style/EntriesList.module.sass';\nimport {EntryDetailed} from \"../EntryDetailed\";\nimport playIcon from '../assets/run.svg';\nimport pauseIcon from '../assets/pause.svg';\nimport variables from '../../variables.module.scss';\nimport {StatusBar} from \"../UI/StatusBar\";\nimport { toast } from 'react-toastify';\nimport debounce from 'lodash/debounce';\nimport { RecoilRoot, RecoilState, useRecoilState, useRecoilValue, useSetRecoilState} from \"recoil\";\nimport tappingStatusAtom from \"../../recoil/tappingStatus\";\nimport entriesAtom from \"../../recoil/entries\";\nimport focusedEntryIdAtom from \"../../recoil/focusedEntryId\";\nimport websocketConnectionAtom, {WsConnectionStatus} from \"../../recoil/wsConnection\";\nimport queryAtom from \"../../recoil/query\";\nimport {TLSWarning} from \"../TLSWarning/TLSWarning\";\nimport { closeWsConnectionCallbackAtom } from \"../../recoil/wsConnection/atom\";\nimport trafficViewerApiAtom from \"../../recoil/TrafficViewerApi\"\nimport ITrafficViewerApi from \"./ITrafficViewerApi\";\n\n\nconst useLayoutStyles = makeStyles(() => ({\n  details: {\n    flex: \"0 0 50%\",\n    width: \"45vw\",\n    padding: \"12px 24px\",\n    borderRadius: 4,\n    marginTop: 15,\n    background: variables.headerBackgroundColor,\n  },\n\n  viewer: {\n    display: \"flex\",\n    overflowY: \"auto\",\n    height: \"calc(100% - 70px)\",\n    padding: 5,\n    paddingBottom: 0,\n    overflow: \"auto\",\n  },\n}));\n\ninterface TrafficViewerProps {\n  setAnalyzeStatus?: (status: any) => void;\n  api? :any\n  message :{}\n  error? :{}\n  isOpen : boolean\n  closeWs : () => void\n  sendQuery : (query : string) => void\n  openSocket : () => void\n  trafficViewerApiProp : ITrafficViewerApi\n}\n\nconst TrafficViewer: React.FC<TrafficViewerProps> = ({setAnalyzeStatus, message, error, isOpen, closeWs, sendQuery, openSocket, trafficViewerApiProp}) => {\n    const classes = useLayoutStyles();\n    const [tappingStatus, setTappingStatus] = useRecoilState(tappingStatusAtom);\n    const [entries, setEntries] = useRecoilState(entriesAtom);\n    const [focusedEntryId, setFocusedEntryId] = useRecoilState(focusedEntryIdAtom);\n    const [wsConnection, setWsConnection] = useRecoilState(websocketConnectionAtom);\n    const setCloseWsCallback = useSetRecoilState(closeWsConnectionCallbackAtom)\n    const query = useRecoilValue(queryAtom);\n    const [queryToSend, setQueryToSend] = useState(\"\")\n    const [trafficViewerApiState, setTrafficViewerApiState] = useRecoilState(trafficViewerApiAtom as RecoilState<ITrafficViewerApi>)\n    \n\n    const [noMoreDataTop, setNoMoreDataTop] = useState(false);\n    const [isSnappedToBottom, setIsSnappedToBottom] = useState(true);\n\n    const [queryBackgroundColor, setQueryBackgroundColor] = useState(\"#f5f5f5\");\n\n    const [queriedCurrent, setQueriedCurrent] = useState(0);\n    const [queriedTotal, setQueriedTotal] = useState(0);\n    const [leftOffBottom, setLeftOffBottom] = useState(0);\n    const [leftOffTop, setLeftOffTop] = useState(null);\n    const [truncatedTimestamp, setTruncatedTimestamp] = useState(0);\n\n    const [startTime, setStartTime] = useState(0);\n    const scrollableRef = useRef(null);\n\n    const [showTLSWarning, setShowTLSWarning] = useState(false);\n    const [userDismissedTLSWarning, setUserDismissedTLSWarning] = useState(false);\n    const [addressesWithTLS, setAddressesWithTLS] = useState(new Set<string>());\n\n    const handleQueryChange = useMemo(\n      () =>\n        debounce(async (query: string) => {\n          if (!query) {\n            setQueryBackgroundColor(\"#f5f5f5\");\n          } else {\n            const data = await trafficViewerApiProp.validateQuery(query);\n            if (!data) {\n              return;\n            }\n            if (data.valid) {\n              setQueryBackgroundColor(\"#d2fad2\");\n            } else {\n              setQueryBackgroundColor(\"#fad6dc\");\n            }\n          }\n        }, 500),\n      []\n    ) as (query: string) => void;\n\n    useEffect(() => {\n        handleQueryChange(query);\n    }, [query, handleQueryChange]);\n    \n\n    const listEntry = useRef(null);\n    const openWebSocket = (query: string, resetEntries: boolean) => {\n        if (resetEntries) {\n            setFocusedEntryId(null);\n            setEntries([]);\n            setQueriedCurrent(0);\n            setLeftOffTop(null);\n            setNoMoreDataTop(false);\n        }\n        setQueryToSend(query)\n        openSocket();\n    }\n\n    const onmessage = useCallback((e) => {\n      if (!e?.data) return;\n      const message = JSON.parse(e.data);\n      switch (message.messageType) {\n        case \"entry\":\n          const entry = message.data;\n          if (!focusedEntryId) setFocusedEntryId(entry.id.toString());\n          const newEntries = [...entries, entry];\n          if (newEntries.length === 10001) {\n            setLeftOffTop(newEntries[0].entry.id);\n            newEntries.shift();\n            setNoMoreDataTop(false);\n          }\n          setEntries(newEntries);\n          break;\n        case \"status\":\n          setTappingStatus(message.tappingStatus);\n          break;\n        case \"analyzeStatus\":\n          setAnalyzeStatus(message.analyzeStatus);\n          break;\n        case \"outboundLink\":\n          onTLSDetected(message.Data.DstIP);\n          break;\n        case \"toast\":\n          toast[message.data.type](message.data.text, {\n            position: \"bottom-right\",\n            theme: \"colored\",\n            autoClose: message.data.autoClose,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined,\n          });\n          break;\n        case \"queryMetadata\":\n          setQueriedCurrent(queriedCurrent + message.data.current);\n          setQueriedTotal(message.data.total);\n          setLeftOffBottom(message.data.leftOff);\n          setTruncatedTimestamp(message.data.truncatedTimestamp);\n          if (leftOffTop === null) {\n            setLeftOffTop(message.data.leftOff - 1);\n          }\n          break;\n        case \"startTime\":\n          setStartTime(message.data);\n          break;\n        default:\n          console.error(\n            `unsupported websocket message type, Got: ${message.messageType}`\n          );\n      }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[message]);\n\n    useEffect(() =>{\n      onmessage(message)\n    },[message, onmessage])\n\n\n    useEffect(()=>{\n      isOpen ? setWsConnection(WsConnectionStatus.Connected) : setWsConnection(WsConnectionStatus.Closed)\n      sendQuery(queryToSend)\n    },[isOpen, queryToSend, sendQuery, setWsConnection])\n\n    \n\n    // const onerror = (event) => {\n    //     console.error(\"WebSocket error:\", event);\n    //     if (query) {\n    //         openWebSocket(`(${query}) and leftOff(${leftOffBottom})`, false);\n    //     } else {\n    //         openWebSocket(`leftOff(${leftOffBottom})`, false);\n    //     }\n    // }\n\n    useEffect(() => {(async () => {\n        setTrafficViewerApiState(trafficViewerApiProp)\n        openWebSocket(\"leftOff(-1)\", true);\n        try{\n            const tapStatusResponse = await trafficViewerApiProp.tapStatus();\n            setTappingStatus(tapStatusResponse);\n            if(setAnalyzeStatus) {\n                const analyzeStatusResponse = await trafficViewerApiProp.analyzeStatus();\n                setAnalyzeStatus(analyzeStatusResponse);\n            }\n        } catch (error) {\n            console.error(error);\n        }\n      })()\n    // eslint-disable-next-line\n    }, []);\n\n\n    const closeCallback = () => {wsConnection === WsConnectionStatus.Connected && closeWs()}\n    setCloseWsCallback({closeCallback : closeCallback})\n\n    const toggleConnection = () => {  \n      if (wsConnection === WsConnectionStatus.Closed) {\n          \n          if (query) {\n              openWebSocket(`(${query}) and leftOff(-1)`, true);\n          } else {\n              openWebSocket(`leftOff(-1)`, true);\n          }\n          scrollableRef.current.jumpToBottom();\n          setIsSnappedToBottom(true);\n      }\n      else if(wsConnection === WsConnectionStatus.Connected)\n        {\n          closeWs()\n          setWsConnection(WsConnectionStatus.Closed);\n        }\n    }\n\n    const onTLSDetected = (destAddress: string) => {\n        addressesWithTLS.add(destAddress);\n        setAddressesWithTLS(new Set(addressesWithTLS));\n\n        if (!userDismissedTLSWarning) {\n            setShowTLSWarning(true);\n        }\n    };\n\n    const getConnectionIndicator = () => {\n        switch (wsConnection) {\n            case WsConnectionStatus.Connected:\n                return <div className={`${TrafficViwerStyles.indicatorContainer} ${TrafficViwerStyles.greenIndicatorContainer}`}>\n                <div className={`${TrafficViwerStyles.indicator} ${TrafficViwerStyles.greenIndicator}`} />\n              </div>\n            default:\n                return <div className={`${TrafficViwerStyles.indicatorContainer} ${TrafficViwerStyles.redIndicatorContainer}`}>\n                <div className={`${TrafficViwerStyles.indicator} ${TrafficViwerStyles.redIndicator}`} />\n              </div>\n        }\n    }\n\n    const getConnectionTitle = () => {\n        switch (wsConnection) {\n            case WsConnectionStatus.Connected:\n                return \"streaming live traffic\"\n            default:\n                return \"streaming paused\";\n        }\n    }\n\n    const onSnapBrokenEvent = () => {\n        setIsSnappedToBottom(false);\n        if (wsConnection === WsConnectionStatus.Connected) {\n          closeWs()\n        }\n    }\n\n\n\n\n  return (\n    <div className={TrafficViwerStyles.TrafficPage}>\n      <div className={TrafficViwerStyles.TrafficPageHeader}>\n        <div className={TrafficViwerStyles.TrafficPageStreamStatus}>\n          <img className={TrafficViwerStyles.playPauseIcon} style={{ visibility: wsConnection === WsConnectionStatus.Connected ? \"visible\" : \"hidden\" }} alt=\"pause\"\n            src={pauseIcon} onClick={toggleConnection} />\n          <img className={TrafficViwerStyles.playPauseIcon} style={{ position: \"absolute\", visibility: wsConnection === WsConnectionStatus.Connected ? \"hidden\" : \"visible\" }} alt=\"play\"\n            src={playIcon} onClick={toggleConnection} />\n          <div className={TrafficViwerStyles.connectionText}>\n            {getConnectionTitle()}\n            {/* <div className={`${TrafficViwerStyles.indicatorContainer} ` + getConnectionStatusClass(true)}>\n              <div className={`${TrafficViwerStyles.indicator} ` + getConnectionStatusClass(false)} />\n            </div> */}\n            {getConnectionIndicator()}\n          </div>\n        </div>\n      </div>\n      {<div className={TrafficViwerStyles.TrafficPageContainer}>\n        <div className={TrafficViwerStyles.TrafficPageListContainer}>\n          <Filters\n            backgroundColor={queryBackgroundColor}\n            openWebSocket={openWebSocket}\n            \n          />\n          <div className={styles.container}>\n            <EntriesList\n              listEntryREF={listEntry}\n              onSnapBrokenEvent={onSnapBrokenEvent}\n              isSnappedToBottom={isSnappedToBottom}\n              setIsSnappedToBottom={setIsSnappedToBottom}\n              queriedCurrent={queriedCurrent}\n              setQueriedCurrent={setQueriedCurrent}\n              queriedTotal={queriedTotal}\n              setQueriedTotal={setQueriedTotal}\n              startTime={startTime}\n              noMoreDataTop={noMoreDataTop}\n              setNoMoreDataTop={setNoMoreDataTop}\n              leftOffTop={leftOffTop}\n              setLeftOffTop={setLeftOffTop}\n              openWebSocket={openWebSocket}\n              leftOffBottom={leftOffBottom}\n              truncatedTimestamp={truncatedTimestamp}\n              setTruncatedTimestamp={setTruncatedTimestamp}\n              scrollableRef={scrollableRef}\n            />\n          </div>\n        </div>\n        <div className={classes.details} id=\"rightSideContainer\">\n          {focusedEntryId && <EntryDetailed />}\n        </div>\n      </div>}\n      {tappingStatus && <StatusBar />}\n       <TLSWarning showTLSWarning={showTLSWarning}\n                   setShowTLSWarning={setShowTLSWarning}\n                   addressesWithTLS={addressesWithTLS}\n                   setAddressesWithTLS={setAddressesWithTLS}\n                   userDismissedTLSWarning={userDismissedTLSWarning}\n                   setUserDismissedTLSWarning={setUserDismissedTLSWarning} />\n    </div>\n  );\n};\n\nconst MemoiedTrafficViwer =  React.memo(TrafficViewer)\nconst TrafficViewerContainer : React.FC<TrafficViewerProps> = ({setAnalyzeStatus, message, isOpen, closeWs, sendQuery, openSocket, trafficViewerApiProp}) => \n{\n  return <RecoilRoot>\n    <MemoiedTrafficViwer message={message} isOpen={isOpen} closeWs={closeWs} sendQuery={sendQuery } openSocket={ openSocket}\n                       trafficViewerApiProp={trafficViewerApiProp} setAnalyzeStatus={setAnalyzeStatus}/>\n  </RecoilRoot>\n}\n\n\nexport default TrafficViewerContainer \n","import React, {useEffect, useState} from \"react\";\nimport style from './style/LoadingOverlay.module.sass';\n\nconst SpinnerShowDelayMs = 350;\n\ninterface LoadingOverlayProps {\n    delay?: number\n}\n\nconst LoadingOverlay: React.FC<LoadingOverlayProps> = ({delay}) => {\n\n    const [isVisible, setIsVisible] = useState(false);\n\n    // @ts-ignore\n    useEffect(() => {\n        let isRelevant = true;\n\n        setTimeout(() => {\n            if(isRelevant)\n                setIsVisible(true);\n        }, delay || SpinnerShowDelayMs);\n\n        return () => isRelevant = false;\n    }, [delay]);\n\n    return <div className={style.loadingOverlayContainer} hidden={!isVisible}>\n        <div className={style.loadingOverlaySpinner}/>\n    </div>\n};\n\nexport default LoadingOverlay;\n"]},"metadata":{},"sourceType":"module"}