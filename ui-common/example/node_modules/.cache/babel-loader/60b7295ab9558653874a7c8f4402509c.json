{"ast":null,"code":"/**\n * @typedef {import('./schema.js').Properties} Properties\n * @typedef {import('./schema.js').Normal} Normal\n *\n * @typedef {Record<string, string>} Attributes\n *\n * @typedef {Object} Definition\n * @property {Record<string, number|null>} properties\n * @property {(attributes: Attributes, property: string) => string} transform\n * @property {string} [space]\n * @property {Attributes} [attributes]\n * @property {Array<string>} [mustUseProperty]\n */\nimport { normalize } from '../normalize.js';\nimport { Schema } from './schema.js';\nimport { DefinedInfo } from './defined-info.js';\nconst own = {}.hasOwnProperty;\n/**\n * @param {Definition} definition\n * @returns {Schema}\n */\n\nexport function create(definition) {\n  /** @type {Properties} */\n  const property = {};\n  /** @type {Normal} */\n\n  const normal = {};\n  /** @type {string} */\n\n  let prop;\n\n  for (prop in definition.properties) {\n    if (own.call(definition.properties, prop)) {\n      const value = definition.properties[prop];\n      const info = new DefinedInfo(prop, definition.transform(definition.attributes || {}, prop), value, definition.space);\n\n      if (definition.mustUseProperty && definition.mustUseProperty.includes(prop)) {\n        info.mustUseProperty = true;\n      }\n\n      property[prop] = info;\n      normal[normalize(prop)] = prop;\n      normal[normalize(info.attribute)] = prop;\n    }\n  }\n\n  return new Schema(property, normal, definition.space);\n}","map":{"version":3,"sources":["/Users/leon/lib-test/liraz-test/node_modules/hast-util-from-parse5/node_modules/property-information/lib/util/create.js"],"names":["normalize","Schema","DefinedInfo","own","hasOwnProperty","create","definition","property","normal","prop","properties","call","value","info","transform","attributes","space","mustUseProperty","includes","attribute"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAAQA,SAAR,QAAwB,iBAAxB;AACA,SAAQC,MAAR,QAAqB,aAArB;AACA,SAAQC,WAAR,QAA0B,mBAA1B;AAEA,MAAMC,GAAG,GAAG,GAAGC,cAAf;AAEA;AACA;AACA;AACA;;AACA,OAAO,SAASC,MAAT,CAAgBC,UAAhB,EAA4B;AACjC;AACA,QAAMC,QAAQ,GAAG,EAAjB;AACA;;AACA,QAAMC,MAAM,GAAG,EAAf;AACA;;AACA,MAAIC,IAAJ;;AAEA,OAAKA,IAAL,IAAaH,UAAU,CAACI,UAAxB,EAAoC;AAClC,QAAIP,GAAG,CAACQ,IAAJ,CAASL,UAAU,CAACI,UAApB,EAAgCD,IAAhC,CAAJ,EAA2C;AACzC,YAAMG,KAAK,GAAGN,UAAU,CAACI,UAAX,CAAsBD,IAAtB,CAAd;AACA,YAAMI,IAAI,GAAG,IAAIX,WAAJ,CACXO,IADW,EAEXH,UAAU,CAACQ,SAAX,CAAqBR,UAAU,CAACS,UAAX,IAAyB,EAA9C,EAAkDN,IAAlD,CAFW,EAGXG,KAHW,EAIXN,UAAU,CAACU,KAJA,CAAb;;AAOA,UACEV,UAAU,CAACW,eAAX,IACAX,UAAU,CAACW,eAAX,CAA2BC,QAA3B,CAAoCT,IAApC,CAFF,EAGE;AACAI,QAAAA,IAAI,CAACI,eAAL,GAAuB,IAAvB;AACD;;AAEDV,MAAAA,QAAQ,CAACE,IAAD,CAAR,GAAiBI,IAAjB;AAEAL,MAAAA,MAAM,CAACR,SAAS,CAACS,IAAD,CAAV,CAAN,GAA0BA,IAA1B;AACAD,MAAAA,MAAM,CAACR,SAAS,CAACa,IAAI,CAACM,SAAN,CAAV,CAAN,GAAoCV,IAApC;AACD;AACF;;AAED,SAAO,IAAIR,MAAJ,CAAWM,QAAX,EAAqBC,MAArB,EAA6BF,UAAU,CAACU,KAAxC,CAAP;AACD","sourcesContent":["/**\n * @typedef {import('./schema.js').Properties} Properties\n * @typedef {import('./schema.js').Normal} Normal\n *\n * @typedef {Record<string, string>} Attributes\n *\n * @typedef {Object} Definition\n * @property {Record<string, number|null>} properties\n * @property {(attributes: Attributes, property: string) => string} transform\n * @property {string} [space]\n * @property {Attributes} [attributes]\n * @property {Array<string>} [mustUseProperty]\n */\n\nimport {normalize} from '../normalize.js'\nimport {Schema} from './schema.js'\nimport {DefinedInfo} from './defined-info.js'\n\nconst own = {}.hasOwnProperty\n\n/**\n * @param {Definition} definition\n * @returns {Schema}\n */\nexport function create(definition) {\n  /** @type {Properties} */\n  const property = {}\n  /** @type {Normal} */\n  const normal = {}\n  /** @type {string} */\n  let prop\n\n  for (prop in definition.properties) {\n    if (own.call(definition.properties, prop)) {\n      const value = definition.properties[prop]\n      const info = new DefinedInfo(\n        prop,\n        definition.transform(definition.attributes || {}, prop),\n        value,\n        definition.space\n      )\n\n      if (\n        definition.mustUseProperty &&\n        definition.mustUseProperty.includes(prop)\n      ) {\n        info.mustUseProperty = true\n      }\n\n      property[prop] = info\n\n      normal[normalize(prop)] = prop\n      normal[normalize(info.attribute)] = prop\n    }\n  }\n\n  return new Schema(property, normal, definition.space)\n}\n"]},"metadata":{},"sourceType":"module"}